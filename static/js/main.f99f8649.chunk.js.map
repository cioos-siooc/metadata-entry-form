{"version":3,"sources":["utils/emlTemplate.j2","regions.js","firebase.js","auth.js","components/I18n.jsx","components/Pages/FormClassTemplate.jsx","providers/UserProvider.jsx","components/NavDrawer.jsx","utils/misc.js","utils/blankRecord.js","utils/firebaseRecordFunctions.js","components/FormComponents/SimpleModal.jsx","components/FormComponents/ApaPreview.jsx","utils/recordToEML.js","utils/licenses.js","utils/recordToERDDAP.js","utils/recordToDataCite.js","utils/validate.js","components/FormComponents/LastEdited.jsx","components/FormComponents/RecordStatusIcon.jsx","components/FormComponents/MetadataRecordListItem.jsx","components/Pages/Submissions.jsx","components/Pages/Published.jsx","utils/firebaseContactFunctions.js","components/FormComponents/ContactTitle.jsx","components/Pages/ContactsSaved.jsx","components/Pages/Login.jsx","components/FormComponents/StatusChip.jsx","components/Pages/NotFound.jsx","components/FormComponents/RequiredMark.jsx","components/FormComponents/QuestionStyles.jsx","components/Tabs/StartTab.jsx","components/FormComponents/CheckBoxList.jsx","isoCodeLists.js","components/FormComponents/RolePicker.jsx","components/FormComponents/ContactEditor.jsx","components/FormComponents/SelectInput.jsx","components/FormComponents/ContactLeftList.jsx","components/Tabs/ContactTab.jsx","components/FormComponents/BilingualTextInput.jsx","components/FormComponents/Resources.jsx","components/Tabs/ResourcesTab.jsx","components/FormComponents/DateInput.jsx","utils/keywords.js","components/FormComponents/KeywordsInput.jsx","components/Tabs/IdentificationTab.jsx","components/FormComponents/Instruments.jsx","components/FormComponents/Platform.jsx","components/Tabs/PlatformTab.jsx","components/FormComponents/MapSelect.jsx","components/Tabs/SpatialTab.jsx","utils/tabs.js","components/FormComponents/Regions.jsx","components/Tabs/SubmitTab.jsx","components/Pages/MetadataForm.jsx","components/Pages/ErrorBoundary.jsx","components/FormComponents/EditSavedContact.jsx","components/FormComponents/TransferModal.jsx","components/Pages/Reviewer.jsx","components/Pages/Admin.jsx","components/Pages/SentryTest.jsx","components/BaseLayout.jsx","components/FormComponents/RegionCard.jsx","components/Pages/RegionSelect.jsx","components/App.jsx","serviceWorker.js","index.jsx"],"names":["module","exports","regions","pacific","title","en","fr","titleFrPossessive","catalogueTitle","colors","primary","secondary","email","catalogueURL","introPageText","showInRegionSelector","stlaurent","atlantic","iys","datacitePrefix","hakai","test","config","apiKey","authDomain","databaseURL","process","REACT_APP_DEV_DEPLOYMENT","projectId","storageBucket","messagingSenderId","appId","firebase","initializeApp","provider","auth","GoogleAuthProvider","setCustomParameters","promt","spanInLanguage","lang","children","useParams","language","En","Fr","I18n","props","console","error","Array","isArray","length","FormClassTemplate","listenerRefs","prevProps","this","match","params","region","unsubscribeAndCloseListeners","componentDidMount","unsubscribe","forEach","ref","off","Component","UserContext","createContext","user","authIsLoading","UserProvider","setState","onAuthStateChanged","userAuth","displayName","uid","Sentry","scope","setUser","username","database","child","update","permissionsRef","on","permissionsFB","permissions","toJSON","admins","reviewers","isAdmin","includes","isReviewer","loggedIn","push","state","translate","functions","httpsCallable","regenerateXMLforRecord","downloadRecord","createDraftDoi","updateDraftDoi","deleteDraftDoi","getDoiStatus","Provider","value","withRouter","useStyles","makeStyles","theme","root","display","flexGrow","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","width","enteringScreen","menuButton","marginRight","languageSelector","borderColor","color","spacing","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","breakpoints","up","toolbar","alignItems","justifyContent","padding","mixins","content","MiniDrawer","history","useHistory","classes","useTheme","useContext","userIsReviewer","userIsAdmin","Object","keys","pathname","useLocation","pathWithoutLang","split","map","e","slice","join","baseURL","React","useState","Boolean","open","setOpen","translations","home","new","contacts","saved","published","review","admin","signIn","logout","topBarBackgroundColor","usingDevDatabase","className","CssBaseline","AppBar","position","clsx","Toolbar","style","backgroundColor","IconButton","aria-label","onClick","edge","Menu","Typography","variant","noWrap","marginBottom","flex","src","alt","verticalAlign","paddingRight","Select","onChange","target","MenuItem","Drawer","paper","direction","ChevronRight","ChevronLeft","ListItem","key","ListItemIcon","Avatar","photoURL","ListItemText","Divider","List","Tooltip","placement","disabled","button","a","signInWithPopup","AccountCircle","ListAlt","AssignmentTurnedIn","RateReview","SupervisorAccount","signOut","then","ExitToApp","deepCopy","obj","JSON","parse","stringify","firebaseToJSObject","input","out","entries","keywords","values","contact","role","replacer","trim","trimStringsInObject","getRecordFilename","record","identifier","toLowerCase","replace","unique","arr","Set","blankRecord","abstract","eov","progress","distribution","dateStart","dateEnd","north","south","east","west","polygon","verticalExtentMin","verticalExtentMax","datePublished","dateRevised","edition","recordID","instruments","platform","platformID","platformDescription","license","status","comment","limitations","lastEditedBy","category","verticalExtentDirection","datasetIdentifier","doiCreationStatus","noPlatform","filename","organization","timeFirstPublished","getBlankRecord","uuidv4","created","Date","toISOString","blankContact","orgName","orgEmail","orgURL","orgAdress","orgCity","orgCountry","orgRor","indPosition","indEmail","indOrcid","givenNames","lastName","inCitation","getBlankContact","cloneRecord","sourceUserID","destinationUserID","sourceUserRecordsRef","once","val","standardizeContact","standardizeRecord","userID","updatedRecord","userinfo","loadRegionRecords","regionRecords","statusFilter","regionUsers","records","submitRecord","recordRef","set","deleteRecord","remove","transferRecord","transferEmail","regionUsersRef","userIDToEmailMapping","userData","userMatch","find","matchingUserID","newRecordRef","newRecordID","getRegionProjects","projects","rand","Math","round","random","getModalStyle","top","left","transform","palette","background","border","boxShadow","shadows","SimpleModal","onClose","onAccept","modalQuestion","modalStyle","Modal","aria-labelledby","aria-describedby","onKeyPress","id","type","generateCitation","format","publishers","filter","cslJSON","author","given","family","issued","publisher","DOI","version","Cite","template","ApaPreview","citation","dangerouslySetInnerHTML","__html","nunjucks","require","arrayOverlap","b","some","translateRole","isoRoles","log","roleMapping","creator","metadataProvider","associatedParty","configure","autoescape","web","fetch","templatePath","t","text","templateXML","renderString","roleMappingKeys","recordToEML","licenses","recordToERDDAP","isoStr","c","attributes","creator_email","creator_name","indName","creator_url","creator_institution","publisher_email","publisher_institution","publisher_url","publisher_name","date_created","geospatial_lat_max","geospatial_lat_min","geospatial_lon_max","geospatial_lon_min","geospatial_vertical_min","geospatial_vertical_max","institution","project","product_version","url","instrument","i","manufacturer","naming_authority","references","platform_vocabulary","summary","attributesStr","k","v","xmlescape","String","recordToDataCite","metadata","publicationYear","creators","reduce","creatorList","name","nameType","givenName","familyName","affiliation","schemeUri","affiliationIdentifier","affiliationIdentifierScheme","nameIdentifiers","nameIdentifier","nameIdentifierScheme","funders","year","parseInt","Number","isNaN","undefined","subjects","flatMap","keyword","subject","dates","date","dateType","dateInformation","licenseInfo","rightsList","rights","rightsUri","rightsIdentifier","code","rightsIdentifierScheme","geoLocations","geoLocationBox","eastBoundLongitude","parseFloat","northBoundLatitude","southBoundLatitude","westBoundLongitude","mappedDataCiteObject","data","prefix","titles","fundingReferences","funder","fundingReference","funderName","funderIdentifier","funderIdentifierType","descriptions","description","descriptionType","types","resourceTypeGeneral","validateEmail","validator","isEmail","validateURL","isURL","doiRegexp","validateDOI","string","URL","_","protocol","isValidHttpUrl","validateLatitude","num","validateLongitude","polygonIsValid","obj1","obj2","coordinates","lat","lon","contactIsFilled","validators","validation","tab","optional","every","dist","validateField","fieldName","valueToValidate","validationFunction","percentValid","fields","numTotalRequired","field","recordIsValid","optionalFieldsAreValid","LastEdited","timeAgo","dateStr","TimeAgo","addLocale","RecordStatusIcon","Description","Drafts","MetadataRecordListItem","onViewEditClick","onDeleteClick","onCloneClick","onSubmitClick","showAuthor","showDeleteAction","showSubmitAction","showPublishAction","showUnPublishAction","showUnSubmitAction","showViewAction","showEditAction","showPercentComplete","showCloneAction","onUnSubmitClick","onUnPublishClick","showDownloadButton","showTransferButton","onTransferClick","showCatalogueURL","downloadXML","isLoading","setIsLoading","anchorEl","setAnchorEl","handleClose","isValidRecord","percentValidInt","handleDownloadRecord","fileType","extensions","erddap","xml","yaml","eml","json","emlStr","res","message","blob","Blob","FileSaver","saveAs","ListItemAvatar","secondaryTypographyProps","ListItemSecondaryAction","Visibility","Edit","Delete","Publish","Eject","FileCopy","aria-controls","aria-expanded","aria-haspopup","event","currentTarget","CircularProgress","CloudDownload","MenuListProps","PaperProps","TransferWithinAStation","window","focus","OpenInNew","Submissions","deleteModalOpen","submitModalOpen","withdrawModalOpen","modalKey","modalRecord","loading","recordsRef","multiple","allUsersRecords","acc","loadRecords","currentUser","returnRecordToDraft","modalName","toggleModal","handleSubmitRecord","withdrawRecord","marginTop","Button","startIcon","Add","sort","editRecord","Published","usersRef","regionRecordsFB","handleCloneRecord","contactID","contactsRef","newNode","ContactTitle","getContactTitleFromNames","Contacts","modalOpen","deleteContact","cloneContact","newContact","Grid","container","item","xs","handleDeleteContact","addContact","editContact","PermContactCalendar","handleCloneContact","Login","StatusChip","chipText","Chip","label","NotFound","RequiredMark","passes","fontSize","bottom","SupplementalText","component","QuestionText","paperClass","margin","StartTab","regionInfo","Paper","href","Save","CheckBoxList","options","optionLabels","optionTooltips","labelSize","FormControlLabel","control","Checkbox","checked","ele","newCheckedValuesArray","concat","roleCodes","custodian","required","showProminently","owner","distributor","coAuthor","collaborator","contributor","editor","mediator","originator","pointOfContact","principalInvestigator","processor","resourceProvider","rightsHolder","sponsor","stakeholder","progressCodes","onGoing","historicalArchive","completed","depthDirections","heightPositive","depthPositive","RolePicker","updateContact","expanded","setExpanded","roles","prominentRoles","nonProminentRoles","nonProminentRoleKeys","r","selectOptionIsInExpandedList","Accordion","AccordionSummary","expandIcon","ExpandMore","AccordionDetails","ContactEditor","lastname","showRolePicker","handleClear","updateContactEvent","updateContactRor","updateContactOrcid","orgEmailValid","indEmailValid","orgURLValid","givenNamesValid","lastNameValid","rorInputValue","setRorInputValue","orcidInputValue","setOrcidInputValue","useDebounce","debouncedRorInputValue","rorOptions","setRorOptions","rorSearchActive","setRorSearchActive","useEffect","newInputValue","startsWith","response","items","marginleft","height","size","Autocomplete","inputValue","onInputChange","errors","freeSolo","filterOptions","x","getOptionLabel","fullWidth","renderInput","TextField","active","InputLabelProps","shrink","InputProps","endAdornment","InputAdornment","Clear","helperText","rel","orcid","headers","accept","setTimeout","toUpperCase","givenNamesFormat","formControl","minWidth","selectEmpty","SelectInput","FormControl","displayEmpty","InputLabel","enterDelay","ContactLeftList","updateContacts","activeContact","setActiveContact","userContacts","saveToContacts","currentContacts","setItems","contactList","dragHandleSelector","lockAxis","onDrop","removedIndex","addedIndex","reorderedContacts","arrayMove","contactItem","fontWeight","contactIndex","duplicatedContact","duplicateContact","itemIndex","index","labelId","ContactTab","updateRecord","newContacts","showApaBox","payload","links","addresses","city","country","country_name","person","emails","uri","BilingualTextInput","multiline","translationButonDisabled","awaitingTranslation","setAwaitingTranslation","handleEvent","newData","languages","textTooBig","startAdornment","endIcon","alternateLanguage","fromLang","translatedText","translation","Resources","updateResources","resources","emptyResource","removeResource","moveResource","newIndex","element","splice","nameLabel","descriptionLabel","urlIsValid","handleResourceChange","newValue","ArrowUpwardSharp","ArrowDownwardSharp","ResourcesTab","formatDate","d","getDate","m","getMonth","y","getFullYear","DateInput","utils","DateFnsUtils","minDate","maxDate","dateSelected","KeyboardButtonProps","KeywordsInput","selectedKeyword","setKeyword","setInputValue","selectedKeywordAltLang","setSelectedKeywordAltLang","reverse","altLanguage","cleanList","list","indexOf","word","toLang","foundWord","keywordList","localeCompare","userKeywordList","userKeywordListAlt","onDelete","deletedChipLang","IdentificationTab","handleUpdateRecord","doiIsValid","languageUpperCase","doiGenerated","setDoiGenerated","doiErrorFlag","setDoiErrorFlag","debouncedDoiIdValue","loadingDoi","setLoadingDoi","loadingDoiUpdate","setLoadingDoiUpdate","loadingDoiDelete","setLoadingDoiDelete","doiUpdateFlag","setDoiUpdateFlag","generateDoiDisabled","showGenerateDoi","showDoiStatus","showUpdateDoi","showDeleteDoi","mounted","useRef","CatalogueLink","licensesSorted","doi","finally","dataObject","statusCode","current","pop","catch","err","eovCategories","categoryKey","categoryText","eovsFiltered","eovs","emerging","Update","l","emptyInstrument","Instruments","updateInstruments","activeInstrument","setActiveInstrument","updateInstrumentField","instrumentsCopy","manufacturerLabel","versionLabel","typeLabel","instrumentItem","Platform","platformsSorted","platforms","label_en","PlatformTab","withLeaflet","updateMap","mapData","handleMapClear","editableFG","setEditableFG","setLayerError","coordTest","polyTest","clearExtraLayers","drawnItems","layerid","leafletElement","_layers","layer","removeLayer","handleChange","limitDecimals","toPrecision","parsePolyString","polygonList","coordList","matchAll","point","hasPolygon","test_string","L","EditToolbar","include","enable","featureGroup","clearLayers","bboxIsDrawn","polyIsDrawn","fieldsAreEmpty","Map","center","zoom","TileLayer","attribution","FeatureGroup","featureGroupRef","onCreated","layerType","polygonStrings","getLatLngs","lng","polybounds","getBounds","getNorthEast","getSouthWest","bounds","onMapClear","draw","marker","circle","polyline","circlemarker","edit","positions","test_n","test_s","test_e","test_w","hasBoundingBox","inputProps","inputMode","pattern","latLngBounds","ignore","OpenEPSGDefn","SpatialTab","paddingBottom","handleUpdateMap","paddingTop","tabs","start","dataID","spatial","platformInstruments","GetRegionInfo","SubmitTab","isSubmitting","setSubmitting","validationErrors","getErrorsByTab","submitted","LinearProgressWithLabel","Box","mr","LinearProgress","TabPanel","other","hidden","MetadataForm","changes","saveDisabled","tabIndex","highlightMissingRequireFields","editorInfo","loggedInUserCanEditRecord","saveIncompleteRecordModalOpen","isNewRecord","endsWith","loggedInUserID","recordUserID","loggedInUserOwnsRecord","context","editorDataRef","userinfoRef","userDataRef","editorContactsRef","contactsFB","recordFireBase","recordFireBaseObj","getKey","handleSaveClick","userOKedRecordDemotion","recordIsComplete","path","tabProps","Fab","fab","Tabs","scrollButtons","Tab","tabRoot","textAlign","saveUpdateContact","contextType","withStyles","right","ErrorBoundary","hasError","errorInfo","EditContact","contactRef","isFilledEnoughToSave","updateOrgFromRor","updateIndFromOrcid","handleSubmitClick","handleCancelClick","TransferModal","setEmail","transferResult","setTransferResult","isTransferring","setIsTransferring","emailIsValid","RecordItem","commonProps","DraftRecordItem","SubmittedRecordItem","PublishedRecordItem","Reviewer","users","publishModalOpen","unPublishModalOpen","unSubmitModalOpen","transferModalOpen","modalUserID","showRecordTypes","showUsers","recordsFilter","recordCountsByStatus","authUser","regionUsersRaw","transferUserNotFound","recordsToShow","draft","recordStatusTranslate","selectedText","handleTransferRecord","bind","cleanArr","Admin","regionRef","permissionsFirebase","projectsRef","save","SentryTest","Error","RegionLogo","imgPath","paddingLeft","Pages","exact","BaseLayout","createTheme","overrides","MuiTooltip","tooltip","MuiFormControlLabel","MuiInputBase","main","MuiTextField","MuiSelect","MuiButton","Helmet","sizes","ThemeProvider","maxWidth","media","MediaCard","regionSummary","Card","minHeight","CardActionArea","CardMedia","image","CardContent","maxHeight","RegionSelect","regionCode","regionPath","App","basename","to","location","hostname","dsn","integrations","Integrations","BrowserTracing","tracesSampleRate","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f99f8649.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/emlTemplate.998d6686.j2\";","// Copying how RA's use colors in their wordpress sites\nconst regions = {\n  pacific: {\n    title: { en: \"CIOOS Pacific\", fr: \"SIOOC Pacifique\" },\n    titleFrPossessive: \"du SIOOC Pacifique\",\n    catalogueTitle: {\n      fr: \"Catalogue de donnes du SIOOC du Pacifique\",\n      en: \"CIOOS Pacific Data Catalogue\",\n    },\n    colors: { primary: \"#006e90\", secondary: \"#ffc857\" },\n    email: \"info@cioospacific.ca\",\n    catalogueURL: {\n      fr: \"https://catalogue.cioospacific.ca/fr/\",\n      en: \"https://catalogue.cioospacific.ca/\",\n    },\n    introPageText: {\n      en:\n        \"CIOOS Pacific integrates data from Canadas west coast, from Dixon Entrance to the Strait of Juan de Fuca.\",\n      fr:\n        \"Le CIOOS Pacifique intgre les donnes de la cte ouest du Canada, de l'entre Dixon au dtroit de Juan de Fuca.\",\n    },\n    showInRegionSelector: true,\n  },\n\n  stlaurent: {\n    title: {\n      en: \"St. Lawrence Global Observatory\",\n      fr: \"Observatoire Global du Saint-Laurent (OGSL)\",\n    },\n    titleFrPossessive: \"de l'Observatoire Global du Saint-Laurent (OGSL)\",\n    catalogueTitle: {\n      fr:\n        \"Catalogue de donnes de l'Observatoire global du Saint-Laurent (OGSL)\",\n      en: \"St. Lawrence Global Observatory Data Catalogue (SLGO)\",\n    },\n    colors: { primary: \"#00adef\", secondary: \"#00aeef\" },\n    email: \"info@ogsl.ca\",\n    catalogueURL: {\n      fr: \"https://catalogue.ogsl.ca/\",\n      en: \"https://catalogue.ogsl.ca/en/\",\n    },\n    introPageText: {\n      en:\n        \"SLGO integrates data from the St. Lawrence, from the Great Lakes to the Gulf.\",\n      fr:\n        \"L'Observatoire global du Saint-Laurent intgre les donnes du Saint-Laurent, des Grands Lacs jusqu'au Golfe\",\n    },\n    showInRegionSelector: true,\n  },\n  atlantic: {\n    title: { en: \"CIOOS Atlantic\", fr: \"SIOOC Atlantique\" },\n    titleFrPossessive: \"du SIOOC Atlantique\",\n    catalogueTitle: {\n      fr: \"Catalogue de donnes du SIOOC du Atlantic\",\n      en: \"CIOOS Atlantic Data Catalogue\",\n    },\n    colors: { primary: \"#19222b\", secondary: \"#e55162\" },\n    email: \"info@cioosatlantic.ca\",\n    catalogueURL: {\n      fr: \"https://cioosatlantic.ca/ckan/fr/\",\n      en: \"https://cioosatlantic.ca/ckan/\",\n    },\n    introPageText: {\n      en:\n        \"CIOOS Atlantic integrates data from Canadas east coast, from Labrador to Bay of Fundy.\",\n      fr:\n        \"Le CIOOS Atlantique intgre les donnes de la cte est du Canada, du Labrador  la baie de Fundy.\",\n    },\n    showInRegionSelector: true,\n  },\n\n  iys: {\n    title: { en: \"IYS\", fr: \"IYS\" },\n    datacitePrefix: \"10.21966\",\n    catalogueTitle: {\n      fr: \"Catalogue de donnes du IYS\",\n      en: \"IYS Data Catalogue\",\n    },\n    colors: { primary: \"#006e90\", secondary: \"#ffc857\" },\n    email: \"iys.data@hakai.org\",\n    catalogueURL: {\n      fr: \"https://iys.hakai.org/dataset/\",\n      en: \"https://iys.hakai.org/dataset/\",\n    },\n    introPageText: { en: \"\", fr: \"\" },\n    showInRegionSelector: false,\n  },\n  hakai: {\n    title: { en: \"Hakai\", fr: \"Hakai\" },\n    datacitePrefix: \"10.21966\",\n    catalogueTitle: {\n      fr: \"Catalogue de donnes du Hakai\",\n      en: \"Hakai Data Catalogue\",\n    },\n    colors: { primary: \"#aa2025\", secondary: \"#459be2\" },\n    email: \"data@hakai.org\",\n    catalogueURL: {\n      fr: \"https://catalogue.hakai.org/\",\n      en: \"https://catalogue.hakai.org/\",\n    },\n    introPageText: { en: \"\", fr: \"\" },\n    showInRegionSelector: false,\n  },\n  test: {\n    title: { en: \"Test\", fr: \"Test\" },\n    catalogueTitle: {\n      fr: \"Catalogue de donnes du Test\",\n      en: \"Test Data Catalogue\",\n    },\n    colors: { primary: \"#fcba03\", secondary: \"#2518ad\" },\n    email: \"data@hakai.org\",\n    catalogueURL: {\n      fr: \"https://example.com/\",\n      en: \"https://example.com/\",\n    },\n    introPageText: { en: \"This is a test region\", fr: \"\" },\n    showInRegionSelector: false,\n  },\n};\n\nexport default regions;\n","import firebase from \"firebase/app\";\nimport \"firebase/database\";\nimport \"firebase/auth\";\nimport \"firebase/functions\";\nimport \"firebase/firestore\";\n\nconst deployedOnTestSserver = process.env.REACT_APP_DEV_DEPLOYMENT;\n\nconst productionDB = \"https://cioos-metadata-form.firebaseio.com\";\nconst devDB = \"https://cioos-metadata-form-dev.firebaseio.com\";\n\nconst config = {\n  apiKey: \"AIzaSyAdlELZS5Lbea5NquotMT8amwO-Lc_7ogc\",\n  authDomain: \"cioos-metadata-form.firebaseapp.com\",\n  databaseURL:\n    process.env.NODE_ENV === \"production\" && !deployedOnTestSserver\n      ? productionDB\n      : devDB,\n  projectId: \"cioos-metadata-form\",\n  storageBucket: \"cioos-metadata-form.appspot.com\",\n  messagingSenderId: \"646114203434\",\n  appId: \"1:646114203434:web:bccceadc5144270f98f053\",\n};\n\nfirebase.initializeApp(config);\n// uncomment below to use firebase emulator for local development\n// if (window.location.hostname === \"localhost\") {\n//   firebase.functions().useFunctionsEmulator(\"http://localhost:5002\");\n//   // firebase.auth().useEmulator(\"http://localhost:9099\");\n// }\n\nexport default firebase;\n","import firebase from \"./firebase\";\n\nconst provider = new firebase.auth.GoogleAuthProvider();\n\nprovider.setCustomParameters({ promt: \"select_account\" });\n\nexport const auth = firebase.auth();\n\nexport const signInWithGoogle = () => auth.signInWithPopup(provider);\n","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nconst spanInLanguage = (lang) => ({ children }) => {\n  const { language } = useParams();\n  return language === lang && <>{children}</>;\n};\n\nexport const En = spanInLanguage(\"en\");\nexport const Fr = spanInLanguage(\"fr\");\n\n/* \n  This component can be used with attributes only, eg\n  <I18n en=\"boat\" fr=\"bateau\"/>\n\n  Or as a container for the <En> and <Fr> tags\n\n  Eg:\n\n  <I18n>\n    <En>rabbit</En>\n    <Fr>lapin</Fr>\n  </I18n>\n*/\n\nexport const I18n = (props) => {\n  const { en, fr } = props;\n  const { language = \"en\" } = useParams();\n\n  // If this component used via attributes\n  if (en || fr) {\n    if (en && fr) return language === \"en\" ? en : fr;\n    // eslint-disable-next-line no-console\n    console.error(\"Tag missing french or english!\");\n    return null;\n  }\n\n  if (Array.isArray(props.children) && props.children.length !== 2) {\n    // eslint-disable-next-line no-console\n    console.error(props, \"Tag missing french or english!\");\n  }\n\n  return props.children;\n};\n","import { Component } from \"react\";\n\nclass FormClassTemplate extends Component {\n  constructor() {\n    super();\n    this.listenerRefs = [];\n  }\n\n  componentDidUpdate(prevProps) {\n    const { match } = this.props;\n    // Refresh data when region changes via the URL\n\n    if (match.params.region !== prevProps.match.params.region) {\n      this.unsubscribeAndCloseListeners();\n      this.componentDidMount();\n    }\n  }\n\n  componentWillUnmount() {\n    // fixes error Can't perform a React state update on an unmounted component\n    this.unsubscribeAndCloseListeners();\n  }\n\n  unsubscribeAndCloseListeners() {\n    if (this.unsubscribe) this.unsubscribe();\n    if (this.listenerRefs.length) {\n      this.listenerRefs.forEach((ref) => ref.off());\n    }\n  }\n}\nexport default FormClassTemplate;\n","import React, { createContext } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport * as Sentry from \"@sentry/react\";\nimport { auth } from \"../auth\";\nimport firebase from \"../firebase\";\nimport FormClassTemplate from \"../components/Pages/FormClassTemplate\";\n\nexport const UserContext = createContext({ user: null, authIsLoading: false });\n\nclass UserProvider extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null,\n      authIsLoading: false,\n      admins: [],\n      reviewers: [],\n      isReviewer: false,\n      loggedIn: false,\n    };\n  }\n\n  componentDidMount = () => {\n    const { match } = this.props;\n\n    const { region } = match.params;\n    this.setState({ authIsLoading: true });\n    this.unsubscribe = auth.onAuthStateChanged((userAuth) => {\n      if (userAuth) {\n        const { displayName, email, uid } = userAuth;\n\n        Sentry.configureScope((scope) => {\n          scope.setUser({\n            email,\n            username: email,\n          });\n        });\n\n        firebase\n          .database()\n          .ref(region)\n          .child(\"users\")\n          .child(uid)\n          .child(\"userinfo\")\n          .update({ displayName, email });\n\n        const permissionsRef = firebase\n          .database()\n          .ref(region)\n          .child(`permissions`);\n\n        permissionsRef.on(\"value\", (permissionsFB) => {\n          const permissions = permissionsFB.toJSON();\n\n          const admins = permissions?.admins || \"\";\n          const reviewers = permissions?.reviewers || \"\";\n\n          const isAdmin = admins.includes(email);\n          const isReviewer = reviewers.includes(email);\n\n          this.setState({\n            admins,\n            reviewers,\n            isAdmin,\n            isReviewer,\n            loggedIn: true,\n          });\n        });\n        this.listenerRefs.push(permissionsRef);\n      } else {\n        this.setState({\n          loggedIn: false,\n          authIsLoading: false,\n        });\n      }\n      this.setState({ user: userAuth, authIsLoading: false });\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const translate = firebase.functions().httpsCallable(\"translate\");\n    const regenerateXMLforRecord = firebase\n      .functions()\n      .httpsCallable(\"regenerateXMLforRecord\");\n    const downloadRecord = firebase.functions().httpsCallable(\"downloadRecord\");\n    const createDraftDoi = firebase.functions().httpsCallable(\"createDraftDoi\");\n    const updateDraftDoi = firebase.functions().httpsCallable(\"updateDraftDoi\");\n    const deleteDraftDoi = firebase.functions().httpsCallable(\"deleteDraftDoi\");\n    const getDoiStatus = firebase.functions().httpsCallable(\"getDoiStatus\");\n\n    return (\n      <UserContext.Provider\n        value={{\n          ...this.state,\n          translate,\n          regenerateXMLforRecord,\n          downloadRecord,\n          createDraftDoi,\n          updateDraftDoi,\n          deleteDraftDoi,\n          getDoiStatus,\n        }}\n      >\n        {children}\n      </UserContext.Provider>\n    );\n  }\n}\n\nexport default withRouter(UserProvider);\n","import React, { useContext } from \"react\";\n\nimport { useParams, useLocation, useHistory } from \"react-router-dom\";\n\nimport clsx from \"clsx\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport {\n  ExitToApp,\n  Contacts,\n  ListAlt,\n  AccountCircle,\n  ChevronLeft,\n  ChevronRight,\n  RateReview,\n  SupervisorAccount,\n  Menu,\n  AssignmentTurnedIn,\n} from \"@material-ui/icons\";\n\nimport {\n  Drawer,\n  Avatar,\n  AppBar,\n  Toolbar,\n  CssBaseline,\n  Typography,\n  Divider,\n  IconButton,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Select,\n  Tooltip,\n  MenuItem,\n} from \"@material-ui/core\";\nimport regions from \"../regions\";\nimport { auth, signInWithGoogle } from \"../auth\";\n\nimport { En, Fr, I18n } from \"./I18n\";\n\nimport { UserContext } from \"../providers/UserProvider\";\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexGrow: 1,\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: 36,\n  },\n  languageSelector: {\n    \"&:before\": {\n      borderColor: \"white\",\n    },\n    \"&:hover:not(.Mui-disabled):before\": {\n      borderColor: \"white\",\n    },\n    color: \"white\",\n    borderColor: \"white\",\n    marginRight: theme.spacing(2),\n  },\n  hide: {\n    display: \"none\",\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    whiteSpace: \"nowrap\",\n  },\n  drawerOpen: {\n    width: drawerWidth,\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerClose: {\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    overflowX: \"hidden\",\n    width: theme.spacing(7) + 1,\n    [theme.breakpoints.up(\"sm\")]: {\n      width: theme.spacing(9) + 1,\n    },\n  },\n  toolbar: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n}));\n\nexport default function MiniDrawer({ children }) {\n  const history = useHistory();\n\n  const classes = useStyles();\n  const theme = useTheme();\n\n  const {\n    user,\n    isReviewer: userIsReviewer,\n    isAdmin: userIsAdmin,\n    authIsLoading,\n  } = useContext(UserContext);\n\n  let { language = \"en\", region = \"region-select\" } = useParams();\n\n  if (![\"en\", \"fr\"].includes(language)) language = \"en\";\n\n  // This component may be displayed before the region is selected\n  if (!Object.keys(regions).includes(region)) region = \"\";\n\n  const { pathname } = useLocation();\n\n  const pathWithoutLang = pathname\n    .split(\"/\")\n    .map((e) => e)\n    .slice(2)\n    .join(\"/\");\n\n  const baseURL = `/${language}/${region}`;\n\n  // if region not set, keep drawer closed\n  const [open, setOpen] = React.useState(Boolean(region));\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  const translations = {\n    home: <I18n en=\"Home\" fr=\"Accueil\" />,\n    new: <I18n en=\"Metadata Editor\" fr=\"diteur de mta-donnes\" />,\n    contacts: <I18n en=\"Contacts\" fr=\"Contacts\" />,\n    saved: <I18n en=\"My Records\" fr=\"Enregistrements\" />,\n    published: <I18n en=\"Published Records\" fr=\"Dossiers publis\" />,\n    review: <I18n en=\"Review submissions\" fr=\"Examen des soumissions\" />,\n    admin: <I18n en=\"Admin\" fr=\"Admin\" />,\n    signIn: <I18n en=\"Sign in\" fr=\"Se Connecter\" />,\n    logout: <I18n en=\"Logout\" fr=\"Dconnexion\" />,\n  };\n  const topBarBackgroundColor = region\n    ? regions[region].colors.primary\n    : // CIOOS national \"dominant colour\" from branding doc\n      \"#52a79b\";\n\n  // add some text to indicate connected to dev d\n  const usingDevDatabase =\n    process.env.REACT_APP_DEV_DEPLOYMENT ||\n    process.env.NODE_ENV === \"development\";\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar\n        position=\"fixed\"\n        className={clsx(classes.appBar, {\n          [classes.appBarShift]: open,\n        })}\n      >\n        <Toolbar\n          style={{\n            backgroundColor: topBarBackgroundColor,\n            alignItems: \"end\",\n          }}\n        >\n          {region && (\n            <IconButton\n              aria-label=\"open drawer\"\n              onClick={handleDrawerOpen}\n              edge=\"start\"\n              className={clsx(classes.menuButton, {\n                [classes.hide]: open,\n              })}\n            >\n              <Menu />\n            </IconButton>\n          )}\n          <Typography\n            variant=\"h5\"\n            noWrap\n            style={{\n              marginLeft: \"10px\",\n              marginBottom: \"10px\",\n              flex: 1,\n              color: \"white\",\n            }}\n          >\n            <I18n>\n              <En>Metadata Entry Tool</En>\n              <Fr>Outil de saisie de mtadonnes</Fr>\n            </I18n>\n          </Typography>\n          <div style={{ marginLeft: \"auto\" }}>\n            <img\n              src={`${process.env.PUBLIC_URL}/cioos_website_top_banner_${language}.png`}\n              alt=\"CIOOS/SIOOC\"\n              width={350}\n              style={{ verticalAlign: \"bottom\", paddingRight: \"15px\" }}\n            />\n\n            <Select\n              color=\"primary\"\n              className={classes.languageSelector}\n              value={language}\n              onChange={(e) =>\n                history.push(`/${e.target.value}/${pathWithoutLang}`)\n              }\n            >\n              <MenuItem value=\"en\">EN</MenuItem>\n              <MenuItem value=\"fr\">FR</MenuItem>\n            </Select>\n          </div>\n        </Toolbar>\n      </AppBar>\n      {region && (\n        <Drawer\n          variant=\"permanent\"\n          className={clsx(classes.drawer, {\n            [classes.drawerOpen]: open,\n            [classes.drawerClose]: !open,\n          })}\n          classes={{\n            paper: clsx({\n              [classes.drawerOpen]: open,\n              [classes.drawerClose]: !open,\n            }),\n          }}\n        >\n          <div className={classes.toolbar}>\n            <IconButton onClick={handleDrawerClose}>\n              {theme.direction === \"rtl\" ? <ChevronRight /> : <ChevronLeft />}\n            </IconButton>\n          </div>\n\n          {user && (\n            <ListItem key=\"userInfo\">\n              <ListItemIcon>\n                <Avatar src={user.photoURL} />\n              </ListItemIcon>\n              <ListItemText primary={user.displayName} />\n            </ListItem>\n          )}\n          <Divider />\n          <List>\n            {!user && region && (\n              <Tooltip\n                placement=\"right-start\"\n                title={open ? \"\" : translations.signIn}\n              >\n                <ListItem\n                  disabled={authIsLoading}\n                  button\n                  key=\"Sign in\"\n                  onClick={async () => {\n                    await signInWithGoogle();\n                    history.push(pathname);\n                  }}\n                >\n                  <ListItemIcon>\n                    <AccountCircle />\n                  </ListItemIcon>\n                  <ListItemText primary={translations.signIn} />\n                </ListItem>\n              </Tooltip>\n            )}\n            {user && region && (\n              <>\n                <Tooltip\n                  placement=\"right-start\"\n                  title={open ? \"\" : translations.saved}\n                >\n                  <ListItem\n                    button\n                    key=\"My Records\"\n                    onClick={() => history.push(`${baseURL}/submissions`)}\n                  >\n                    <ListItemIcon>\n                      <ListAlt />\n                    </ListItemIcon>\n                    <ListItemText primary={translations.saved} />\n                  </ListItem>\n                </Tooltip>\n                <Tooltip\n                  placement=\"right-start\"\n                  title={open ? \"\" : translations.saved}\n                >\n                  <ListItem\n                    button\n                    key=\"Region's Published Records\"\n                    onClick={() => history.push(`${baseURL}/published`)}\n                  >\n                    <ListItemIcon>\n                      <AssignmentTurnedIn />\n                    </ListItemIcon>\n                    <ListItemText primary={translations.published} />\n                  </ListItem>\n                </Tooltip>\n\n                <Tooltip\n                  placement=\"right-start\"\n                  title={open ? \"\" : translations.contacts}\n                >\n                  <ListItem\n                    button\n                    key=\"Contacts\"\n                    onClick={() => history.push(`${baseURL}/contacts`)}\n                  >\n                    <ListItemIcon disabled>\n                      <Contacts />\n                    </ListItemIcon>\n                    <ListItemText primary={translations.contacts} />\n                  </ListItem>\n                </Tooltip>\n\n                {userIsReviewer && (\n                  <Tooltip\n                    placement=\"right-start\"\n                    title={open ? \"\" : translations.review}\n                  >\n                    <ListItem\n                      button\n                      key=\"Review\"\n                      onClick={() => history.push(`${baseURL}/reviewer`)}\n                    >\n                      <ListItemIcon>\n                        <RateReview />\n                      </ListItemIcon>\n                      <ListItemText primary={translations.review} />\n                    </ListItem>\n                  </Tooltip>\n                )}\n                {userIsAdmin && (\n                  <Tooltip\n                    placement=\"right-start\"\n                    title={open ? \"\" : translations.admin}\n                  >\n                    <ListItem\n                      button\n                      key=\"Admin\"\n                      onClick={() => history.push(`${baseURL}/admin`)}\n                    >\n                      <ListItemIcon>\n                        <SupervisorAccount />\n                      </ListItemIcon>\n                      <ListItemText primary={translations.admin} />\n                    </ListItem>\n                  </Tooltip>\n                )}\n              </>\n            )}\n\n            {user && (\n              <Tooltip\n                placement=\"right-start\"\n                title={open ? \"\" : translations.logout}\n              >\n                <ListItem\n                  button\n                  key=\"Logout\"\n                  onClick={() =>\n                    auth.signOut().then(() => history.push(baseURL))\n                  }\n                >\n                  <ListItemIcon>\n                    <ExitToApp />\n                  </ListItemIcon>\n                  <ListItemText primary={translations.logout} />\n                </ListItem>\n              </Tooltip>\n            )}\n          </List>\n          <Divider />\n          {usingDevDatabase && <h5>Connected to development database</h5>}\n        </Drawer>\n      )}\n      <main className={classes.content}>\n        <div className={classes.toolbar} />\n        {children}\n      </main>\n    </div>\n  );\n}\n","export function deepCopy(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\nexport function deepEquals(obj1, obj2) {\n  return JSON.stringify(obj1) === JSON.stringify(obj2);\n}\n/*\nConvert firebase to javascript, mostly just used to get real array elements\n*/\nexport function firebaseToJSObject(input) {\n  if (!input) return null;\n  const out = deepCopy(input);\n  Object.keys(out).forEach((key) => {\n    if (typeof out[key] === \"object\" && Object.keys(out[key])[0] === \"0\") {\n      out[key] = Object.entries(out[key]).map(([, v]) => v);\n    }\n\n    //  special case\n    if (input.keywords)\n      out.keywords = {\n        en: Object.values(input.keywords.en || {}),\n        fr: Object.values(input.keywords.fr || {}),\n      };\n  });\n  if (out.contacts) {\n    Object.values(out.contacts).forEach((contact) => {\n      if (contact.role) {\n        // eslint-disable-next-line no-param-reassign\n        contact.role = Object.values(contact.role);\n      }\n    });\n  }\n\n  return out;\n}\n\nconst replacer = (key, value) => {\n  if (typeof value === \"string\") {\n    return value.trim();\n  }\n  return value;\n};\n\n// used to trim all extra whitespace from strings in the record\nexport const trimStringsInObject = (obj) =>\n  JSON.parse(JSON.stringify(obj, replacer));\n\nexport function getRecordFilename(record) {\n  return `${record.title[record.language].slice(\n    0,\n    30\n  )}_${record.identifier.slice(0, 5)}`\n    .trim()\n    .toLowerCase()\n    .replace(/[^a-zA-Z0-9]/g, \"_\");\n}\nexport const unique = (arr) => [...new Set(arr)];\n","import { v4 as uuidv4 } from \"uuid\";\n\nimport { deepCopy } from \"./misc\";\n\nconst blankRecord = {\n  title: { en: \"\", fr: \"\" },\n  abstract: { en: \"\", fr: \"\" },\n  keywords: { en: [], fr: [] },\n  eov: [],\n  progress: \"\",\n  distribution: [],\n  dateStart: null,\n  dateEnd: null,\n  map: { north: \"\", south: \"\", east: \"\", west: \"\", polygon: \"\" },\n  verticalExtentMin: \"\",\n  verticalExtentMax: \"\",\n  datePublished: null,\n  dateRevised: null,\n  edition: \"\",\n  recordID: \"\",\n  instruments: [],\n  platform: \"\",\n  platformID: \"\",\n  platformDescription: \"\",\n  language: \"\",\n  license: \"\",\n  contacts: [],\n  status: \"\",\n  comment: \"\",\n  limitations: \"\",\n  lastEditedBy: {},\n  category: \"\",\n  verticalExtentDirection: \"\",\n  datasetIdentifier: \"\",\n  doiCreationStatus: \"\",\n  noPlatform: false,\n  filename: \"\",\n  organization: \"\",\n  timeFirstPublished: \"\",\n};\n\nfunction getBlankRecord() {\n  const record = deepCopy(blankRecord);\n  record.identifier = uuidv4();\n  record.created = new Date().toISOString();\n  return record;\n}\n\nconst blankContact = {\n  role: [],\n  orgName: \"\",\n  orgEmail: \"\",\n  orgURL: \"\",\n  orgAdress: \"\",\n  orgCity: \"\",\n  orgCountry: \"\",\n  orgRor: \"\",\n  indPosition: \"\",\n  indEmail: \"\",\n  indOrcid: \"\",\n  givenNames: \"\",\n  lastName: \"\",\n  inCitation: true,\n};\n\nfunction getBlankContact() {\n  const contact = deepCopy(blankContact);\n  return contact;\n}\n\nexport { getBlankRecord, getBlankContact };\n","import { v4 as uuidv4 } from \"uuid\";\nimport firebase from \"../firebase\";\n\nimport { getBlankRecord, getBlankContact } from \"./blankRecord\";\nimport { firebaseToJSObject, getRecordFilename, deepCopy } from \"./misc\";\n\nexport async function cloneRecord(\n  recordID,\n  sourceUserID,\n  destinationUserID,\n  region\n) {\n  const sourceUserRecordsRef = firebase\n    .database()\n    .ref(region)\n    .child(\"users\")\n    .child(sourceUserID)\n    .child(\"records\");\n\n  const record = (\n    await sourceUserRecordsRef.child(recordID).once(\"value\")\n  ).val();\n\n  // reset record details\n  record.recordID = \"\";\n  record.status = \"\";\n  record.lastEditedBy = {};\n  record.created = new Date().toISOString();\n  record.filename = \"\";\n  record.timeFirstPublished = \"\";\n\n  if (record.title.en) record.title.en = `${record.title.en} (Copy)`;\n  if (record.title.fr) record.title.fr = `${record.title.fr} (Copte)`;\n  record.identifier = uuidv4();\n  record.created = new Date().toISOString();\n\n  const destinationUserRecordsRef = firebase\n    .database()\n    .ref(region)\n    .child(\"users\")\n    .child(destinationUserID)\n    .child(\"records\");\n\n  destinationUserRecordsRef.push(record);\n}\nexport function standardizeContact(contact) {\n  return {\n    ...getBlankContact(),\n    ...contact,\n  };\n}\n\n// fills in missing fields on older records\nexport function standardizeRecord(record, user, userID, recordID) {\n  const updatedRecord = {\n    ...getBlankRecord(),\n    ...record,\n  };\n  if (recordID) updatedRecord.recordID = recordID;\n  if (user && userID) {\n    updatedRecord.userinfo = { ...user?.userinfo, userID };\n  }\n\n  updatedRecord.contacts = updatedRecord.contacts.map(standardizeContact);\n  return updatedRecord;\n}\n\nexport function loadRegionRecords(regionRecords, statusFilter) {\n  const regionUsers = regionRecords.toJSON();\n  const records = [];\n\n  Object.entries(regionUsers).forEach(([userID, user]) => {\n    if (user.records) {\n      Object.entries(user.records).forEach(([key, record]) => {\n        if (statusFilter.includes(record.status))\n          records.push(\n            standardizeRecord(firebaseToJSObject(record), user, userID, key)\n          );\n      });\n    }\n  });\n\n  return records;\n}\n\nexport async function submitRecord(region, userID, key, status, record) {\n  const recordRef = firebase\n    .database()\n    .ref(region)\n    .child(\"users\")\n    .child(userID)\n    .child(\"records\")\n    .child(key);\n\n  await recordRef.child(\"status\").set(status);\n  if (status === \"published\")\n    await recordRef.child(\"timeFirstPublished\").set(new Date().toISOString());\n\n  if (record && !record.filename) {\n    const filename = getRecordFilename(record);\n    await recordRef.child(\"filename\").set(filename);\n  }\n}\n\nexport function deleteRecord(region, userID, key) {\n  return (\n    firebase\n      .database()\n      .ref(region)\n      .child(\"users\")\n      // this can be any user id\n      .child(userID)\n      .child(\"records\")\n      .child(key)\n      .remove()\n  );\n}\n\nexport async function transferRecord(\n  transferEmail,\n  recordID,\n  sourceUserID,\n  region\n) {\n  const regionUsersRef = firebase.database().ref(region).child(\"users\");\n  const regionUsers = (await regionUsersRef.once(\"value\")).val();\n\n  // get mapping like [[\"sdfssf32fwwfe\",\"sdf@sdef.ca\"]]\n  const userIDToEmailMapping = Object.entries(\n    regionUsers\n  ).map(([userID, userData]) => [userID, userData?.userinfo?.email]);\n\n  const userMatch = userIDToEmailMapping.find(\n    ([, email]) =>\n      email.toLowerCase().trim() === transferEmail.toLowerCase().trim()\n  );\n  if (userMatch) {\n    const [matchingUserID] = userMatch;\n\n    const recordRef = regionUsersRef\n      .child(sourceUserID)\n      .child(\"records\")\n      .child(recordID);\n\n    const record = (await recordRef.once(\"value\")).val();\n\n    const newRecordRef = await regionUsersRef\n      .child(matchingUserID)\n      .child(\"records\")\n      .push(record);\n    const newRecordID = newRecordRef.key;\n\n    record.recordID = newRecordID;\n    newRecordRef.update(record);\n    if (newRecordID) {\n      await recordRef.remove();\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function returnRecordToDraft(region, userID, key) {\n  return firebase\n    .database()\n    .ref(region)\n    .child(\"users\")\n    .child(userID)\n    .child(\"records\")\n    .child(key)\n    .child(\"status\")\n    .set(\"\");\n}\nexport async function getRegionProjects(region) {\n  const projects = Object.values(\n    (\n      await firebase.database().ref(region).child(\"projects\").once(\"value\")\n    ).toJSON() || {}\n  );\n  return projects;\n}\n\n// runs firebaseToJSObject on each child object\nexport const multipleFirebaseToJSObject = (multiple) => {\n  return Object.entries(multiple || {}).reduce((acc, [key, record]) => {\n    acc[key] = standardizeRecord(firebaseToJSObject(deepCopy(record)));\n    return acc;\n  }, {});\n};\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Modal from \"@material-ui/core/Modal\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nfunction rand() {\n  return Math.round(Math.random() * 20) - 10;\n}\n\nfunction getModalStyle() {\n  const top = 50 + rand();\n  const left = 50 + rand();\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: \"absolute\",\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nexport default function SimpleModal({\n  open,\n  onClose,\n  onAccept,\n  modalQuestion,\n}) {\n  const classes = useStyles();\n  // getModalStyle is not a pure function, we roll the style only on the first render\n  const [modalStyle] = React.useState(getModalStyle);\n\n  return (\n    <div>\n      <Modal\n        open={open}\n        onClose={onClose}\n        aria-labelledby=\"simple-modal-title\"\n        aria-describedby=\"simple-modal-description\"\n        onKeyPress={(e) => {\n          if (e.key === \"y\") {\n            onClose();\n            onAccept();\n          }\n        }}\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <h2 id=\"simple-modal-title\">\n            {modalQuestion || (\n              <I18n>\n                <En>Are you sure?</En>\n                <Fr>Vous tes sr ?</Fr>\n              </I18n>\n            )}\n          </h2>\n          <button\n            type=\"button\"\n            onClick={() => {\n              onClose();\n              onAccept();\n            }}\n          >\n            <I18n>\n              <En>Yes</En>\n              <Fr>Oui</Fr>\n            </I18n>\n          </button>\n          <button type=\"button\" onClick={onClose}>\n            <I18n>\n              <En>No</En>\n              <Fr>Non</Fr>\n            </I18n>\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport Cite from \"citation-js\";\n\nexport function generateCitation(record, language, format) {\n  const {\n    title,\n    datasetIdentifier = \"\",\n    created,\n    contacts = [],\n    datePublished,\n  } = record;\n\n  const publishers = contacts\n    .filter(\n      (contact) =>\n        // citation-js crashes sometimes with single letter input for a name\n        contact.inCitation && contact.role.includes(\"publisher\")\n    )\n    .map((contact) => contact.orgName);\n\n  const cslJSON = [\n    {\n      title: title[language],\n\n      author: contacts\n        // if only publisher is checked, it just appears in publisher section\n        .filter(\n          (contact) =>\n            !(contact.role.includes(\"publisher\") && contact.role.length === 1)\n        )\n        .filter(\n          (contact) =>\n            // citation-js crashes sometimes with single letter input for a name\n            contact.inCitation &&\n            ((contact.givenNames?.length > 1 && contact.lastName?.length > 1) ||\n              contact.orgName?.length > 1)\n        )\n\n        .map((contact) => {\n          if (contact.givenNames?.length > 1 && contact.lastName?.length > 1)\n            return {\n              given: contact.givenNames,\n              family: contact.lastName,\n            };\n          // seems that only individuals gets cited? Wasnt sure how to get organization name in there\n          return { family: contact.orgName };\n        }),\n      issued: { \"date-parts\": [[datePublished || created]] },\n      publisher: publishers.join(\", \"),\n      DOI: datasetIdentifier.replace(/https?:\\/\\/doi\\.org\\//, \"\"),\n      version: `v${record.edition}`,\n    },\n  ];\n\n  try {\n    const data = Cite(cslJSON);\n\n    const res = data.format(\"bibliography\", {\n      format,\n      template: \"apa\",\n      lang: \"en-US\",\n    });\n    return res;\n  } catch (e) {\n    // This is needed because sometimes partly filled names, eg \"Ma\" cause it to crash\n    return \"\";\n  }\n}\nexport function ApaPreview({ record, language }) {\n  const citation = generateCitation(record, language, \"html\");\n\n  return (\n    <div>\n      <div\n        // eslint-disable-next-line react/no-danger\n        dangerouslySetInnerHTML={{ __html: citation }}\n        style={{ padding: \"5px\" }}\n      />\n    </div>\n  );\n}\n","import templatePath from \"./emlTemplate.j2\";\nimport { generateCitation } from \"../components/FormComponents/ApaPreview\";\n\nconst nunjucks = require(\"nunjucks\");\n\n// get the full goos eov name here\n// function translateEOV() {}\nfunction arrayOverlap(a, b) {\n  return a.some((e) => b.includes(e));\n}\n\nfunction translateRole(isoRoles) {\n  console.log(isoRoles);\n  return isoRoles;\n}\nconst roleMapping = {\n  creator: [\"author\", \"originator\"],\n  metadataProvider: [\"distributor\", \"custodian\"],\n  associatedParty: [\"principalInvestigator\", \"editor\"],\n};\nasync function recordToEML(record) {\n  nunjucks.configure({ autoescape: true, web: true });\n\n  const templateXML = await fetch(templatePath).then((t) => t.text());\n\n  return nunjucks.renderString(templateXML, {\n    record,\n    translateRole,\n    arrayOverlap,\n    citation: generateCitation(record, record.language, \"text\"),\n    roleMapping,\n    roleMappingKeys: Object.keys(roleMapping),\n  });\n}\n\nexport default recordToEML;\n","const licenses = {\n    \"CC-BY-4.0\": {\n        \"title\": {\n            \"en\": \"Creative Commons Attribution 4.0 Attribution\"\n        },\n        \"url\": \"https://creativecommons.org/licenses/by/4.0\",\n        \"code\": \"CC-BY-4.0\"\n    },\n    \"CC-BY-SA-4.0\": {\n        \"title\": {\n            \"en\": \"Creative Commons Attribution 4.0 Attribution-ShareAlike\"\n        },\n        \"url\": \"https://creativecommons.org/licenses/by-sa/4.0/\",\n        \"code\": \"CC-BY-SA-4.0\"\n    },\n    \"CC-BY-ND-4.0\": {\n        \"title\": {\n            \"en\": \"Creative Commons Attribution 4.0 Attribution-NoDerivs \"\n        },\n        \"url\": \"https://creativecommons.org/licenses/by-nd/4.0/\",\n        \"code\": \"CC-BY-ND-4.0\"\n    },\n    \"CC-BY-NC-4.0\": {\n        \"title\": {\n            \"en\": \"Creative Commons Attribution 4.0 Attribution-NonCommercial  \"\n        },\n        \"url\": \"https://creativecommons.org/licenses/by-nc/4.0/\",\n        \"code\": \"CC-BY-NC-4.0\"\n    },\n    \"CC-BY-NC-SA-4.0\": {\n        \"title\": {\n            \"en\": \"Creative Commons Attribution 4.0 Attribution-NonCommercial-ShareAlike \"\n        },\n        \"url\": \"https://creativecommons.org/licenses/by-nc-sa/4.0/\",\n        \"code\": \"CC-BY-NC-SA-4.0\"\n    },\n    \"CC-BY-NC-ND-4.0\": {\n        \"title\": {\n            \"en\": \"Creative Commons Attribution 4.0 Attribution-NonCommercial-NoDerivs\"\n        },\n        \"url\": \"https://creativecommons.org/licenses/by-nc-nd/4.0/\",\n        \"code\": \"CC-BY-NC-ND-4.0\"\n    },\n    \"CC0\": {\n        \"title\": {\n            \"en\": \"Creative Commons 0\"\n        },\n        \"url\": \"https://creativecommons.org/share-your-work/public-domain/cc0\",\n        \"code\": \"CC0\"\n    },\n    \"government-open-license-canada\": {\n        \"title\": {\n            \"en\": \"Open Government Licence - Canada\",\n            \"fr\": \"Licence du gouvernement ouvert  Canada \"\n        },\n        \"url\": \"https://open.canada.ca/en/open-government-licence-canada\",\n        \"code\": \"government-open-license-canada\"\n    },\n    \"government-open-license-nova-scotia\": {\n        \"title\": {\n            \"en\": \"Open Government Licence - Nova Scotia\"\n        },\n        \"url\": \"https://novascotia.ca/opendata/licence.asp\",\n        \"code\": \"government-open-license-nova-scotia\"\n    },\n    \"OGL-NB\": {\n        \"title\": {\n            \"en\": \"Open Government Licence  New Brunswick\"\n        },\n        \"url\": \"http://www.snb.ca/e/2000/data-E.html\",\n        \"code\": \"OGL-NB\"\n    },\n    \"OGL-BC\": {\n        \"title\": {\n            \"en\": \"Open Government Licence - British Columbia\"\n        },\n        \"url\": \"https://www2.gov.bc.ca/gov/content/data/open-data/open-government-licence-bc\",\n        \"code\": \"OGL-BC\"\n    },\n    \"government-open-license-newfoundland\": {\n        \"title\": {\n            \"en\": \"Open Government Licence - Newfoundland and Labrador\"\n        },\n        \"url\": \"https://opendata.gov.nl.ca/public/opendata/page/?page-id=licence\",\n        \"code\": \"government-open-license-newfoundland\"\n    },\n    \"Apache-2.0\": {\n        \"title\": {\n            \"en\": \"Apache License, Version 2.0\"\n        },\n        \"url\": \"https://www.apache.org/licenses/LICENSE-2.0\",\n        \"code\": \"Apache-2.0\"\n    },\n    \"No License\": {\n        \"title\": {\n            \"en\": \"No License\",\n            \"fr\": \"Aucune licence\"\n        },\n        \"url\": \"https://choosealicense.com/no-permission/\",\n        \"code\": \"None\"\n    },\n    \"ca-eccc-odl\": {\n        \"title\": {\n            \"en\": \"Environment and Climate Change Canada Data Servers End-use Licence\",\n            \"fr\": \"Licence dutilisation finale pour les serveurs de donnes dEnvironnement et Changement climatique Canada\"\n        },\n        \"url\": \"https://eccc-msc.github.io/open-data/licence/readme_en/\",\n        \"code\": \"ca-eccc-odl\"\n    }\n};\n\nexport default licenses;\n","import xmlescape from \"xml-escape\";\nimport licenses from \"./licenses\";\nimport { getRecordFilename } from \"./misc\";\nimport { generateCitation } from \"../components/FormComponents/ApaPreview\";\n\nfunction isoStrToDate(isoStr) {\n  return isoStr.slice(0, 10);\n}\nfunction arrayOverlap(a, b) {\n  return a.some((e) => b.includes(e));\n}\n\nfunction recordToERDDAP(record) {\n  const { contacts, language: lang } = record;\n\n  // if there are multiple publishers or creators, this takes first one\n  const publisher = contacts.find((c) =>\n    arrayOverlap(c.role, [\"publisher\", \"custodian\"])\n  );\n  const creator = contacts.find((c) =>\n    arrayOverlap(c.role, [\"orginator\", \"owner\"])\n  );\n\n  const attributes = {\n    citation: generateCitation(record, record.language, \"text\"),\n    creator_email: creator?.indEmail,\n    creator_name: creator?.indName,\n    creator_url: creator?.orgURL,\n    creator_institution: creator?.orgName,\n    // creator_type:\n\n    publisher_email: publisher?.indEmail,\n    publisher_institution: publisher?.orgName,\n    publisher_url: publisher?.orgURL,\n    publisher_name: publisher?.indName,\n    // publisher_type:\n\n    date_created: isoStrToDate(record.created),\n    // date_issued:\n    // date_metadata_modified:\n\n    geospatial_lat_max: record.map?.north,\n    geospatial_lat_min: record.map?.south,\n    geospatial_lon_max: record.map?.east,\n    geospatial_lon_min: record.map?.west,\n    geospatial_vertical_min: record.verticalExtentMin,\n    geospatial_vertical_max: record.verticalExtentMax,\n    institution: contacts\n      .map((c) => c.orgName)\n      .filter((e) => e)\n      .join(),\n    project: record.projects?.join(),\n    product_version: record.edition,\n    license: licenses[record.license]?.url || record.license,\n    instrument: record.instruments\n      .map((i) => [i.manufacturer, i.id, i.version].join(\" - \"))\n      .filter((e) => e)\n      .join(),\n    id: record.identifier,\n    naming_authority: \"ca.cioos\",\n    references: `https://doi.org/${record.datasetIdentifier}`,\n    keywords: record.keywords[lang],\n    platform: record.platform,\n    platform_vocabulary:\n      record.platform && \"http://vocab.nerc.ac.uk/collection/L06/current/\",\n    summary: record.abstract[lang],\n    title: record.title[lang],\n  };\n  const attributesStr = Object.entries(attributes)\n    .filter(([, v]) => v)\n    .map(([k, v]) => `  <att name=\"${k}\">${xmlescape(String(v))}</att>`)\n    .join(\"\\n\");\n\n  return `\n<iso19115File>/your/waf/${\n    record.filename || getRecordFilename(record)\n  }.xml</iso19115File>\n<addAttributes>\n${attributesStr}\n</addAttributes>`;\n}\n\nexport default recordToERDDAP;\n","import licenses from \"./licenses\";\nimport regions from \"../regions\";\n\n\nfunction recordToDataCite(metadata, language, region) {\n\n    // Reduce contacts to a list of creators\n    const creators = metadata.contacts ? metadata.contacts.reduce((creatorList, contact) => {\n      let creator;\n  \n      if (contact.inCitation && !contact.role.includes(\"publisher\")) {\n        const {\n          givenNames,\n          lastName,\n          orgName,\n          indOrcid,\n          orgRor,\n        } = contact;\n        \n        // Create an individual creator object with names\n        if (givenNames) {\n          creator = {\n            name: `${lastName}, ${givenNames}`,\n            nameType: \"Personal\",\n            givenName: givenNames,\n            familyName: lastName,\n            // Add affiliation for individual if organization details are provided\n            affiliation: orgName ? [{\n              name: orgName,\n              schemeUri: \"https://ror.org\",\n              affiliationIdentifier: orgRor,\n              affiliationIdentifierScheme: \"ROR\",\n            }] : [],\n          };\n\n          // Add nameIdentifiers for individual with an ORCID\n          if (indOrcid) {\n            creator.nameIdentifiers = [\n                {\n                  schemeUri: \"https://orcid.org\",\n                  nameIdentifier: indOrcid,\n                  nameIdentifierScheme: \"ORCID\",\n                },\n              ];\n            }\n          }\n        }\n      \n      // Add the creator to the list if it exists\n      if (creator) {\n        creatorList.push(creator);\n      }\n  \n      return creatorList;\n    }, []) : [];\n  \n    // Find the publisher contact\n    const publisher = metadata.contacts.find((contact) =>\n      contact.role.includes(\"publisher\")\n    );\n\n    // Filter all contacts with the role of 'funder'\n    const funders = metadata.contacts.filter((contact) => \n      contact.role.includes(\"funder\")\n    );\n  \n    // Get the publication year from the datePublished field\n    let publicationYear;\n    if (metadata.datePublished) {\n      const year = parseInt(metadata.datePublished.slice(0, 4), 10)\n      publicationYear = Number.isNaN(year) ? undefined : year;\n    } else {\n      publicationYear = undefined;\n    }\n  \n    // Create the DataCite subjects from the keywords field\n    const subjects = metadata.keywords\n      ? Object.entries(metadata.keywords).flatMap(([lang, keywords]) =>\n          keywords.map((keyword) => ({\n            lang,\n            subject: keyword,\n          }))\n        )\n      : undefined;\n  \n    // Create the DataCite dates from the date fields\n    const dates = [];\n  \n    if (metadata.dateStart) {\n      dates.push({\n        date: metadata.dateStart,\n        dateType: \"Collected\",\n        dateInformation: \"Start date when data was first collected\",\n      });\n    }\n  \n    if (metadata.dateEnd) {\n      dates.push({\n        date: metadata.dateEnd,\n        dateType: \"Collected\",\n        dateInformation: \"End date when data was last collected\",\n      });\n    }\n  \n    if (metadata.dateRevised) {\n      dates.push({\n        date: metadata.dateRevised,\n        dateType: \"Updated\",\n        dateInformation: \"Date when the data was last revised\",\n      });\n    }\n\n    // Look up the license information\n    const licenseInfo = licenses[metadata.license];\n  \n    // Create the DataCite rightsList object\n    const rightsList = licenseInfo && licenseInfo.title ? [\n      {\n        rights: licenseInfo.title.en,\n        rightsUri: licenseInfo.url,\n        schemeUri: \"https://spdx.org/licenses/\",\n        rightsIdentifier: licenseInfo.code,\n        rightsIdentifierScheme: \"SPDX\",\n      },\n    ] : [];\n  \n    // Extract the values from the map field\n    let { east, north, south, west } = metadata.map ? metadata.map : {};\n\n    east = Number.isNaN(east) ? undefined : east;\n    north = Number.isNaN(north) ? undefined : north;\n    south = Number.isNaN(south) ? undefined : south;\n    west = Number.isNaN(west) ? undefined : west;   \n  \n    // Create the DataCite geoLocations object\n    const geoLocations = metadata.map && east && north && south && west ? [\n      {\n        geoLocationBox: {\n          eastBoundLongitude: parseFloat(east),\n          northBoundLatitude: parseFloat(north),\n          southBoundLatitude: parseFloat(south),\n          westBoundLongitude: parseFloat(west),\n        },\n      },\n    ] : [];\n  \n    // Create the mapped DataCite object with the extracted information\n    const mappedDataCiteObject = {\n      data: {\n        type: \"dois\",\n        attributes: {\n          prefix: regions[region].datacitePrefix,\n          creators,\n          // Initialize an empty array for titles\n          titles: [],\n        },\n      },\n    };\n\n    // Add English title if it exists\n    if (metadata.title.en) {\n      mappedDataCiteObject.data.attributes.titles.push({\n        lang: \"en\",\n        title: metadata.title.en,\n      });\n    }\n\n    // Add French title if it exists\n    if (metadata.title.fr) {\n      mappedDataCiteObject.data.attributes.titles.push({\n        lang: \"fr\",\n        title: metadata.title.fr,\n      });\n    }\n\n    // Add publisher if it exists\n    if (publisher) {\n      mappedDataCiteObject.data.attributes.publisher = \n        publisher.orgName || publisher.indName;\n    }\n\n    // Add funders list if it exists\n    if (funders && funders.length > 0) {\n      mappedDataCiteObject.data.attributes.fundingReferences = funders.map(funder => {\n        const fundingReference = {\n          funderName: funder.orgName,\n        };\n\n        // Add ROR information if available\n        if (funder.orgRor) {\n          fundingReference.funderIdentifier = funder.orgRor;\n          fundingReference.funderIdentifierType = \"ROR\";\n        }\n\n        return fundingReference;\n      });\n    }    \n\n    // Add publication year if it exists\n    if (metadata.datePublished) {\n      mappedDataCiteObject.data.attributes.publicationYear = publicationYear;\n    }\n\n    // Add subjects if they exist\n    if (metadata.keywords) {\n      mappedDataCiteObject.data.attributes.subjects = subjects;\n    }\n\n    // add Version if it exists\n    if (metadata.edition) {\n      mappedDataCiteObject.data.attributes.version = metadata.edition;\n    }\n  \n\n    // Add dates if they exist\n    if (dates.length > 0) {\n      mappedDataCiteObject.data.attributes.dates = dates;\n    }\n\n    // Add rightsList\n    mappedDataCiteObject.data.attributes.rightsList = rightsList;\n\n    // Add descriptions from the abstract field\n    mappedDataCiteObject.data.attributes.descriptions = Object.entries(\n      metadata.abstract\n    ).map(([lang, description]) => ({\n      lang,\n      description,\n      descriptionType: \"Abstract\",\n    }));\n\n    // Add geolocations if they exist\n    if (metadata.map) {\n      mappedDataCiteObject.data.attributes.geoLocations = geoLocations;\n    }\n\n    // Auto-populate Datacite Resource type general  as 'dataset'\n    mappedDataCiteObject.data.attributes.types = {\n      resourceTypeGeneral: \"Dataset\",\n    };\n\n    // Generate URL element\n    mappedDataCiteObject.data.attributes.url = `${regions[region].catalogueURL[language]}dataset/ca-cioos_${metadata.identifier}`;\n\n    return mappedDataCiteObject;\n  }\n\n  export default recordToDataCite;","import validator from \"validator\";\n\nexport const validateEmail = (email) => !email || validator.isEmail(email);\nexport const validateURL = (url) => !url || validator.isURL(url);\n\n// See https://stackoverflow.com/a/48524047/7416701\nexport const doiRegexp = /^(https:\\/\\/doi.org\\/)?10\\.\\d{4,9}\\/[-._;()/:A-Z0-9]+$/i;\nfunction isValidHttpUrl(string) {\n  let url;\n\n  try {\n    url = new URL(string);\n  } catch (_) {\n    return false;\n  }\n\n  return url.protocol === \"http:\" || url.protocol === \"https:\";\n}\nexport const validateDOI = (val) => !val || (doiRegexp.test(val) && isValidHttpUrl(val));\nconst validateLatitude = (num) => num >= -90 && num <= 90;\n\nconst deepCompare = (obj1, obj2) =>\n  JSON.parse(JSON.stringify(obj1) === JSON.stringify(obj2));\n\nconst validateLongitude = (num) => num >= -360 && num <= 360;\n\nconst polygonIsValid = (polygon) => {\n  // eg 48,-128 56,-133 56,-147 48,-128\n  const coordinates = polygon.split(\" \").map((c) => c.split(\",\"));\n  if (coordinates.length < 2) return false;\n  if (!deepCompare(coordinates[0], coordinates[coordinates.length - 1]))\n    return false;\n\n  return (\n    coordinates.filter(\n      ([lat, lon]) =>\n        validateLongitude(parseFloat(lon)) && validateLatitude(parseFloat(lat))\n    ).length === coordinates.length\n  );\n};\n\nconst contactIsFilled = (contact) =>\n  Boolean(\n    contact.role &&\n      contact.role.length &&\n      (contact.orgName || contact.givenNames || contact.lastName)\n  );\n\n// required fields and  a function to validate each\nconst validators = {\n  title: {\n    validation: (val) => val && val.en && val.fr,\n    tab: \"dataID\",\n    error: {\n      en: \"Missing title in French or English\",\n      fr: \"Titre manquant en franais ou en anglais\",\n    },\n  },\n  abstract: {\n    validation: (val) => val && val.en && val.fr,\n    tab: \"dataID\",\n    error: {\n      en: \"Missing abstract in French or English\",\n      fr: \"Abrg manquant en franais ou en anglais\",\n    },\n  },\n  keywords: {\n    validation: (val) => val && (val.en.length || val.fr.length),\n    tab: \"dataID\",\n    error: {\n      en: \"At least one keyword is required\",\n      fr: \"Au moins un mot cl est requis\",\n    },\n  },\n  eov: {\n    validation: (val) => val && val.length,\n    tab: \"dataID\",\n    error: {\n      en: \"At least one EOV is required\",\n      fr: \"Au moins un variable essentielle ocanique est requise\",\n    },\n  },\n  datasetIdentifier: {\n    validation: validateDOI,\n    optional: true,\n    tab: \"dataID\",\n    error: {\n      en: \"Invalid DOI\",\n      fr: \"DOI non valide\",\n    },\n  },\n  progress: {\n    tab: \"dataID\",\n    validation: (val) => val,\n    error: {\n      en: \"Please select a dataset status\",\n      fr: \"L'information spatiale est manquante\",\n    },\n  },\n  language: {\n    tab: \"dataID\",\n    validation: (val) => val,\n    error: {\n      en: \"Language field is missing\",\n      fr: \"Le champ de langue est vide\",\n    },\n  },\n  license: {\n    tab: \"dataID\",\n    validation: (val) => val,\n    error: {\n      en: \"Please select a license for the dataset\",\n      fr: \"Veuillez slectionner une licence pour le jeu de donnes\",\n    },\n  },\n  map: {\n    error: {\n      en: \"Spatial information is missing\",\n      fr: \"L'information gographique est manquante\",\n    },\n    tab: \"spatial\",\n    validation: (val) => {\n      if (!val) return false;\n      const north = parseFloat(val.north);\n      const south = parseFloat(val.south);\n      const east = parseFloat(val.east);\n      const west = parseFloat(val.west);\n      const { polygon } = val;\n\n      return (\n        (north &&\n          south &&\n          east &&\n          west &&\n          north >= south &&\n          east >= west &&\n          validateLatitude(north) &&\n          validateLatitude(south) &&\n          validateLongitude(east) &&\n          validateLongitude(west)) ||\n        (polygon && polygonIsValid(polygon))\n      );\n    },\n  },\n\n  verticalExtentMin: {\n    tab: \"spatial\",\n\n    validation: (val) => val,\n    error: {\n      en: \"Missing Vertical Extent Min\",\n      fr: \"tendue verticale manquante Min\",\n    },\n  },\n  verticalExtentMax: {\n    tab: \"spatial\",\n    validation: (val) => val,\n    error: {\n      en: \"Missing Vertical Extent Max\",\n      fr: \"tendue verticale manquante Max\",\n    },\n  },\n  verticalExtentDirection: {\n    tab: \"spatial\",\n    validation: (val) => val,\n    error: {\n      en: \"Missing Vertical Extent Direction\",\n      fr: \"Direction de l'tendue verticale manquante\",\n    },\n  },\n  // at least one contact has to have a role and a org or individual name\n  // at least one contact has to appear in citation\n  contacts: {\n    tab: \"contacts\",\n    validation: (val) =>\n      val &&\n      // every contact must have a role and name\n      val.every(contactIsFilled) &&\n      val.every(\n        (contact) =>\n          validateEmail(contact.indEmail) &&\n          validateEmail(contact.orgEmail) &&\n          validateURL(contact.orgURL)\n      ) &&\n      val\n        .filter(contactIsFilled)\n        .find((contact) => contact.role.includes(\"custodian\")) &&\n      val\n        .filter(contactIsFilled)\n        .find((contact) => contact.role.includes(\"owner\")) &&\n      val.filter(contactIsFilled).find((contact) => contact.inCitation),\n    error: {\n      en:\n        \"Every contact must have at least one role checked, and  'Data contact' or 'Metadata contact' must be added to at least one contact. Email addresses must be in the form of user@example.com and URLs must be valid.  At least one contact must be selected to appear in the citation.\",\n      fr:\n        \"Assurez-vous que chaque contact a un rle qui lui est attribu. Assurez-vous galement d'avoir une personne ressource pour les mtadonnes et un personne ressource pour les donnes. Les adresses e-mail doivent tre sous la forme de user@example.com et les URL doivent tre valides. Au moins un contact doit tre slectionn pour apparatre dans la citation\",\n    },\n  },\n  distribution: {\n    tab: \"resources\",\n    validation: (val) =>\n      Array.isArray(val) &&\n      val.filter((dist) => dist.name && dist.url && validator.isURL(dist.url))\n        .length,\n\n    error: {\n      en:\n        \"Must have at least one resource. If a URL is included it must be valid.\",\n      fr:\n        \"Doit avoir au moins une ressource. Vrifiez si votre URL est valide.\",\n    },\n  },\n  platformID: {\n    tab: \"platform\",\n    validation: (val, record) => record.noPlatform || val,\n    error: {\n      en: \"Missing platform ID\",\n      fr: \"ID de la plateforme manquant\",\n    },\n  },\n  platform: {\n    tab: \"platform\",\n    validation: (val, record) => record.noPlatform || val,\n    error: {\n      en: \"Missing platform type\",\n      fr: \"Type de plateforme manquant\",\n    },\n  },\n  instruments: {\n    tab: \"platformInstruments\",\n    validation: (val) => val.every((instrument) => instrument.id),\n    error: {\n      en: \"Instrument ID is required\",\n      fr: \"L'identifiant de l'instrument est requis\",\n    },\n  },\n};\nexport const validateField = (record, fieldName) => {\n  const valueToValidate = record[fieldName];\n  // if no validator funciton exists, then it is not a required field\n  const validationFunction =\n    (validators[fieldName] && validators[fieldName].validation) || (() => true);\n\n  return validationFunction && validationFunction(valueToValidate, record);\n};\n\nexport const getErrorsByTab = (record) => {\n  const fields = Object.keys(validators);\n  const invalidFields = fields.filter((field) => !validateField(record, field));\n  const fieldErrorInfo = invalidFields.map((field) => {\n    const { error, tab } = validators[field];\n    return { error, tab };\n  });\n\n  return fieldErrorInfo.reduce((acc, { error, tab }) => {\n    if (!acc[tab]) acc[tab] = [];\n    acc[tab].push(error);\n    return acc;\n  }, {});\n};\n\nexport const percentValid = (record) => {\n  const fields = Object.keys(validators);\n  const numTotalRequired = fields.filter((field) => !validators[field].optional)\n    .length;\n\n  const validFieldsRequired = fields.filter(\n    (field) => !validators[field].optional && validateField(record, field)\n  );\n  const numValidRequired = validFieldsRequired.length;\n\n  return numValidRequired / numTotalRequired;\n};\nexport const recordIsValid = (record) => {\n  const optionalFieldsAreValid = Object.entries(validators)\n    .filter(([, validatorObject]) => validatorObject.optional)\n    .every(([field]) => validateField(record, field));\n\n  return percentValid(record) === 1 && optionalFieldsAreValid;\n};\n","import React from \"react\";\nimport TimeAgo from \"javascript-time-ago\";\nimport { useParams } from \"react-router-dom\";\n\nimport en from \"javascript-time-ago/locale/en\";\nimport fr from \"javascript-time-ago/locale/fr\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nconst LastEdited = ({ dateStr }) => {\n  const { language } = useParams();\n\n  if (!dateStr) return null;\n\n  let timeAgo;\n\n  if (language === \"en\") {\n    TimeAgo.addLocale(en);\n    timeAgo = new TimeAgo(\"en-US\");\n  } else {\n    TimeAgo.addLocale(fr);\n    timeAgo = new TimeAgo(\"fr-FR\");\n  }\n\n  return (\n    <span>\n      <I18n>\n        <En>Last edited</En>\n        <Fr>Dernire modification</Fr>\n      </I18n>{\" \"}\n      {timeAgo.format(new Date(dateStr))}\n      {\". \"}\n    </span>\n  );\n};\n\nexport default LastEdited;\n","import React from \"react\";\nimport { Description, AssignmentTurnedIn, Drafts } from \"@material-ui/icons\";\nimport { Tooltip } from \"@material-ui/core\";\nimport { I18n } from \"../I18n\";\n\nconst RecordStatusIcon = ({ status }) => {\n  if (status === \"published\")\n    return (\n      <Tooltip title={<I18n en=\"Published\" fr=\"Publi\" />}>\n        <AssignmentTurnedIn color=\"primary\" />\n      </Tooltip>\n    );\n  if (status === \"submitted\")\n    return (\n      <Tooltip title={<I18n en=\"Submitted\" fr=\"Soumis\" />}>\n        <Description color=\"secondary\" />\n      </Tooltip>\n    );\n  if (status === \"\")\n    return (\n      <Tooltip title={<I18n en=\"Draft\" fr=\"Brouillon\" />}>\n        <Drafts color=\"action\" />\n      </Tooltip>\n    );\n  return null;\n};\nexport default RecordStatusIcon;\n","import React, { useContext, useState } from \"react\";\nimport FileSaver from \"file-saver\";\n\nimport {\n  ListItem,\n  ListItemText,\n  Avatar,\n  ListItemAvatar,\n  Tooltip,\n  ListItemSecondaryAction,\n  IconButton,\n  CircularProgress,\n  MenuItem,\n  Menu,\n} from \"@material-ui/core\";\nimport {\n  FileCopy,\n  Delete,\n  Publish,\n  Eject,\n  Visibility,\n  CloudDownload,\n  TransferWithinAStation,\n  OpenInNew,\n  Edit,\n} from \"@material-ui/icons\";\nimport { useParams } from \"react-router-dom\";\nimport { getRecordFilename } from \"../../utils/misc\";\nimport recordToEML from \"../../utils/recordToEML\";\nimport recordToERDDAP from \"../../utils/recordToERDDAP\";\nimport recordToDataCite from \"../../utils/recordToDataCite\";\nimport { recordIsValid, percentValid } from \"../../utils/validate\";\nimport { I18n, En, Fr } from \"../I18n\";\nimport LastEdited from \"./LastEdited\";\nimport RecordStatusIcon from \"./RecordStatusIcon\";\nimport { UserContext } from \"../../providers/UserProvider\";\nimport regions from \"../../regions\";\n\nconst MetadataRecordListItem = ({\n  record,\n  onViewEditClick,\n  onDeleteClick,\n  onCloneClick,\n  onSubmitClick,\n  showAuthor,\n  showDeleteAction,\n  showSubmitAction,\n  showPublishAction,\n  showUnPublishAction,\n  showUnSubmitAction,\n  showViewAction,\n  showEditAction,\n  showPercentComplete,\n  showCloneAction,\n  onUnSubmitClick,\n  onUnPublishClick,\n  showDownloadButton = true,\n  showTransferButton,\n  onTransferClick,\n}) => {\n  const { language, region } = useParams();\n  const showCatalogueURL = record.status === \"published\";\n  const { downloadRecord } = useContext(UserContext);\n  const [isLoading, setIsLoading] = useState({ downloadXML: false });\n  const catalogueURL = `${regions[region].catalogueURL[language]}dataset/ca-cioos_${record.identifier}`;\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  if (!record.title) {\n    // eslint-disable-next-line no-console\n    console.log(record);\n    return <></>;\n  }\n\n  const isValidRecord =\n    (showSubmitAction || showDownloadButton) && recordIsValid(record);\n\n  const percentValidInt =\n    showPercentComplete && Math.round(percentValid(record) * 100);\n  async function handleDownloadRecord(fileType) {\n    // filetype is\n    const extensions = {\n      erddap: \"_erddap.txt\",\n      xml: \".xml\",\n      yaml: \".yaml\",\n      eml: \"_eml.xml\",\n      json: \".json\",\n    };\n    setIsLoading({ downloadXML: true });\n\n    try {\n      let data;\n      if (fileType === \"eml\") {\n        const emlStr = await recordToEML(record);\n        data = [emlStr];\n      } else if (fileType === \"erddap\") {\n        data = [recordToERDDAP(record)];\n      } else if (fileType === \"json\") {\n        data = [JSON.stringify(recordToDataCite(record, language, region), null, 2)];\n      } else {\n        const res = await downloadRecord({ record, fileType });\n        data = Object.values(res.data.message);\n      }\n      const mimeTypes = {\n        xml: \"application/xml\",\n        yaml: \"application/x-yaml\",\n        eml: \"application/xml\",\n        erddap: \"application/xml\",\n        json: \"application/json\",\n      };\n      const blob = new Blob(data, {\n        type: `${mimeTypes[fileType]};charset=utf-8`,\n      });\n\n      FileSaver.saveAs(\n        blob,\n        `${getRecordFilename(record)}${extensions[fileType]}`\n      );\n      setIsLoading({ downloadXML: false });\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.log(e);\n      setIsLoading({ downloadXML: false });\n    }\n  }\n\n  return (\n    <ListItem key={record.recordID}>\n      <ListItemAvatar>\n        <IconButton onClick={onViewEditClick}>\n          <Avatar>\n            <RecordStatusIcon status={record.status} />\n          </Avatar>\n        </IconButton>\n      </ListItemAvatar>\n      <ListItemText\n        primary={<div style={{ width: \"80%\" }}>{record.title?.[language]}</div>}\n        secondaryTypographyProps={{ variant: \"body2\" }}\n        secondary={\n          <span>\n            {showAuthor && (\n              <span>\n                <I18n en=\"Author\" fr=\"Auteur\" />: {record.userinfo?.displayName}{\" \"}\n                {record.userinfo?.email}\n              </span>\n            )}\n\n            <span style={{ display: \"block\" }}>\n              <LastEdited dateStr={record.created} />\n\n              {showPercentComplete && (\n                <I18n>\n                  <En>{percentValidInt}% complete</En>\n                  <Fr>{percentValidInt}% Acheve</Fr>\n                </I18n>\n              )}\n            </span>\n\n            <span style={{ display: \"block\" }}>UUID: {record.identifier}</span>\n          </span>\n        }\n      />\n      <ListItemSecondaryAction>\n        {showViewAction && (\n          <Tooltip title={<I18n en=\"View\" fr=\"Vue\" />}>\n            <span>\n              <IconButton\n                onClick={onViewEditClick}\n                edge=\"end\"\n                aria-label=\"view record\"\n              >\n                <Visibility />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n        {showEditAction && (\n          <Tooltip\n            title={<I18n en=\"Edit record\" fr=\"diter un enregistrement\" />}\n          >\n            <span>\n              <IconButton\n                onClick={onViewEditClick}\n                edge=\"end\"\n                aria-label=\"Edit record\"\n              >\n                <Edit />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n\n        {showDeleteAction && (\n          <Tooltip title={<I18n en=\"Delete\" fr=\"Supprimer\" />}>\n            <span>\n              <IconButton\n                onClick={onDeleteClick}\n                edge=\"end\"\n                aria-label=\"delete\"\n              >\n                <Delete />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n        {showPublishAction && (\n          <Tooltip title={<I18n en=\"Publish\" fr=\"Publier\" />}>\n            <span>\n              <IconButton\n                onClick={onSubmitClick}\n                edge=\"end\"\n                aria-label=\"delete\"\n              >\n                <Publish />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n        {showSubmitAction &&\n          (record.status === \"\" ? (\n            <Tooltip\n              title={\n                <>\n                  {isValidRecord ? (\n                    <I18n en=\"Submit for review\" fr=\"Soumettre pour examen\" />\n                  ) : (\n                    <I18n\n                      en=\"Can't submit incomplete or invalid record\"\n                      fr=\"Impossible de soumettre un enregistrement incomplet ou non valide\"\n                    />\n                  )}\n                </>\n              }\n            >\n              <span>\n                <IconButton\n                  onClick={onSubmitClick}\n                  edge=\"end\"\n                  aria-label=\"submit\"\n                  disabled={!isValidRecord}\n                >\n                  <Publish />\n                </IconButton>\n              </span>\n            </Tooltip>\n          ) : (\n            <Tooltip\n              title={\n                <I18n\n                  en=\"Return record to draft for editing\"\n                  fr=\"Retourner l'enregistrement au brouillon pour modification\"\n                />\n              }\n            >\n              <span>\n                <IconButton\n                  onClick={onSubmitClick}\n                  edge=\"end\"\n                  aria-label=\"delete\"\n                >\n                  <Eject />\n                </IconButton>\n              </span>\n            </Tooltip>\n          ))}\n        {showUnPublishAction && (\n          <Tooltip title={<I18n en=\"Un-publish\" fr=\"De-Publier\" />}>\n            <span>\n              <IconButton\n                onClick={onUnPublishClick}\n                edge=\"end\"\n                aria-label=\"delete\"\n              >\n                <Eject />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n        {showCloneAction && (\n          <Tooltip title={<I18n en=\"Clone\" fr=\"Cloner\" />}>\n            <span>\n              <IconButton onClick={onCloneClick} edge=\"end\" aria-label=\"clone\">\n                <FileCopy />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n        {showUnSubmitAction && (\n          <Tooltip\n            title={<I18n en=\"Return to draft\" fr=\"Revenir au brouillon\" />}\n          >\n            <span>\n              <IconButton\n                onClick={onUnSubmitClick}\n                edge=\"end\"\n                aria-label=\"delete\"\n              >\n                <Eject />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n\n        {showDownloadButton && (\n          <Tooltip title={<I18n en=\"Download\" fr=\"Download\" />}>\n            <span>\n              <IconButton\n                aria-label=\"more\"\n                id=\"long-button\"\n                aria-controls=\"long-menu\"\n                aria-expanded={open ? \"true\" : undefined}\n                aria-haspopup=\"true\"\n                onClick={handleClick}\n                disabled={!isValidRecord}\n              >\n                {isLoading.downloadXML ? (\n                  <CircularProgress />\n                ) : (\n                  <CloudDownload />\n                )}\n              </IconButton>\n              <Menu\n                id=\"long-menu\"\n                MenuListProps={{\n                  \"aria-labelledby\": \"long-button\",\n                }}\n                anchorEl={anchorEl}\n                open={open}\n                onClose={handleClose}\n                PaperProps={{\n                  style: {\n                    // maxHeight: ITEM_HEIGHT * 4.5,\n                    width: \"20ch\",\n                  },\n                }}\n              >\n                <MenuItem\n                  key=\"xml\"\n                  onClick={() => {\n                    handleDownloadRecord(\"xml\");\n                    handleClose();\n                  }}\n                >\n                  ISO 19115 XML\n                </MenuItem>\n                <MenuItem\n                  key=\"yaml\"\n                  onClick={() => {\n                    handleDownloadRecord(\"yaml\");\n                    handleClose();\n                  }}\n                >\n                  YAML\n                </MenuItem>\n                <MenuItem\n                  key=\"erddap\"\n                  onClick={() => {\n                    handleDownloadRecord(\"erddap\");\n                    handleClose();\n                  }}\n                >\n                  ERDDAP snippet\n                </MenuItem>\n                <MenuItem\n                  key=\"eml\"\n                  onClick={() => {\n                    handleDownloadRecord(\"eml\");\n                    handleClose();\n                  }}\n                >\n                  EML for OBIS IPT\n                </MenuItem>\n                <MenuItem\n                  key=\"json\"\n                  onClick={() => {\n                    handleDownloadRecord(\"json\");\n                    handleClose();\n                  }}\n                >\n                  DATACITE JSON\n                </MenuItem>\n              </Menu>\n            </span>\n          </Tooltip>\n        )}\n        {showTransferButton && (\n          <Tooltip\n            title={\n              <I18n en=\"Transfer to user\" fr=\"Transfert vers l'utilisateur\" />\n            }\n          >\n            <span>\n              <IconButton\n                onClick={onTransferClick}\n                edge=\"end\"\n                aria-label=\"transfer\"\n              >\n                <TransferWithinAStation />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n\n        <Tooltip\n          title={\n            <I18n\n              en=\"Open catalogue entry in new window\"\n              fr=\"Ouvrir l'entre dans le catalogue dans une nouvelle fentre\"\n            />\n          }\n        >\n          <span>\n            <IconButton\n              disabled={!showCatalogueURL}\n              onClick={() => {\n                const win = window.open(catalogueURL, \"_blank\");\n                win.focus();\n              }}\n              edge=\"end\"\n              aria-label=\"transfer\"\n            >\n              <OpenInNew />\n            </IconButton>\n          </span>\n        </Tooltip>\n      </ListItemSecondaryAction>\n    </ListItem>\n  );\n};\n\nexport default MetadataRecordListItem;\n","import React from \"react\";\n\nimport { Typography, List, CircularProgress, Button } from \"@material-ui/core\";\n\nimport { Add } from \"@material-ui/icons\";\nimport FormClassTemplate from \"./FormClassTemplate\";\n\nimport firebase from \"../../firebase\";\nimport { auth } from \"../../auth\";\n\nimport { Fr, En, I18n } from \"../I18n\";\nimport {\n  multipleFirebaseToJSObject,\n  cloneRecord,\n  deleteRecord,\n  submitRecord,\n  returnRecordToDraft,\n} from \"../../utils/firebaseRecordFunctions\";\nimport SimpleModal from \"../FormComponents/SimpleModal\";\n\nimport regions from \"../../regions\";\n\nimport MetadataRecordListItem from \"../FormComponents/MetadataRecordListItem\";\n\nclass Submissions extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n    this.state = {\n      records: {},\n      deleteModalOpen: false,\n      submitModalOpen: false,\n      withdrawModalOpen: false,\n      modalKey: \"\",\n      modalRecord: null,\n      loading: false,\n    };\n  }\n\n  async loadRecords() {\n    this.setState({ loading: true });\n    const { match } = this.props;\n    const { region } = match.params;\n\n    this.unsubscribe = auth.onAuthStateChanged((user) => {\n      if (user) {\n        const recordsRef = firebase\n          .database()\n          .ref(region)\n          .child(\"users\")\n          .child(user.uid)\n          .child(\"records\");\n\n        recordsRef.on(\"value\", (records) => {\n          const allUsersRecords = records.toJSON();\n\n          this.setState({\n            records: multipleFirebaseToJSObject(allUsersRecords),\n            loading: false,\n          });\n        });\n\n        this.listenerRefs.push(recordsRef);\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    // fixes error Can't perform a React state update on an unmounted component\n    this.unsubscribeAndCloseListeners();\n  }\n\n  unsubscribeAndCloseListeners() {\n    if (this.unsubscribe) this.unsubscribe();\n    if (this.listenerRefs.length) {\n      this.listenerRefs.forEach((ref) => ref.off());\n    }\n  }\n\n  async componentDidMount() {\n    this.loadRecords();\n  }\n\n  editRecord(key) {\n    const { match, history } = this.props;\n    const { language, region } = match.params;\n    const { currentUser } = auth;\n    history.push(`/${language}/${region}/${currentUser.uid}/${key}`);\n  }\n\n  handleSubmitRecord(key) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser && key) {\n      return submitRecord(region, auth.currentUser.uid, key, \"submitted\");\n    }\n    return false;\n  }\n\n  // Make record a draft again\n  withdrawRecord(key) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser && key) {\n      return returnRecordToDraft(region, auth.currentUser.uid, key);\n    }\n    return false;\n  }\n\n  cloneRecord(recordID) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser) {\n      cloneRecord(recordID, auth.currentUser.uid, auth.currentUser.uid, region);\n    }\n  }\n\n  deleteRecord(key) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser) {\n      return deleteRecord(region, auth.currentUser.uid, key);\n    }\n    return false;\n  }\n\n  toggleModal(modalName, state, key = \"\", record = null) {\n    this.setState({ modalKey: key, [modalName]: state, modalRecord: record });\n  }\n\n  render() {\n    const { match, history } = this.props;\n\n    const { language, region } = match.params;\n\n    const {\n      deleteModalOpen,\n      withdrawModalOpen,\n      modalKey,\n      modalRecord,\n      submitModalOpen,\n      records,\n      loading,\n    } = this.state;\n\n    const recordDateSort = (a, b) =>\n      new Date(b[1].created) - new Date(a[1].created);\n\n    return (\n      <div>\n        <SimpleModal\n          open={deleteModalOpen}\n          onClose={() => this.toggleModal(\"deleteModalOpen\", false)}\n          onAccept={() => this.deleteRecord(modalKey)}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        />\n        <SimpleModal\n          open={submitModalOpen}\n          onClose={() => this.toggleModal(\"submitModalOpen\", false)}\n          onAccept={() => this.handleSubmitRecord(modalKey, modalRecord)}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        />\n        <SimpleModal\n          open={withdrawModalOpen}\n          onClose={() => this.toggleModal(\"withdrawModalOpen\", false)}\n          onAccept={() => this.withdrawRecord(modalKey)}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        />\n\n        <Typography variant=\"h5\">\n          <I18n>\n            <En>My Records</En>\n            <Fr>Mes dossiers</Fr>\n          </I18n>\n        </Typography>\n\n        {loading ? (\n          <CircularProgress />\n        ) : (\n          <span>\n            <div>\n              <Typography>\n                <I18n>\n                  <En>\n                    To start a new record, click on \"New Record\" and begin\n                    adding information. To continue working on a record, select\n                    it from the list below. Once your record is completed and\n                    information has been provided for all mandatory fields, you\n                    can submit your record for review by clicking the \"Submit\n                    for review\" icon to the right of your record title. The\n                    record will not be published until it is reviewed and\n                    approved by {regions[region].title[language]} staff.\n                  </En>\n                  <Fr>\n                    Afin de soumettre vos mtadonnes, cliquez sur  Nouvel\n                    enregistrement  et ajoutez-y les informations demandes. Si\n                    vous dsirez reprendre la saisie dun formulaire dj\n                    entam, slectionnez-le dans la liste ci-dessous. Lorsque\n                    les informations sont saisies pour tous les champs\n                    obligatoires, vous pouvez soumettre vos mtadonnes pour\n                    validation en cliquant sur licne  soumettre pour\n                    validation . Vos mtadonnes seront publies lorsquelles\n                    auront t valides et approuves par un professionel du{\" \"}\n                    {regions[region].title[language]}.\n                  </Fr>\n                </I18n>\n              </Typography>\n\n              <div style={{ marginTop: \"10px\" }}>\n                <Button\n                  startIcon={<Add />}\n                  onClick={() => history.push(`/${language}/${region}/new`)}\n                >\n                  <I18n en=\"New Record\" fr=\"Nouvel enregistrement\" />\n                </Button>\n              </div>\n\n              <List>\n                {Object.entries(records || {})\n                  .sort(recordDateSort)\n                  .map(([key, record]) => {\n                    const { status, title } = record;\n\n                    if (!(title?.en || !title?.fr)) return null;\n\n                    return (\n                      <MetadataRecordListItem\n                        key={key}\n                        record={record}\n                        showCloneAction\n                        onCloneClick={() => this.cloneRecord(key)}\n                        showDeleteAction\n                        onDeleteClick={() =>\n                          this.toggleModal(\"deleteModalOpen\", true, key)\n                        }\n                        showEditAction\n                        showPercentComplete\n                        onViewEditClick={() => this.editRecord(key)}\n                        showSubmitAction\n                        onSubmitClick={() => {\n                          if (status === \"\")\n                            this.toggleModal(\n                              \"submitModalOpen\",\n                              true,\n                              key,\n                              record\n                            );\n                          else this.toggleModal(\"withdrawModalOpen\", true, key);\n                        }}\n                      />\n                    );\n                  })}\n              </List>\n            </div>\n\n            {!records && (\n              <Typography>\n                <I18n>\n                  <En>You don't have any records.</En>\n                  <Fr>Vous n'avez pas d'historique de saisie.</Fr>\n                </I18n>\n              </Typography>\n            )}\n          </span>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Submissions;\n","import React from \"react\";\nimport { Typography, List, CircularProgress } from \"@material-ui/core\";\nimport firebase from \"../../firebase\";\nimport MetadataRecordListItem from \"../FormComponents/MetadataRecordListItem\";\nimport { auth } from \"../../auth\";\nimport {\n  cloneRecord,\n  loadRegionRecords,\n} from \"../../utils/firebaseRecordFunctions\";\nimport { Fr, En, I18n } from \"../I18n\";\nimport FormClassTemplate from \"./FormClassTemplate\";\n\nclass Published extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n    this.state = {\n      records: {},\n      deleteModalOpen: false,\n      submitModalOpen: false,\n      withdrawModalOpen: false,\n      modalKey: \"\",\n      modalRecord: null,\n      loading: false,\n    };\n  }\n\n  async loadRecords() {\n    this.setState({ loading: true });\n    const { match } = this.props;\n    const { region } = match.params;\n\n    this.unsubscribe = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        const usersRef = firebase.database().ref(region).child(\"users\");\n\n        usersRef.on(\"value\", (regionRecordsFB) => {\n          const records = loadRegionRecords(regionRecordsFB, [\"published\"]);\n          this.setState({ records, loading: false });\n        });\n        this.listenerRefs.push(usersRef);\n      }\n    });\n  }\n\n  async componentDidMount() {\n    this.loadRecords();\n  }\n\n  editRecord(key, userID) {\n    const { match, history } = this.props;\n    const { language, region } = match.params;\n    history.push(`/${language}/${region}/${userID}/${key}`);\n  }\n\n  // user ID is that of the record owner, not the editor\n  handleCloneRecord(recordID, sourceUserID) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser) {\n      cloneRecord(recordID, sourceUserID, auth.currentUser.uid, region);\n    }\n  }\n\n  render() {\n    const { match } = this.props;\n    const { region } = match.params;\n    const { records, loading } = this.state;\n\n    const recordDateSort = (a, b) => new Date(b.created) - new Date(a.created);\n\n    return (\n      <div>\n        <Typography variant=\"h5\">\n          <I18n>\n            <En>Published Records</En>\n            <Fr>Dossiers publis</Fr>\n          </I18n>\n        </Typography>\n\n        {loading ? (\n          <CircularProgress />\n        ) : (\n          <span>\n            <div>\n              <Typography>\n                <I18n>\n                  <En>These are the published records in your region.</En>\n                  <Fr>\n                    Il s'agit des enregistrements publis dans votre rgion.\n                  </Fr>\n                </I18n>\n              </Typography>\n\n              <List>\n                {records && records.length\n                  ? records\n                      .sort(recordDateSort)\n                      .filter((record) => record.status === \"published\")\n                      .map((record) => {\n                        const { title } = record;\n\n                        if (!(title?.en || !title?.fr)) return null;\n\n                        return (\n                          <MetadataRecordListItem\n                            record={record}\n                            key={record.recordID}\n                            onViewEditClick={() =>\n                              this.editRecord(\n                                record.recordID,\n                                record.userinfo?.userID\n                              )\n                            }\n                            showDeleteAction={false}\n                            showUnSubmitAction={false}\n                            showCloneAction\n                            showAuthor\n                            showViewAction\n                            onCloneClick={() =>\n                              this.handleCloneRecord(\n                                record.recordID,\n                                record.userinfo?.userID,\n                                region\n                              )\n                            }\n                          />\n                        );\n                      })\n                  : \"\"}\n              </List>\n            </div>\n\n            {!records && (\n              <Typography>\n                <I18n>\n                  <En>There are no published records.</En>\n                  <Fr>Il n'y a pas de documents publis.</Fr>\n                </I18n>\n              </Typography>\n            )}\n          </span>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Published;\n","import firebase from \"../firebase\";\n\nexport async function cloneContact(region, userID, contactID) {\n  const contactsRef = firebase\n    .database()\n    .ref(region)\n    .child(\"users\")\n    .child(userID)\n    .child(\"contacts\");\n\n  const contact = (await contactsRef.child(contactID).once(\"value\")).val();\n\n  if (contact.lastName) contact.lastName += \" (Copy)\";\n  else contact.orgName += \" (Copy)\";\n  contactsRef.push(contact);\n}\n\nexport function deleteContact(region, userID, contactID) {\n  return firebase\n    .database()\n    .ref(region)\n    .child(\"users\")\n    .child(userID)\n    .child(\"contacts\")\n    .child(contactID)\n    .remove();\n}\n\nexport async function newContact(region, userID) {\n  const newNode = await firebase\n    .database()\n    .ref(region)\n    .child(\"users\")\n    .child(userID)\n    .child(\"contacts\")\n    .push({});\n\n  return newNode.key;\n}\n","import React from \"react\";\n\nimport { I18n } from \"../I18n\";\n\n/* Functions used to format text in the contact page, left column */\n\n// creates text from a contact in the form\n// <organization> - <individual name>\nfunction getContactTitleFromNames(contact) {\n  const { orgName, givenNames, lastName } = contact;\n  const titleParts = [\n    [lastName, givenNames].filter((e) => e).join(\", \"),\n    orgName,\n  ];\n\n  return titleParts\n    .filter((e) => e)\n    .map((e) => e.trim())\n    .filter((e) => e)\n    .join(\" - \");\n}\n\nfunction ContactTitle({ contact }) {\n  return (\n    getContactTitleFromNames(contact) || (\n      <I18n en=\"New contact\" fr=\"Nouveau contact\" />\n    )\n  );\n}\n\nexport default ContactTitle;\n","import React from \"react\";\nimport {\n  Typography,\n  IconButton,\n  Button,\n  List,\n  ListItem,\n  ListItemText,\n  Avatar,\n  Grid,\n  ListItemSecondaryAction,\n  ListItemAvatar,\n  CircularProgress,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  Add,\n  Edit,\n  Delete,\n  PermContactCalendar,\n  FileCopy,\n} from \"@material-ui/icons\";\nimport firebase from \"../../firebase\";\nimport { auth } from \"../../auth\";\nimport {\n  newContact,\n  cloneContact,\n  deleteContact,\n} from \"../../utils/firebaseContactFunctions\";\nimport ContactTitle from \"../FormComponents/ContactTitle\";\nimport { I18n, En, Fr } from \"../I18n\";\nimport SimpleModal from \"../FormComponents/SimpleModal\";\nimport FormClassTemplate from \"./FormClassTemplate\";\n\nclass Contacts extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n    this.state = {\n      contacts: {},\n      modalOpen: false,\n      modalKey: \"\",\n      loading: false,\n    };\n  }\n\n  async componentDidMount() {\n    this.setState({ loading: true });\n\n    const { match } = this.props;\n    const { region } = match.params;\n\n    this.unsubscribe = auth.onAuthStateChanged((user) => {\n      if (user) {\n        const contactsRef = firebase\n          .database()\n          .ref(region)\n          .child(\"users\")\n          .child(user.uid)\n          .child(\"contacts\");\n        contactsRef.on(\"value\", (records) =>\n          this.setState({ contacts: records.toJSON(), loading: false })\n        );\n        this.listenerRefs.push(contactsRef);\n      }\n    });\n  }\n\n  handleDeleteContact(contactID) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser) {\n      deleteContact(region, auth.currentUser.uid, contactID);\n    }\n  }\n\n  handleCloneContact(contactID) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser) {\n      return cloneContact(region, auth.currentUser.uid, contactID);\n    }\n    return false;\n  }\n\n  addContact() {\n    const { history, match } = this.props;\n    const { language, region } = match.params;\n\n    // render different page with 'save' button?\n    if (auth.currentUser) {\n      newContact(region, auth.currentUser.uid).then((key) => {\n        history.push(`/${language}/${region}/contacts/${key}`);\n      });\n    }\n  }\n\n  editContact(key) {\n    const { history, match } = this.props;\n    const { language, region } = match.params;\n\n    // render different page with 'save' button?\n    history.push(`/${language}/${region}/contacts/${key}`);\n  }\n\n  toggleModal(state, key = \"\") {\n    this.setState({ modalKey: key, modalOpen: state });\n  }\n\n  render() {\n    const { modalOpen, modalKey, loading, contacts } = this.state;\n    return (\n      <Grid container direction=\"column\" spacing={3}>\n        <Grid item xs>\n          <SimpleModal\n            open={modalOpen}\n            onClose={() => this.toggleModal(false)}\n            onAccept={() => this.handleDeleteContact(modalKey)}\n            aria-labelledby=\"simple-modal-title\"\n            aria-describedby=\"simple-modal-description\"\n          />\n\n          <Typography variant=\"h5\">\n            <I18n>\n              <En>Contacts</En>\n              <Fr>Contacts</Fr>\n            </I18n>\n          </Typography>\n        </Grid>\n        <Grid item xs>\n          <Typography>\n            <I18n>\n              <En>\n                Create contacts here that you can reuse in multiple metadata\n                records.\n              </En>\n              <Fr>\n                Ajoutez ici les personnes ressources que vous dsirez rutiliser\n                pour la saisie dautres mtadonnes.\n              </Fr>\n            </I18n>\n          </Typography>\n        </Grid>\n\n        <Grid item xs>\n          <Button startIcon={<Add />} onClick={() => this.addContact()}>\n            <I18n>\n              <En>Add contact</En>\n              <Fr>ajouter un contact</Fr>\n            </I18n>\n          </Button>\n        </Grid>\n\n        {loading ? (\n          <CircularProgress />\n        ) : (\n          <>\n            <Grid item xs>\n              {contacts && Object.keys(contacts).length ? (\n                <div>\n                  <Typography>\n                    <I18n>\n                      <En>These are your contacts</En>\n                      <Fr>Ce sont vos contacts</Fr>\n                    </I18n>\n                  </Typography>\n                  <List>\n                    {Object.entries(contacts).map(([key, val]) => (\n                      <ListItem\n                        key={key}\n                        button\n                        onClick={() => this.editContact(key)}\n                      >\n                        <ListItemAvatar>\n                          <Avatar>\n                            <PermContactCalendar />\n                          </Avatar>\n                        </ListItemAvatar>\n\n                        <ListItemText\n                          primary={<ContactTitle contact={val} />}\n                        />\n                        <ListItemSecondaryAction>\n                          <Tooltip title={<I18n en=\"Edit\" fr=\"diter\" />}>\n                            <span>\n                              <IconButton onClick={() => this.editContact(key)}>\n                                <Edit />\n                              </IconButton>\n                            </span>\n                          </Tooltip>\n                          <Tooltip title={<I18n en=\"Clone\" fr=\"Clone\" />}>\n                            <span>\n                              <IconButton\n                                onClick={() => this.handleCloneContact(key)}\n                              >\n                                <FileCopy />\n                              </IconButton>\n                            </span>\n                          </Tooltip>\n                          <Tooltip title={<I18n en=\"Delete\" fr=\"Supprimer\" />}>\n                            <span>\n                              <IconButton\n                                onClick={() => this.toggleModal(true, key)}\n                              >\n                                <Delete />\n                              </IconButton>\n                            </span>\n                          </Tooltip>\n                        </ListItemSecondaryAction>\n                      </ListItem>\n                    ))}\n                  </List>\n                </div>\n              ) : (\n                <Typography>\n                  <I18n>\n                    <En>No contacts submitted yet</En>\n                    <Fr>Aucun contacts n'a encore t soumis</Fr>\n                  </I18n>\n                </Typography>\n              )}\n            </Grid>\n          </>\n        )}\n      </Grid>\n    );\n  }\n}\nexport default Contacts;\n","import React from \"react\";\n\nimport { Typography } from \"@material-ui/core\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nconst Login = () => {\n  return (\n    <div>\n      <Typography>\n        <I18n>\n          <En>\n            Please sign in to access your metadata records. You will need a\n            Google account to login.\n          </En>\n          <Fr>\n            Connectez-vous pour accder  l'historique de saisie de vos\n            mtadonnes. Vous aurez besoin d'un compte Google pour vous\n            connecter.\n          </Fr>\n        </I18n>\n      </Typography>\n    </div>\n  );\n};\n\nexport default Login;\n","import React from \"react\";\n\nimport { Chip } from \"@material-ui/core\";\nimport { I18n } from \"../I18n\";\n\nconst StatusChip = ({ status }) => {\n  let chipText = \"\";\n\n  if (status === \"submitted\") chipText = <I18n en=\"Submitted\" fr=\"Soumis\" />;\n  else if (status === \"published\")\n    chipText = <I18n en=\"Published\" fr=\"Publi\" />;\n  else chipText = <I18n en=\"Draft\" fr=\"Brouillon\" />;\n\n  return (\n    <Chip\n      label={chipText}\n      // color={statusColors[status] || \"default\"}\n      variant=\"outlined\"\n    />\n  );\n};\n\nexport default StatusChip;\n","import React from \"react\";\nimport { Typography } from \"@material-ui/core\";\n\nconst NotFound = () => {\n  return (\n    <div>\n      <Typography variant=\"h5\">Not Found / Non trouv</Typography>\n    </div>\n  );\n};\n\nexport default NotFound;\n","import React from \"react\";\nimport { Tooltip } from \"@material-ui/core\";\nimport { I18n } from \"../I18n\";\n\nfunction RequiredMark({ passes }) {\n  if (passes)\n    return (\n      <span\n        style={{\n          color: \"green\",\n          fontSize: \"x-large\",\n          position: \"relative\",\n          bottom: \"-4px\",\n        }}\n      >\n        {\" \"}\n        {\" \"}\n      </span>\n    );\n  return (\n    <Tooltip title={<I18n en=\"Required\" fr=\"Obligatoire\" />}>\n      <span\n        style={{\n          color: \"red\",\n          fontSize: \"large\",\n        }}\n      >\n        {\" \"}\n        {\" \"}\n      </span>\n    </Tooltip>\n  );\n}\nexport default RequiredMark;\n","import React from \"react\";\nimport { Typography } from \"@material-ui/core\";\n\nexport const SupplementalText = ({ children }) => (\n  <Typography variant=\"body2\" component=\"div\" style={{ marginTop: \"10px\" }}>\n    {children}\n  </Typography>\n);\nexport const QuestionText = ({ children }) => (\n  <Typography variant=\"body1\" component=\"div\" style={{ marginBottom: \"10px\" }}>\n    {children}\n  </Typography>\n);\nexport const paperClass = {\n  padding: \"10px\",\n  margin: \"20px\",\n  width: \"90%\",\n};\n","import React from \"react\";\n\nimport { Save } from \"@material-ui/icons\";\nimport { Typography, Paper, Grid } from \"@material-ui/core\";\nimport { useParams } from \"react-router-dom\";\n\nimport regions from \"../../regions\";\n\nimport { En, Fr, I18n } from \"../I18n\";\nimport RequiredMark from \"../FormComponents/RequiredMark\";\nimport { paperClass } from \"../FormComponents/QuestionStyles\";\n\nconst StartTab = ({ disabled }) => {\n  const { region } = useParams();\n  const regionInfo = regions[region];\n\n  return (\n    <Grid item xs>\n      <Paper style={paperClass}>\n        {disabled && (\n          <Typography>\n            <I18n>\n              <En>\n                <b>\n                  This form is locked because it has already been published, or\n                  you do not have access to edit it.\n                </b>\n              </En>\n              <Fr>\n                <b>\n                  Ce formulaire est verrouill car il a dj t publi ou vous\n                  n'avez pas accs pour le modifier.\n                </b>\n              </Fr>\n            </I18n>\n          </Typography>\n        )}\n        <Typography variant=\"body1\">\n          <I18n>\n            <En>\n              Welcome to the {regionInfo.title.en} Metadata Entry Tool, the\n              first step in making your data discoverable and accessible through\n              CIOOS. This information will be used to create a metadata record\n              for your dataset that will allow it to be searchable through the{\" \"}\n              {regionInfo.catalogueTitle.en}. Please fill out each field with as\n              much detail as possible. The metadata record will help describe\n              this dataset for others to determine if it is relevant for their\n              work and ensure it is interoperable with other databases and\n              systems.\n              <br />\n              <br /> Questions regarding the form can be directed to{\" \"}\n            </En>\n            <Fr>\n              Bienvenue dans loutil de saisie de mtadonnes{\" \"}\n              {regionInfo.titleFrPossessive} qui constitue la premire tape du\n              processus de partage de vos donnes. Ces renseignements serviront\n               crer le profil de mtadonnes de votre jeu de donnes. Ces\n              mtadonnes facilitent laccessibilit et la dcouvrabilit de vos\n              donnes via le Catalogue de donnes {regionInfo.catalogueTitle.fr}\n              . Elles rendent galement vos jeux de donnes interoprables avec\n              dautres systmes de diffusion. Aussi, nous vous incitons\n              fortement  remplir les champs requis de la faon la plus\n              exhaustive possible.\n              <br />\n              <br /> Les questions concernant le formulaire peuvent tre\n              adresses {\" \"}\n            </Fr>\n          </I18n>\n          <a href={`mailto:${regionInfo.email}`}>{regionInfo.email}</a>.\n        </Typography>\n\n        <ul>\n          <li>\n            <I18n>\n              <En>You can save the form once you have filled out a title.</En>\n              <Fr>\n                Ds que vous avez saisi un titre, vous pouvez enregistrer le\n                formulaire.\n              </Fr>\n            </I18n>\n          </li>\n          <li>\n            <En>\n              All fields marked with a <RequiredMark /> are mandatory.\n            </En>\n            <Fr>\n              Tous les champs marqus d'une toile <RequiredMark /> sont\n              obligatoires.\n            </Fr>\n          </li>\n          <li>\n            <I18n>\n              <En>\n                The form can be saved and completed over time by clicking the{\" \"}\n                <Save /> icon in the bottom right corner. This icon will be\n                greyed out until you have filled in the dataset title in the\n                \"Identification\" section.\n              </En>\n              <Fr>\n                Le formulaire peut tre sauvegard et complt ultrieurement en\n                cliquant sur le bouton <Save /> dans le coin infrieur droit.\n                Cet icne sera activ par lajout du titre du jeu de donnes\n                dans la section  Identification des donnes .\n              </Fr>\n            </I18n>\n          </li>\n          <li>\n            <I18n>\n              <En>\n                Some fields can have text in both French and English, though\n                this is only required for the title and the abstract. There is a\n                'Translate' button that will automatically generate text in the\n                other language. This translation is more accurate when there is\n                more text to translate.\n              </En>\n              <Fr>\n                Certains champs peuvent avoir du texte  la fois en franais et\n                en anglais, toutefois seules les traductions du titre et du\n                rsum sont rellement requises. Le bouton  Traduire gnre\n                automatiquement du texte dans l'autre langue. Veuillez noter que\n                plus il y a de texte  traduire et plus la traduction sera\n                prcise.\n              </Fr>\n            </I18n>\n          </li>\n        </ul>\n      </Paper>\n    </Grid>\n  );\n};\n\nexport default StartTab;\n","import React from \"react\";\n\nimport {\n  Checkbox,\n  FormControlLabel,\n  Grid,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\n\nconst CheckBoxList = ({\n  onChange,\n  value = [],\n  name,\n  options,\n  optionLabels = options,\n  optionTooltips = [],\n  disabled,\n  labelSize = 3,\n}) => {\n  // remove array element from array, by value\n  function toggleArrayElement(ele, arr) {\n    if (arr.includes(ele)) return arr.filter((v) => v !== ele);\n    return arr.concat(ele);\n  }\n\n  return (\n    <Grid container direction=\"row\">\n      {options.map((v, i) => {\n        return (\n          <Grid item key={i} xs={labelSize}>\n            <Tooltip title={optionTooltips[i] || \"\"}>\n              <FormControlLabel\n                disabled={disabled}\n                control={\n                  <Checkbox\n                    value={v || []}\n                    name={name}\n                    checked={value.includes(v)}\n                    onChange={(e) => {\n                      const val = e.target.value;\n                      const newCheckedValuesArray = toggleArrayElement(\n                        val,\n                        value\n                      );\n\n                      onChange(newCheckedValuesArray);\n                    }}\n                  />\n                }\n                label={<Typography>{optionLabels[i]}</Typography>}\n              />\n            </Tooltip>\n          </Grid>\n        );\n      })}\n    </Grid>\n  );\n};\n\nexport default CheckBoxList;\n","export const eovList = [\n  \"dissolvedOrganicCarbon\",\n  \"inorganicCarbon\",\n  \"nitrate\",\n  \"nutrients\",\n  \"oxygen\",\n  \"phosphate\",\n  \"potentialDensity\",\n  \"potentialTemperature\",\n  \"pressure\",\n  \"seaIce\",\n  \"seaState\",\n  \"seaSurfaceHeight\",\n  \"seaSurfaceSalinity\",\n  \"seaSurfaceTemperature\",\n  \"seawaterDensity\",\n  \"silicate\",\n  \"speedOfSound\",\n  \"subSurfaceCurrents\",\n  \"subSurfaceSalinity\",\n  \"subSurfaceTemperature\",\n  \"surfaceCurrents\",\n  \"other\",\n];\n\nexport const roleCodes = {\n  custodian: {\n    title: {\n      en: \"Metadata Custodian\",\n      fr: \"Dpositaire des mtadonnes\",\n    },\n    text: {\n      en:\n        \"Party that accepts accountability and responsibility for the resource and ensures appropriate care and maintenance of the resource \",\n      fr:\n        \"Partie qui accepte la reddition de comptes et la responsabilit de la ressource et assure le soin et l'entretien appropris de la ressource \",\n    },\n    required: true,\n    showProminently: true,\n  },\n  owner: {\n    title: { en: \"Data Owner\", fr: \"Propritaire des donnes\" },\n    text: {\n      en: \"Party that owns the resource\",\n      fr: \"Partie propritaire de la ressource\",\n    },\n    required: true,\n    showProminently: true,\n  },\n  distributor: {\n    title: { en: \"Distributor\", fr: \"Distributeur\" },\n    text: {\n      en: \"Party who distributes the resource\",\n      fr: \"Partie qui distribue la ressource\",\n    },\n    showProminently: true,\n  },\n  author: {\n    title: { en: \"Author\", fr: \"Auteur\" },\n    text: { en: \"Party who authored the resource\" },\n  },\n  coAuthor: {\n    title: { en: \"Coauthor\", fr: \"Co-auteur\" },\n    text: {\n      en: \"Party who jointly authors the resource\",\n      fr: \"Partie qui est l'auteur conjoint de la ressource\",\n    },\n  },\n\n  collaborator: {\n    title: { en: \"Collaborator\", fr: \"Collaborateur\" },\n    text: {\n      en:\n        \"Party who assists with the generation of the resource other than the principal investigator\",\n      fr:\n        \"Partie qui aide  la production de la ressource autre que le chercheur principal\",\n    },\n  },\n  contributor: {\n    title: { en: \"Contributor\", fr: \"Contributeur\" },\n    text: {\n      en: \"Party contributing to the resource\",\n      fr: \"Partie contribuant  la ressource\",\n    },\n  },\n  editor: {\n    title: { en: \"Editor\", fr: \"diteur\" },\n    text: {\n      en: \"Party who reviewed or modified the resource to improve the content\",\n      fr:\n        \"Partie qui a examin ou modifi la ressource pour amliorer le contenu\",\n    },\n  },\n  funder: {\n    title: { en: \"Funder\", fr: \"Financeur\" },\n    text: {\n      en: \"Party providing monetary support for the resource\",\n      fr: \"Partie fournissant un soutien montaire pour la ressource\",\n    },\n  },\n  mediator: {\n    title: { en: \"Mediator\", fr: \"Mdiateur\" },\n    text: {\n      en:\n        \"A class of entity that mediates access to the resource and for whom the resource is intended or useful \",\n      fr:\n        \"Classe d'entit qui sert de mdiateur  l'accs  la ressource et pour laquelle la ressource est destine ou utile\",\n    },\n  },\n  originator: {\n    title: { en: \"Originator\", fr: \"Initiateur\" },\n    text: {\n      en: \"Party who created the resource\",\n      fr: \"Partie qui a cr la ressource\",\n    },\n  },\n  pointOfContact: {\n    title: { en: \"Point Of Contact\", fr: \"Point de contact\" },\n    text: {\n      en:\n        \"Party who can be contacted for acquiring knowledge about or acquisition of the resource\",\n      fr:\n        \"Partie qui peut tre contacte pour acqurir des connaissances sur la ressource ou l'acquisition de la ressource\",\n    },\n  },\n\n  principalInvestigator: {\n    title: { en: \"Principal Investigator\", fr: \"Responsable de recherche\" },\n    text: {\n      en:\n        \"Key party responsible for gathering information and conducting research\",\n      fr:\n        \"Partie cl responsable de la collecte de l'information et de la ralisation de la recherche\",\n    },\n  },\n  processor: {\n    title: { en: \"Processor\", fr: \"Transformateur\" },\n    text: {\n      en:\n        \"Party who has processed the data in a manner such that the resource has been modified\",\n      fr:\n        \"Partie qui a trait les donnes d'une manire telle que la ressource a t modifie\",\n    },\n  },\n  publisher: {\n    title: { en: \"Publisher\", fr: \"Editeur\" },\n    text: {\n      en: \"Party who published the resource\",\n      fr: \"Partie qui a publi la ressource\",\n    },\n  },\n  resourceProvider: {\n    title: { en: \"Resource Provider\", fr: \"Fournisseur de ressources\" },\n    text: {\n      en: \"Party that supplies the resource\",\n      fr: \"Partie qui fournit la ressource \",\n    },\n  },\n  rightsHolder: {\n    title: { en: \"Rights Holder\", fr: \"Ayant droit\" },\n    text: {\n      en: \"Party owning or managing rights over the resource \",\n      fr: \"Partie dtenant ou grant des droits sur la ressource\",\n    },\n  },\n  sponsor: {\n    title: { en: \"Sponsor\", fr: \"Commanditaire\" },\n    text: {\n      en: \"Party who speaks for the resource \",\n      fr: \"Parti qui parle pour la ressource\",\n    },\n  },\n  stakeholder: {\n    title: { en: \"Stakeholder\", fr: \"Actionnaire\" },\n    text: {\n      en:\n        \"Party who has an interest in the resource or the use of the resource \",\n      fr:\n        \"Partie qui a un intrt dans la ressource ou l'utilisation de la ressource\",\n    },\n  },\n};\n\nexport const progressCodes = {\n  onGoing: {\n    title: { en: \"Ongoing\", fr: \"En cours\" },\n    text: {\n      en:\n        \"Data is continually being updated. e.g satellite dataset that continues to be augmented\",\n      fr:\n        \"Les donnes sont continuellement mises  jour, par exemple un ensemble de donnes satellite qui continue d'tre augment\",\n    },\n  },\n\n  historicalArchive: {\n    title: { en: \"Historical Archive\", fr: \"Archives historiques\" },\n    text: {\n      en:\n        \"Data has been stored in an offline storage facility. use to indicate data are archived\",\n      fr:\n        \"Les donnes ont t stockes dans une installation de stockage hors connexion. Utilisez pour indiquer que les donnes sont archives\",\n    },\n  },\n\n  completed: {\n    title: { en: \"Completed\", fr: \"Termin\" },\n    text: {\n      en:\n        \"Production of the data has been completed \te.g. raw data that is not ongoing, completed model\",\n      fr:\n        \"La production des donnes a t termine, p. ex. donnes brutes qui ne sont pas en cours, modle termin\",\n    },\n  },\n};\n\nexport const depthDirections = {\n  heightPositive: { en: \"Depth Positive\", fr: \"Profondeur positive\" },\n  depthPositive: { en: \"Height Positive\", fr: \"Hauteur positive\" },\n};\n","import React, { useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport {\n  Grid,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Tooltip,\n  Checkbox,\n} from \"@material-ui/core\";\nimport { ExpandMore } from \"@material-ui/icons\";\n\nimport CheckBoxList from \"./CheckBoxList\";\nimport RequiredMark from \"./RequiredMark\";\n\nimport { En, Fr, I18n } from \"../I18n\";\nimport { roleCodes } from \"../../isoCodeLists\";\n\nimport { QuestionText, SupplementalText } from \"./QuestionStyles\";\n\nconst RolePicker = ({ value, disabled, updateContact }) => {\n  const [expanded, setExpanded] = useState(false);\n  const { language } = useParams();\n\n  const roles = Object.entries(roleCodes).map(([key, role]) => ({\n    key,\n    ...role,\n  }));\n  const prominentRoles = roles.filter((role) => role.showProminently);\n  const nonProminentRoles = roles.filter((role) => !role.showProminently);\n  const nonProminentRoleKeys = nonProminentRoles.map((r) => r.key);\n  const selectOptionIsInExpandedList =\n    (value.role || []).filter((role) => nonProminentRoleKeys.includes(role))\n      .length > 0;\n\n  return (\n    <Grid item xs>\n      <QuestionText>\n        <I18n>\n          <En>Appear in citation?</En>\n          <Fr>Apparaissent dans la citation?</Fr>\n        </I18n>\n\n        <Checkbox\n          name=\"inCitation\"\n          checked={value.inCitation || false}\n          onChange={(e) => {\n            const { checked } = e.target;\n\n            updateContact(\"inCitation\")(checked);\n          }}\n        />\n      </QuestionText>\n      <QuestionText>\n        <I18n>\n          <En>What is the role of this contact?</En>\n          <Fr>Quel est son rle?</Fr>\n        </I18n>\n        <RequiredMark passes={value.role?.length} />\n        <SupplementalText>\n          {\" \"}\n          <I18n>\n            <En>\n              Multiple roles can be selected for each contact. Expand the list\n              below for additional role.\n            </En>\n            <Fr>\n              Plusieurs rles peuvent tre slectionns par personne. Si vous\n              avez besoin de rles plus spcifiques, vous pouvez tendre la\n              liste. Dveloppez la liste ci-dessous pour un rle supplmentaire.\n            </Fr>\n          </I18n>\n        </SupplementalText>\n      </QuestionText>\n\n      <CheckBoxList\n        value={value.role || []}\n        onChange={updateContact(\"role\")}\n        options={prominentRoles.map((r) => r.key)}\n        optionLabels={prominentRoles.map(\n          (r) => r.title[language] + (r.required ? \"*\" : \"\")\n        )}\n        disabled={disabled}\n        optionTooltips={prominentRoles.map((r) => r.text[language])}\n      />\n\n      <Accordion\n        onChange={() => setExpanded(!expanded)}\n        expanded={expanded || selectOptionIsInExpandedList}\n      >\n        <AccordionSummary\n          expandIcon={\n            <Tooltip title=\"Show/Hide more options\">\n              <ExpandMore />\n            </Tooltip>\n          }\n          aria-controls=\"panel1a-content\"\n          id=\"panel1a-header\"\n        >\n          <I18n>\n            <En>Show/Hide more role options</En>\n            <Fr>Afficher/masquer les rles</Fr>\n          </I18n>\n        </AccordionSummary>\n        <AccordionDetails>\n          <CheckBoxList\n            value={value.role || []}\n            onChange={updateContact(\"role\")}\n            options={nonProminentRoles.map((r) => r.key)}\n            optionLabels={nonProminentRoles.map((r) => r.title[language])}\n            disabled={disabled}\n            optionTooltips={nonProminentRoles.map((r) => r.text[language])}\n          />\n        </AccordionDetails>\n      </Accordion>\n    </Grid>\n  );\n};\nexport default RolePicker;\n","import React, { useEffect, useState } from \"react\";\n\nimport {\n  TextField,\n  Typography,\n  Grid,\n  CircularProgress,\n  Button,\n  IconButton,\n  InputAdornment,\n} from \"@material-ui/core\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport { useDebounce } from \"use-debounce\";\nimport { Clear, OpenInNew } from \"@material-ui/icons\";\nimport { getBlankContact } from \"../../utils/blankRecord\";\n\nimport { validateEmail, validateURL } from \"../../utils/validate\";\nimport RolePicker from \"./RolePicker\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nimport ContactTitle from \"./ContactTitle\";\nimport { QuestionText } from \"./QuestionStyles\";\n\nfunction givenNamesFormat(givenNames) {\n  return givenNames\n    .split(\" \")\n    .filter((e) => e)\n    .map((e) => `${e[0].toUpperCase()}. `)\n    .join(\" \");\n}\n\nfunction namesToCitation(givenNames, lastname) {\n  if (!givenNames || !lastname) return \"\";\n\n  return `${lastname}, ${givenNamesFormat(givenNames)}`;\n}\n\nconst ContactEditor = ({\n  value,\n  showRolePicker,\n  disabled,\n  handleClear,\n  updateContact,\n  updateContactEvent,\n  updateContactRor,\n  updateContactOrcid,\n}) => {\n  const orgEmailValid = validateEmail(value.orgEmail);\n  const indEmailValid = validateEmail(value.indEmail);\n  const orgURLValid = validateURL(value.orgURL);\n  const givenNamesValid = !value.givenNames?.includes(\",\");\n  const lastNameValid = !value.lastName?.includes(\",\");\n  const [rorInputValue, setRorInputValue] = useState(value.orgRor);\n  const [orcidInputValue, setOrcidInputValue] = useState(\"\");\n  const [debouncedRorInputValue] = useDebounce(rorInputValue, 500);\n  const [rorOptions, setRorOptions] = useState([]);\n  const [rorSearchActive, setRorSearchActive] = useState(false);\n\n  // eslint-disable-next-line no-param-reassign\n  value = { ...getBlankContact(), ...value };\n\n  function updateRorOptions(newInputValue) {\n    if (\n      newInputValue.startsWith(\"http\") &&\n      !newInputValue.includes(\"ror.org\")\n    ) {\n      setRorSearchActive(false);\n    } else {\n      fetch(`https://api.ror.org/organizations?query=${newInputValue}`)\n        .then((response) => response.json())\n        .then((response) => setRorOptions(response.items))\n        .then(() => setRorSearchActive(false));\n    }\n  }\n\n  useEffect(() => {\n    if (debouncedRorInputValue) {\n      updateRorOptions(debouncedRorInputValue);\n    }\n  }, [debouncedRorInputValue]);\n\n  return (\n    <Grid container direction=\"column\" spacing={2}>\n      <Grid item xs>\n        <Typography variant=\"h6\">\n          <ContactTitle contact={value} />\n        </Typography>\n      </Grid>\n      <Grid item xs>\n        {showRolePicker && (\n          <RolePicker\n            value={value}\n            updateContact={updateContact}\n            disabled={disabled}\n          />\n        )}\n        <Grid\n          container\n          direction=\"column\"\n          spacing={1}\n          style={{ marginTop: \"10px\" }}\n        >\n          {/* Organization */}\n          <Grid item xs>\n            <QuestionText>\n              <I18n>\n                <En>Provide any information about the organization</En>\n                <Fr>Identification de l'organisation</Fr>\n              </I18n>\n            </QuestionText>\n          </Grid>\n          <Grid item xs style={{ marginleft: \"10px\", height: \"33px\" }}>\n            {rorSearchActive ? (\n              <CircularProgress size={20} />\n            ) : (\n              <div style={{ height: \"33px\" }} />\n            )}\n          </Grid>\n          <Grid item xs style={{ marginleft: \"10px\" }}>\n            <Autocomplete\n              inputValue={rorInputValue}\n              onInputChange={(e, newInputValue) => {\n                setRorInputValue(newInputValue);\n                if (newInputValue === \"\") {\n                  setRorSearchActive(false);\n                } else {\n                  setRorSearchActive(true);\n                }\n              }}\n              disabled={disabled}\n              onChange={(e, organization) => {\n                if (organization !== null) {\n                  fetch(`https://api.ror.org/organizations/${organization.id}`)\n                    .then((response) => response.json())\n                    .then((response) => {\n                      if (!response.errors) {\n                        updateContactRor(response);\n                      } // todo: do some error handling here if search fails?\n                    })\n                    .then(() => setRorSearchActive(false))\n                    .then(() => setRorInputValue(\"\"));\n                }\n              }}\n              freeSolo\n              filterOptions={(x) => x}\n              getOptionLabel={(e) => e.name}\n              options={rorOptions}\n              fullWidth\n              renderInput={(params) => (\n                <TextField\n                  // eslint-disable-next-line react/jsx-props-no-spreading\n                  {...params}\n                  label={\n                    <I18n\n                      en=\"Type to search Research Organization Registry (ROR)\"\n                      fr=\"Tapez pour rechercher le registre des organismes de recherche (ROR)\n\"\n                    />\n                  }\n                />\n              )}\n            />\n          </Grid>\n          <Grid item xs style={{ marginleft: \"10px\" }}>\n            <TextField\n              label={<I18n active en=\"ROR URL\" fr=\"URL ROR\" />}\n              InputLabelProps={{ shrink: value.orgRor !== \"\" }}\n              value={value.orgRor}\n              disabled\n              fullWidth\n              InputProps={{\n                endAdornment: value.orgRor && (\n                  <InputAdornment position=\"end\">\n                    <IconButton\n                      onClick={() => {\n                        handleClear(\"orgRor\");\n                      }}\n                    >\n                      <Clear />\n                    </IconButton>\n                  </InputAdornment>\n                ),\n              }}\n              // sx={{m: 2, \"&.Mui-focused .MuiIconButton-root\": {color: 'primary.main'}}}\n            />\n          </Grid>\n          <Grid item xs style={{ marginleft: \"10px\" }}>\n            <TextField\n              label={<I18n en=\"Organization name\" fr=\"Nom de l'organisation\" />}\n              value={value.orgName}\n              onChange={updateContactEvent(\"orgName\")}\n              disabled={value.orgRor !== \"\" || disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              helperText={\n                !orgURLValid && <I18n en=\"Invalid URL\" fr=\"URL non valide\" />\n              }\n              error={!orgURLValid}\n              label={<I18n en=\"URL\" fr=\"URL\" />}\n              value={value.orgURL}\n              onChange={updateContactEvent(\"orgURL\")}\n              disabled={value.orgRor !== \"\" || disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              label={<I18n en=\"Address\" fr=\"Adresse\" />}\n              value={value.orgAdress}\n              onChange={updateContactEvent(\"orgAdress\")}\n              disabled={disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              label={<I18n en=\"City\" fr=\"Ville\" />}\n              value={value.orgCity}\n              onChange={updateContactEvent(\"orgCity\")}\n              disabled={value.orgRor !== \"\" || disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              label={<I18n en=\"Country\" fr=\"Pays\" />}\n              value={value.orgCountry}\n              onChange={updateContactEvent(\"orgCountry\")}\n              disabled={value.orgRor !== \"\" || disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              helperText={\n                !orgEmailValid && (\n                  <I18n en=\"Invalid email\" fr=\"E-mail non valide\" />\n                )\n              }\n              error={!orgEmailValid}\n              label={<I18n en=\"Email\" fr=\"Courriel\" />}\n              value={value.orgEmail}\n              onChange={updateContactEvent(\"orgEmail\")}\n              fullWidth\n              disabled={disabled}\n            />{\" \"}\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item xs>\n        {/* Individual */}\n        <Typography>\n          <I18n>\n            <En>Provide any information about the individual</En>\n            <Fr>Identification de l'individu</Fr>\n          </I18n>\n        </Typography>\n        <Typography>\n          <Button\n            href=\"https://orcid.org/orcid-search/search\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style={{ marginTop: \"10px\", marginBottom: \"10px\" }}\n          >\n            <I18n>\n              <En>ORCID search </En>\n              <Fr>Rechercher ORCID </Fr>\n            </I18n>\n            <OpenInNew style={{ verticalAlign: \"middle\" }} />\n          </Button>\n        </Typography>\n        <Grid item xs style={{ marginleft: \"10px\" }}>\n          <TextField\n            label={\n              <I18n\n                en=\"Paste ORCID identifier here to populate personal data\"\n                fr=\"Collez l'identifiant ORCID ici pour remplir les donnes personnelles\"\n              />\n            }\n            value={orcidInputValue}\n            onChange={(e) => {\n              setOrcidInputValue(e.target.value);\n              const regex = /\\w{4}-\\w{4}-\\w{4}-\\w{4}/g;\n              const orcid = e.target.value.match(regex);\n              if (orcid) {\n                fetch(`https://pub.orcid.org/v3.0/${orcid}/record`, {\n                  headers: {\n                    accept: \"application/json\",\n                  },\n                })\n                  .then((response) => response.json())\n                  .then((response) => updateContactOrcid(response))\n                  .then(() => {\n                    setTimeout(() => setOrcidInputValue(\"\"), 100);\n                  });\n              }\n            }}\n            disabled={disabled}\n            fullWidth\n          />\n        </Grid>\n        <Grid container direction=\"column\" spacing={1}>\n          <Grid item xs>\n            {value.givenNames && value.lastName && value.inCitation && (\n              <div style={{ marginBottom: \"10px\" }}>\n                This name will appear in the citation as:{\" \"}\n                <b>{namesToCitation(value.givenNames, value.lastName)}</b>\n              </div>\n            )}\n          </Grid>\n          <Grid item xs>\n            <TextField\n              label={<I18n en=\"ORCID URL\" fr=\"URL ORCID\" />}\n              InputLabelProps={{ shrink: value.indOrcid !== \"\" }}\n              value={value.indOrcid}\n              InputProps={{\n                endAdornment: value.indOrcid && (\n                  <InputAdornment position=\"end\">\n                    <IconButton\n                      onClick={() => {\n                        handleClear(\"indOrcid\");\n                      }}\n                    >\n                      <Clear />\n                    </IconButton>\n                  </InputAdornment>\n                ),\n              }}\n              disabled\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              label={<I18n en=\"Given name(s)\" fr=\"Prnom\" />}\n              value={value.givenNames}\n              helperText={\n                !givenNamesValid && (\n                  <I18n\n                    en=\"No commas allowed\"\n                    fr=\"Aucune virgule n'est autorise\"\n                  />\n                )\n              }\n              error={!givenNamesValid}\n              onChange={updateContactEvent(\"givenNames\")}\n              disabled={disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              // style={{ margin: \"25px\" }}\n              label={<I18n en=\"Last name\" fr=\"nom de famille\" />}\n              value={value.lastName}\n              helperText={\n                !lastNameValid && (\n                  <I18n\n                    en=\"No commas allowed\"\n                    fr=\"Aucune virgule n'est autorise\"\n                  />\n                )\n              }\n              error={!lastNameValid}\n              onChange={updateContactEvent(\"lastName\")}\n              disabled={disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              label={<I18n en=\"Position\" fr=\"Poste occup\" />}\n              value={value.indPosition}\n              onChange={updateContactEvent(\"indPosition\")}\n              disabled={disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              helperText={\n                !indEmailValid && (\n                  <I18n en=\"Invalid email\" fr=\"E-mail non valide\" />\n                )\n              }\n              error={!indEmailValid}\n              label={<I18n en=\"Email\" fr=\"Courriel\" />}\n              value={value.indEmail}\n              onChange={updateContactEvent(\"indEmail\")}\n              disabled={disabled}\n              fullWidth\n            />\n          </Grid>\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ContactEditor;\n","import React from \"react\";\nimport {\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n  Typography,\n  Tooltip,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { I18n } from \"../I18n\";\n\nconst useStyles = makeStyles(() => ({\n  formControl: {\n    minWidth: 200,\n  },\n  selectEmpty: {},\n}));\n\nconst SelectInput = ({\n  value = \"\",\n  name,\n  options,\n  optionLabels,\n  optionTooltips = [],\n  onChange,\n  disabled,\n  label,\n  fullWidth = true,\n}) => {\n  const classes = useStyles();\n\n  return (\n    <FormControl\n      fullWidth={fullWidth}\n      className={classes.formControl}\n      disabled={disabled}\n    >\n      <Select\n        className={classes.selectEmpty}\n        name={name}\n        fullWidth={fullWidth}\n        value={value}\n        disabled={disabled}\n        displayEmpty\n        onChange={onChange}\n      >\n        <MenuItem value=\"\">\n          <InputLabel id=\"demo-simple-select-label\">\n            <Typography>\n              {label || <I18n en=\"Choose\" fr=\"Choisir\" />}\n            </Typography>\n          </InputLabel>\n        </MenuItem>\n        {options.map((v, i) => (\n          <MenuItem key={v} value={v}>\n            <Tooltip\n              enterDelay={1}\n              title={optionTooltips[i] ? optionTooltips[i] : \"\"}\n            >\n              <div style={{ width: \"100%\" }}>{optionLabels[i]}</div>\n            </Tooltip>\n          </MenuItem>\n        ))}\n      </Select>\n    </FormControl>\n  );\n};\nexport default SelectInput;\n","import React, { useState } from \"react\";\n\nimport { Container, Draggable } from \"react-smooth-dnd\";\n\nimport arrayMove from \"array-move\";\nimport { Delete, DragHandle, FileCopy, Save } from \"@material-ui/icons\";\nimport {\n  List,\n  ListItem,\n  ListItemSecondaryAction,\n  ListItemText,\n  IconButton,\n  Typography,\n  Tooltip,\n  Grid,\n  Paper,\n  Button,\n} from \"@material-ui/core\";\nimport { deepCopy, deepEquals } from \"../../utils/misc\";\nimport { paperClass } from \"./QuestionStyles\";\nimport SelectInput from \"./SelectInput\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nimport ContactTitle from \"./ContactTitle\";\nimport { getBlankContact } from \"../../utils/blankRecord\";\n\nconst ContactLeftList = ({\n  contacts,\n  updateContacts,\n  activeContact,\n  setActiveContact,\n  disabled,\n  userContacts,\n  saveToContacts,\n}) => {\n  const [currentContacts, setItems] = useState(contacts);\n\n  if (!deepEquals(currentContacts, contacts)) {\n    setItems(contacts);\n  }\n  //  removedIndex is dragStart\n  //  addedIndex is dragEnd\n  function onDrop({ removedIndex, addedIndex }) {\n    if (removedIndex === activeContact) setActiveContact(addedIndex);\n    else if (addedIndex <= activeContact && removedIndex > activeContact)\n      setActiveContact(activeContact + 1);\n\n    const reorderedContacts = arrayMove(\n      currentContacts,\n      removedIndex,\n      addedIndex\n    );\n\n    updateContacts(reorderedContacts);\n  }\n\n  function removeItem(itemIndex) {\n    updateContacts(contacts.filter((e, index) => index !== itemIndex));\n    if (contacts.length) setActiveContact(contacts.length - 2);\n  }\n  function duplicateContact(contactIndex) {\n    const duplicatedContact = deepCopy(contacts[contactIndex]);\n    if (duplicatedContact.lastName) duplicatedContact.lastName += \" (Copy)\";\n    else duplicatedContact.orgName += \" (Copy)\";\n\n    updateContacts(contacts.concat(duplicatedContact));\n  }\n\n  const contactList = Object.values(userContacts || {});\n\n  function handleAddFromSavedContacts(e) {\n    const index = e.target.value;\n    const { role, ...contact } = contactList[index];\n\n    updateContacts(\n      contacts.concat(deepCopy({ ...getBlankContact(), ...contact }))\n    );\n    setActiveContact(contacts.length);\n  }\n\n  function handleAddNewContact() {\n    updateContacts(contacts.concat(getBlankContact()));\n    setActiveContact(contacts.length);\n  }\n\n  return (\n    <Paper style={paperClass}>\n      <Grid container direction=\"column\" justifyContent=\"flex-start\">\n        <Grid item xs style={{ margin: \"10px\" }}>\n          <Typography>\n            {contacts.length ? (\n              <I18n>\n                <En>Contacts in this record:</En>\n                <Fr>Contacts dans cet enregistrement:</Fr>\n              </I18n>\n            ) : (\n              <I18n>\n                <En>There are no contacts in this record.</En>\n                <Fr>Il n'y a aucun contact dans cet enregistrement.</Fr>\n              </I18n>\n            )}\n          </Typography>\n        </Grid>\n        <Grid item xs>\n          <List>\n            <Container\n              dragHandleSelector=\".drag-handle\"\n              lockAxis=\"y\"\n              onDrop={onDrop}\n            >\n              {contacts.map((contactItem, i) => {\n                return (\n                  <Draggable key={i}>\n                    <ListItem\n                      key={i}\n                      button\n                      onClick={() => setActiveContact(i)}\n                    >\n                      <ListItemText\n                        primary={\n                          <Typography\n                            style={{\n                              fontWeight: activeContact === i ? \"bold\" : \"\",\n                              width: \"80%\",\n                            }}\n                          >\n                            <ContactTitle contact={contactItem} />\n                          </Typography>\n                        }\n                      />\n                      <ListItemSecondaryAction>\n                        <Tooltip\n                          title={\n                            <I18n\n                              en=\"Duplicate contact\"\n                              fr=\"Duplicate contact\"\n                            />\n                          }\n                        >\n                          <span>\n                            <IconButton\n                              onClick={() => duplicateContact(i)}\n                              edge=\"end\"\n                              aria-label=\"clone\"\n                              disabled={disabled}\n                            >\n                              <FileCopy />\n                            </IconButton>\n                          </span>\n                        </Tooltip>\n                        <Tooltip\n                          title={\n                            <I18n\n                              en=\"Remove from this record\"\n                              fr=\"Supprimer de cet enregistrement\"\n                            />\n                          }\n                        >\n                          <span>\n                            <IconButton\n                              onClick={() => removeItem(i)}\n                              edge=\"end\"\n                              aria-label=\"clone\"\n                              disabled={disabled}\n                            >\n                              <Delete />\n                            </IconButton>\n                          </span>\n                        </Tooltip>\n                        <Tooltip\n                          title={\n                            <I18n\n                              en=\"Add to saved contacts\"\n                              fr=\"Ajouter aux contacts enregistrs\"\n                            />\n                          }\n                        >\n                          <span>\n                            <IconButton\n                              onClick={() => {\n                                const contact = deepCopy(contacts[i]);\n\n                                // at this point the contact object could have\n                                // a role field, which shouldn't be saved\n                                delete contact.role;\n\n                                contact.contactID = saveToContacts(contact);\n\n                                setItems(contacts);\n                              }}\n                              disabled={\n                                !(\n                                  contacts[i].orgName?.length ||\n                                  contacts[i].givenNames?.length ||\n                                  contacts[i].lastName?.length\n                                )\n                              }\n                              edge=\"end\"\n                              aria-label=\"clone\"\n                            >\n                              <Save />\n                            </IconButton>\n                          </span>\n                        </Tooltip>\n                        <Tooltip\n                          title={\n                            <I18n en=\"Drag to reorder\" fr=\"Duplicate contact\" />\n                          }\n                        >\n                          <span>\n                            <IconButton\n                              className=\"drag-handle\"\n                              edge=\"end\"\n                              aria-label=\"clone\"\n                              disabled={disabled}\n                            >\n                              <DragHandle />\n                            </IconButton>\n                          </span>\n                        </Tooltip>\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                  </Draggable>\n                );\n              })}\n            </Container>\n          </List>\n        </Grid>\n        <Grid item xs style={{ margin: \"10px\" }}>\n          <Button\n            disabled={disabled}\n            onClick={handleAddNewContact}\n            fullWidth\n            style={{ height: \"56px\", justifyContent: \"emptyContact\" }}\n          >\n            <Typography>\n              <I18n>\n                <En>Add new contact</En>\n                <Fr>Ajouter un contact</Fr>\n              </I18n>\n            </Typography>\n          </Button>\n        </Grid>\n        <Grid item xs style={{ margin: \"10px\" }}>\n          <SelectInput\n            value=\"\"\n            labelId=\"add-existing\"\n            onChange={handleAddFromSavedContacts}\n            optionLabels={contactList.map((contactItem) => (\n              <ContactTitle contact={contactItem} />\n            ))}\n            options={contactList.map((v, i) => i)}\n            disabled={!contactList.length || disabled}\n            label={<I18n en=\"ADD SAVED CONTACT\" fr=\"AJOUTER UN CONTACT\" />}\n          />\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n};\nexport default ContactLeftList;\n","import React, { useState } from \"react\";\n\nimport { useParams } from \"react-router-dom\";\n\nimport { Paper, Grid } from \"@material-ui/core\";\nimport DragHandleIcon from \"@material-ui/icons/DragHandle\";\n\nimport EditContact from \"../FormComponents/ContactEditor\";\nimport ContactLeftList from \"../FormComponents/ContactLeftList\";\n\nimport {\n  QuestionText,\n  SupplementalText,\n  paperClass,\n} from \"../FormComponents/QuestionStyles\";\n\nimport { En, Fr, I18n } from \"../I18n\";\nimport RequiredMark from \"../FormComponents/RequiredMark\";\nimport { validateField } from \"../../utils/validate\";\n\nimport { ApaPreview } from \"../FormComponents/ApaPreview\";\n\nimport regions from \"../../regions\";\n\nconst ContactTab = ({\n  disabled,\n  record,\n  userContacts,\n  updateRecord,\n  saveToContacts,\n}) => {\n  const { language, region } = useParams();\n  const { contacts = [] } = record;\n\n  const updateContacts = updateRecord(\"contacts\");\n\n  const [activeContact, setActiveContact] = useState(0);\n\n  // Instead of updating record.<item> we are\n  // updating record.contacts[activeContact].<item>\n  function updateContactEvent(key) {\n    return (e) => {\n      const newContacts = [...contacts];\n      newContacts[activeContact][key] = e.target.value;\n      updateContacts(newContacts);\n    };\n  }\n\n  function updateContact(key) {\n    return (value) => {\n      const newContacts = [...contacts];\n      newContacts[activeContact][key] = value;\n      updateContacts(newContacts);\n    };\n  }\n\n  function updateOrgFromRor(payload) {\n    const newContacts = [...contacts];\n    newContacts[activeContact].orgRor = payload.id;\n    newContacts[activeContact].orgName = payload.name;\n    newContacts[activeContact].orgURL = payload.links.find(() => true) || \"\";\n    newContacts[activeContact].orgCity =\n      payload.addresses.find(() => true).city || \"\";\n    newContacts[activeContact].orgCountry = payload.country.country_name;\n    updateContacts(newContacts);\n  }\n\n  function updateIndFromOrcid(payload) {\n    const { name, emails } = payload.person;\n    const indEmail = emails.email.length > 0 ? emails.email[0].email : \"\";\n    const lastName = name[\"family-name\"] ? name[\"family-name\"].value : \"\";\n\n    const newContacts = [...contacts];\n    newContacts[activeContact].indOrcid = payload[\"orcid-identifier\"].uri;\n    newContacts[activeContact].givenNames = name[\"given-names\"].value;\n    newContacts[activeContact].indEmail = indEmail;\n    newContacts[activeContact].lastName = lastName;\n    updateContacts(newContacts);\n  }\n\n  const showApaBox =\n    record.title?.[language] &&\n    contacts.length &&\n    record.created &&\n    record.contacts?.some((c) => c.inCitation);\n\n  const contact = contacts[activeContact];\n  return (\n    <Grid container spacing={3}>\n      <Paper style={paperClass}>\n        <Grid item xs>\n          <QuestionText>\n            <I18n>\n              <En>\n                Please enter at least one Metadata Custodian <b>and</b> one Data\n                Owner for this dataset that can work with{\" \"}\n                {regions[region].title[language]} Staff to finalize this\n                Metadata Record. You also must select at least one contact to\n                appear in the citation.\n              </En>\n              <Fr>\n                Veuillez saisir au moins un Dpositaire des mtadonnes ET un\n                propritaire des donnes de ce jeu. Ces personnes pourraient\n                tre appeles  collaborer avec le personnel\n                {regions[region].titleFrPossessive} pour finaliser la saisie des\n                informations. Vous devez galement slectionner au moins un\n                contact pour apparatre dans la citation.\n              </Fr>\n            </I18n>\n            <RequiredMark passes={validateField(record, \"contacts\")} />\n            <SupplementalText>\n              <I18n>\n                <En>\n                  It is important to include all individuals from the chain of\n                  attribution to ensure all involved parties are credited\n                  appropriately for their role in creating this dataset. Saved\n                  contacts can be selected from the list below.\n                </En>\n                <Fr>\n                  Il est important d'inclure toutes les personnes ayant\n                  travaill sur le jeu de donnes afin de s'assurer que toutes\n                  les parties concernes soient crdites de faon approprie\n                  pour leur rle dans la cration de ce jeu de donnes. Les\n                  contacts sauvegards peuvent tre slectionns dans la liste\n                  ci-dessous.\n                </Fr>\n              </I18n>\n            </SupplementalText>\n          </QuestionText>\n        </Grid>\n      </Paper>\n      {showApaBox && (\n        <Paper style={paperClass}>\n          <QuestionText>\n            <div>\n              <I18n>\n                <En>\n                  This is how your record citation will look in the catalogue.\n                  To change the citation order, drag the{\" \"}\n                  <DragHandleIcon style={{ verticalAlign: \"middle\" }} /> symbol.\n                </En>\n                <Fr>\n                  Voici  quoi ressemblera votre citation dans le catalogue.\n                  Seuls les contacts dont la case Auteur cit est coche\n                  apparaissent. Seuls les rles toils apparatront dans la\n                  citation. Changer la commande, faites glisser le{\" \"}\n                  <DragHandleIcon style={{ verticalAlign: \"middle\" }} />.\n                </Fr>\n              </I18n>\n            </div>\n          </QuestionText>\n          <SupplementalText>\n            <ApaPreview language={language} record={record} />\n          </SupplementalText>\n        </Paper>\n      )}\n\n      <Grid container direction=\"row\" style={{ marginLeft: \"5px\" }}>\n        <Grid item xs={5}>\n          <ContactLeftList\n            contacts={contacts}\n            updateContacts={updateContacts}\n            setActiveContact={setActiveContact}\n            activeContact={activeContact}\n            disabled={disabled}\n            userContacts={userContacts}\n            saveToContacts={saveToContacts}\n          />\n        </Grid>\n        {contact && (\n          <Grid item xs>\n            <Grid container direction=\"column\">\n              <Paper style={paperClass}>\n                <Grid container direction=\"column\" spacing={3}>\n                  <Grid item xs>\n                    <EditContact\n                      showRolePicker\n                      value={contact}\n                      handleClear={(key) => updateContact(key)(\"\")}\n                      updateContactEvent={updateContactEvent}\n                      updateContact={updateContact}\n                      updateContactRor={updateOrgFromRor}\n                      updateContactOrcid={updateIndFromOrcid}\n                      disabled={disabled}\n                    />\n                  </Grid>\n                </Grid>\n              </Paper>\n            </Grid>\n          </Grid>\n        )}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ContactTab;\n","import React, { useContext, useState } from \"react\";\nimport {\n  Button,\n  InputAdornment,\n  TextField,\n  CircularProgress,\n  Tooltip,\n} from \"@material-ui/core\";\nimport TranslateIcon from \"@material-ui/icons/Translate\";\nimport ArrowDownwardIcon from \"@material-ui/icons/ArrowDownward\";\nimport { useParams } from \"react-router-dom\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport { UserContext } from \"../../providers/UserProvider\";\n\n// AWS translate size limit is 5KB\nconst MAX_AWS_TRANSLATE_SIZE = 5000;\n\nconst BilingualTextInput = ({\n  onChange,\n  value,\n  name,\n  multiline,\n  disabled,\n  error,\n  translationButonDisabled = false,\n}) => {\n  const { translate } = useContext(UserContext);\n  const [awaitingTranslation, setAwaitingTranslation] = useState(false);\n\n  function handleEvent(e) {\n    const newData = { ...value, [e.target.name]: e.target.value };\n    const newDataEvent = { target: { name, value: newData } };\n    onChange(newDataEvent);\n  }\n  const { language } = useParams();\n  let languages;\n\n  const textSizeByes = new Blob([value?.[language]]).size;\n  const textTooBig = textSizeByes >= MAX_AWS_TRANSLATE_SIZE;\n\n  if (language === \"en\") languages = [\"en\", \"fr\"];\n  else languages = [\"fr\", \"en\"];\n  return (\n    <div>\n      {languages.map((lang, i) => (\n        <div key={lang}>\n          <TextField\n            name={lang}\n            fullWidth\n            value={value?.[lang] || \"\"}\n            onChange={handleEvent}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  {lang.toUpperCase()}\n                </InputAdornment>\n              ),\n            }}\n            multiline={multiline}\n            disabled={disabled}\n            error={Boolean(error)}\n          />\n          {i === 0 && !translationButonDisabled && (\n            <Tooltip\n              title={\n                <I18n\n                  en=\"Translate english to french\"\n                  fr=\"Traduire du franais en anglais\"\n                />\n              }\n            >\n              <span>\n                <Button\n                  style={{ margin: \"10px\" }}\n                  startIcon={\n                    awaitingTranslation ? (\n                      <CircularProgress size={20} />\n                    ) : (\n                      <TranslateIcon />\n                    )\n                  }\n                  endIcon={awaitingTranslation ? null : <ArrowDownwardIcon />}\n                  disabled={\n                    disabled ||\n                    awaitingTranslation ||\n                    !value?.[lang] ||\n                    textTooBig\n                  }\n                  onClick={() => {\n                    const alternateLanguage = languages[1];\n                    setAwaitingTranslation(true);\n\n                    translate({ text: value[lang], fromLang: lang }).then(\n                      (translatedText) => {\n                        setAwaitingTranslation(false);\n                        const translation = translatedText.data;\n                        handleEvent({\n                          target: {\n                            name: alternateLanguage,\n                            value: translation,\n                          },\n                        });\n                      }\n                    );\n                  }}\n                >\n                  <I18n>\n                    <En>Translate</En>\n                    <Fr>Traduire</Fr>\n                  </I18n>\n                </Button>\n                {textTooBig && (\n                  <I18n>\n                    <En>\n                      Translation is disabled because text is larger than{\" \"}\n                      {MAX_AWS_TRANSLATE_SIZE} characters.\n                    </En>\n                    <Fr>\n                      La traduction est dsactive car le texte est plus grand\n                      que {MAX_AWS_TRANSLATE_SIZE} caractres.\n                    </Fr>\n                  </I18n>\n                )}\n              </span>\n            </Tooltip>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default BilingualTextInput;\n","import React from \"react\";\nimport {\n  Add,\n  Delete,\n  ArrowUpwardSharp,\n  ArrowDownwardSharp,\n} from \"@material-ui/icons\";\nimport { Button, Grid, Paper, TextField } from \"@material-ui/core\";\nimport validator from \"validator\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nimport BilingualTextInput from \"./BilingualTextInput\";\nimport RequiredMark from \"./RequiredMark\";\nimport { deepCopy } from \"../../utils/misc\";\nimport { QuestionText, paperClass, SupplementalText } from \"./QuestionStyles\";\n\nconst validateURL = (url) => !url || validator.isURL(url);\n\nconst Resources = ({ updateResources, resources, disabled }) => {\n  const emptyResource = { url: \"\", name: \"\", description: { en: \"\", fr: \"\" } };\n\n  function addResource() {\n    updateResources(resources.concat(deepCopy(emptyResource)));\n  }\n\n  // removes the resource section from the list at index i\n  function removeResource(i) {\n    updateResources(resources.filter((e, index) => index !== i));\n  }\n\n  // move the resource section\n  function moveResource(i, newIndex) {\n    if (newIndex < 0 || newIndex >= resources.length) return;\n    const element = resources.splice(i, 1)[0];\n    resources.splice(newIndex, 0, element);\n    updateResources(resources);\n  }\n  const nameLabel = <I18n en=\"Name\" fr=\"Titre\" />;\n  const descriptionLabel = <I18n en=\"Description\" fr=\"Description\" />;\n\n  return (\n    <div>\n      {resources.map((dist = deepCopy(emptyResource), i) => {\n        const urlIsValid = !dist.url || validateURL(dist.url);\n        function handleResourceChange(key) {\n          return (e) => {\n            const newValue = [...resources];\n            newValue[i][key] = e.target.value;\n            updateResources(newValue);\n          };\n        }\n        return (\n          <Paper key={i} style={paperClass}>\n            <Grid container direction=\"column\" spacing={3}>\n              <Grid item xs>\n                <QuestionText>\n                  <I18n>\n                    <En>Enter a name for the resource</En>\n                    <Fr>Entrez un titre pour la ressource</Fr>\n                  </I18n>\n                  <RequiredMark passes={dist.name?.en || dist.name?.fr} />\n                </QuestionText>\n                <BilingualTextInput\n                  label={nameLabel}\n                  value={dist.name}\n                  onChange={handleResourceChange(\"name\")}\n                  fullWidth\n                  disabled={disabled}\n                />\n              </Grid>\n              <Grid item xs>\n                <QuestionText>\n                  <I18n>\n                    <En>Enter the URL for the resource</En>\n                    <Fr>Entrez l'URL de la ressource</Fr>\n                  </I18n>\n\n                  <RequiredMark passes={validator.isURL(dist.url)} />\n                  <SupplementalText>\n                    <I18n>\n                      <En>\n                        <p>\n                          The link may be to a formal data resource on another\n                          repository or a link to a personal online drive (e.g.\n                          Google Drive).\n                        </p>\n                      </En>\n                      <Fr>\n                        <p>\n                          Le lien peut tre vers une ressource de donnes\n                          formelle sur un autre dpt de donnes ou un lien vers\n                          un disque personnel en ligne (par exemple Google\n                          Drive).\n                        </p>\n                      </Fr>\n                    </I18n>\n                  </SupplementalText>\n                </QuestionText>\n\n                <TextField\n                  helperText={\n                    !urlIsValid && <I18n en=\"Invalid URL\" fr=\"URL non valide\" />\n                  }\n                  error={!urlIsValid}\n                  label=\"URL\"\n                  value={dist.url}\n                  onChange={handleResourceChange(\"url\")}\n                  fullWidth\n                  disabled={disabled}\n                />\n              </Grid>\n              <Grid item xs>\n                <QuestionText>\n                  <I18n>\n                    <En>Enter a description of the resource</En>\n                    <Fr>Entrez une description de la ressource</Fr>\n                  </I18n>\n                </QuestionText>{\" \"}\n                <BilingualTextInput\n                  name=\"description\"\n                  label={descriptionLabel}\n                  value={dist.description}\n                  onChange={handleResourceChange(\"description\")}\n                  disabled={disabled}\n                />\n              </Grid>\n              <Grid item xs>\n                <Button\n                  startIcon={<Delete />}\n                  disabled={disabled}\n                  onClick={() => removeResource(i)}\n                >\n                  <I18n>\n                    <En>Remove item</En>\n                    <Fr>Supprimer la ressource</Fr>\n                  </I18n>\n                </Button>\n                <Button\n                  startIcon={<ArrowUpwardSharp />}\n                  disabled={disabled || i - 1 < 0}\n                  onClick={() => moveResource(i, i - 1)}\n                >\n                  <I18n>\n                    <En>Move up</En>\n                    <Fr>Dplacer vers le haut</Fr>\n                  </I18n>\n                </Button>\n                <Button\n                  startIcon={<ArrowDownwardSharp />}\n                  disabled={disabled || i + 1 >= resources.length}\n                  onClick={() => moveResource(i, i + 1)}\n                >\n                  <I18n>\n                    <En>Move down</En>\n                    <Fr>Dplacer vers le bas</Fr>\n                  </I18n>\n                </Button>\n              </Grid>\n            </Grid>\n          </Paper>\n        );\n      })}\n\n      <Paper style={paperClass}>\n        <Button startIcon={<Add />} disabled={disabled} onClick={addResource}>\n          <I18n>\n            <En>Add item</En>\n            <Fr>Ajouter une ressource</Fr>\n          </I18n>\n        </Button>\n      </Paper>\n    </div>\n  );\n};\n\nexport default Resources;\n","import React from \"react\";\n\nimport { Paper } from \"@material-ui/core\";\n\nimport Resources from \"../FormComponents/Resources\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport RequiredMark from \"../FormComponents/RequiredMark\";\nimport {\n  paperClass,\n  QuestionText,\n  SupplementalText,\n} from \"../FormComponents/QuestionStyles\";\nimport { validateField } from \"../../utils/validate\";\n\nconst ResourcesTab = ({ disabled, record, updateRecord }) => {\n  const updateResources = updateRecord(\"distribution\");\n  return (\n    <div>\n      <Paper style={paperClass}>\n        <QuestionText>\n          <En>Enter any links to information associated with this dataset.</En>\n          <Fr>\n            Entrez les liens vers les informations associes  ce jeu de\n            donnes.\n          </Fr>\n          <RequiredMark passes={validateField(record, \"distribution\")} />\n          <SupplementalText>\n            <I18n>\n              <En>\n                Some examples of resources are:\n                <ul>\n                  <li>supporting documentation (eg text or pdf files)</li>\n                  <li>CSV files</li>\n                  <li>ERDDAP datasets</li>\n                  <li>images</li>\n                </ul>\n                At least one item is required. A Resource URL can link to a\n                (compressed) data package or folder.\n              </En>\n              <Fr>\n                Voici quelques exemples de ressources :\n                <ul>\n                  <li>\n                    Documentation  l'appui (par exemple, fichiers texte ou pdf)\n                  </li>\n                  <li>Fichiers CSV</li>\n                  <li>Jeux de donnes ERDDAP</li>\n                  <li>Images</li>\n                </ul>\n                Au moins une ressource est requise. Une URL de ressource peut\n                tre lie  un paquet de donnes (compress) ou  un dossier.\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n      </Paper>\n      <Resources\n        paperClass={paperClass}\n        resources={record.distribution || []}\n        updateResources={updateResources}\n        disabled={disabled}\n      />\n    </div>\n  );\n};\n\nexport default ResourcesTab;\n","import {\n  KeyboardDatePicker,\n  MuiPickersUtilsProvider,\n} from \"@material-ui/pickers\";\n\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport React from \"react\";\n\nimport { I18n } from \"../I18n\";\n\nfunction formatDate(date) {\n  try {\n    const d = date.getDate();\n    const m = date.getMonth();\n    const y = date.getFullYear();\n    // This is to get around the issue of timezones and dates\n    return new Date(y, m, d, 12, 0, 0, 0);\n  } catch (e) {\n    return null;\n  }\n}\nconst DateInput = ({ onChange, value, name, disabled, dateStart, dateEnd }) => {\n  return (\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      <KeyboardDatePicker\n        disabled={disabled}\n        margin=\"normal\"\n        id=\"date-picker-dialog\"\n        label={<I18n en=\"Select date\" fr=\"Slectionner une date\" />}\n        format=\"yyyy-MM-dd\"\n        value={value}\n        minDate={dateStart || \"1100-01-01\"}\n        maxDate={dateEnd}\n        onChange={(dateSelected) => {\n          return onChange({\n            target: { name, value: formatDate(dateSelected) },\n          });\n        }}\n        KeyboardButtonProps={{\n          \"aria-label\": \"change date\",\n        }}\n      />\n    </MuiPickersUtilsProvider>\n  );\n};\n\nexport default DateInput;\n","const keywords = [\n  { en: \"abundance and biomass\", fr: \"abondance et biomasse\" },\n  { en: \"sea access\", fr: \"accs  la mer\" },\n  { en: \"decision making\", fr: \"aide  la dcision\" },\n  { en: \"protected areas\", fr: \"aires protges\" },\n  { en: \"knowledge improvement\", fr: \"amlioration des connaissances\" },\n  { en: \"land-use planning\", fr: \"amnagement du territoire\" },\n  { en: \"water purification\", fr: \"assainissement des eaux\" },\n  { en: \"striped bass\", fr: \"bar ray\" },\n  { en: \"watershed\", fr: \"bassin versant\" },\n  { en: \"habitat characterization\", fr: \"caractrisation des habitats\" },\n  { en: \"coastal characterization\", fr: \"caractrisation des rives\" },\n  { en: \"climate change\", fr: \"changement climatique\" },\n  { en: \"chlorophyll a\", fr: \"chlorophylle a\" },\n  { en: \"resource conservation\", fr: \"conservation des ressources\" },\n  { en: \"water consumption\", fr: \"consommation d'eau\" },\n  { en: \"sea currents\", fr: \"courant marin\" },\n  { en: \"crustacean\", fr: \"crustac\" },\n  { en: \"fresh water flow\", fr: \"dbits eau douce\" },\n  { en: \"water density\", fr: \"densit eau\" },\n  { en: \"sustainable development\", fr: \"dveloppement durable\" },\n  { en: \"ocean-atmosphere exchange\", fr: \"change ocan-atmosphre\" },\n  { en: \"sampling\", fr: \"chantillonnage\" },\n  { en: \"crayfish\", fr: \"crevisses\" },\n  { en: \"mariculture\", fr: \"entreprises de maricultures\" },\n  { en: \"coastal erosion\", fr: \"rosion des ctes\" },\n  { en: \"endangered species\", fr: \"espces en pril\" },\n  { en: \"invasive species\", fr: \"espces envahissante\" },\n  { en: \"coastal flora\", fr: \"flore ctire\" },\n  { en: \"fluorescence\", fr: \"fluorescence\" },\n  { en: \"spawning\", fr: \"fraie\" },\n  { en: \"community management\", fr: \"gestion communautaire\" },\n  { en: \"resource management\", fr: \"gestion des ressources\" },\n  { en: \"integrated management\", fr: \"gestion intgre\" },\n  { en: \"sea ice\", fr: \"glace de mer\" },\n  { en: \"sensitive habitat\", fr: \"habitat sensible\" },\n  { en: \"important habitat\", fr: \"habitats important\" },\n  { en: \"hydrocarbon\", fr: \"hydrocarbure\" },\n  { en: \"incidents\", fr: \"incidents\" },\n  { en: \"general information\", fr: \"informations gnrales\" },\n  { en: \"wildlife inventory\", fr: \"inventaire faunique\" },\n  { en: \"fish inventory\", fr: \"inventaire poisson\" },\n  { en: \"macroalgae\", fr: \"macroalgue\" },\n  { en: \"benthic macrofauna\", fr: \"macrofaune benthique\" },\n  { en: \"marine mammal\", fr: \"mammifres marins\" },\n  { en: \"marsh\", fr: \"marais\" },\n  { en: \"meteorology\", fr: \"mtorologie\" },\n  { en: \"wetlands\", fr: \"milieux humides\" },\n  { en: \"natural environments of interest\", fr: \"milieux naturels d'intrt\" },\n  { en: \"enhancement\", fr: \"mise en valeur\" },\n  { en: \"oceanographic missions\", fr: \"missions ocanographique\" },\n  { en: \"mollusc\", fr: \"mollusque\" },\n  { en: \"sea level\", fr: \"niveau eau\" },\n  { en: \"seabirds\", fr: \"oiseaux marins\" },\n  { en: \"migrator birds\", fr: \"oiseaux migrateurs\" },\n  { en: \"commercial fisheries\", fr: \"pches commerciales\" },\n  { en: \"experimental fisheries\", fr: \"pches exprimentales\" },\n  { en: \"physical-chemical\", fr: \"physico-chimie\" },\n  { en: \"phytoplankton\", fr: \"phytoplancton\" },\n  { en: \"sea grass\", fr: \"plantes aquatique\" },\n  { en: \"fish\", fr: \"poisson\" },\n  { en: \"coastal pollution\", fr: \"pollution ctire\" },\n  { en: \"atmospheric pressure\", fr: \"pression atmosphrique\" },\n  { en: \"coast protection\", fr: \"protection des ctes\" },\n  { en: \"habitat protection\", fr: \"protection des habitats\" },\n  { en: \"water quality\", fr: \"qualit eau\" },\n  { en: \"radiation\", fr: \"radiation\" },\n  { en: \"maritime resources\", fr: \"ressources maritimes\" },\n  { en: \"ecological rehabilitation\", fr: \"rhabilitation cologique\" },\n  { en: \"shore restoration\", fr: \"restauration des rives\" },\n  { en: \"experimental restoration\", fr: \"restauration exprimentale\" },\n  { en: \"habitat restoration\", fr: \"restauration habitat\" },\n  { en: \"coastal risks\", fr: \"risques ctiers\" },\n  { en: \"citizen data\", fr: \"saisie citoyenne\" },\n  { en: \"salinity\", fr: \"salinit\" },\n  { en: \"sediment\", fr: \"sdiment\" },\n  { en: \"fishing sites\", fr: \"sites de pches\" },\n  { en: \"annual follow-up\", fr: \"suivi annuel\" },\n  { en: \"species tracking\", fr: \"suivi des espces\" },\n  { en: \"habitat tracking\", fr: \"suivi habitat\" },\n  { en: \"taxonomy\", fr: \"taxonomie\" },\n  { en: \"remote sensing\", fr: \"tldtection\" },\n  { en: \"water temperature\", fr: \"temprature de l'eau\" },\n  { en: \"sea turtles\", fr: \"tortue de mer\" },\n  { en: \"land-use\", fr: \"utilisation du territoire\" },\n  { en: \"sustainabilty\", fr: \"utilisation durable\" },\n  { en: \"waves\", fr: \"vagues\" },\n  { en: \"wind\", fr: \"vents\" },\n  { en: \"coastal zone\", fr: \"zone ctire\" },\n];\nexport default keywords;\n","import React, { useState } from \"react\";\n\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\n\nimport {\n  TextField,\n  Button,\n  Grid,\n  Chip,\n  InputAdornment,\n} from \"@material-ui/core\";\nimport { useParams } from \"react-router-dom\";\nimport { ArrowDownward } from \"@material-ui/icons\";\nimport keywordList from \"../../utils/keywords\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nfunction translate(word, toLang = \"fr\") {\n  if (!word) return \"\";\n  const fromLang = toLang === \"fr\" ? \"en\" : \"fr\";\n  const foundWord = keywordList.find((e) => e && e[fromLang] === word);\n  if (foundWord) return foundWord[toLang];\n  return \"\";\n}\n\nconst KeywordsInput = ({\n  onChange,\n  value = { en: [], fr: [] },\n  name,\n  disabled,\n}) => {\n  const { language } = useParams();\n  const [selectedKeyword, setKeyword] = useState(\"\");\n  const [inputValue, setInputValue] = useState(\"\");\n  const [selectedKeywordAltLang, setSelectedKeywordAltLang] = useState(\"\");\n\n  const languages = [\"en\", \"fr\"];\n\n  if (language === \"fr\") languages.reverse();\n  const altLanguage = languages[1];\n\n  function cleanList(list) {\n    return list\n      .map((item) => (item || \"\").trim())\n      .filter((item, i, arr) => item && arr.indexOf(item) === i);\n  }\n\n  function handleDelete(chipText, deletedChipLang) {\n    return () => {\n      const newValue = {\n        en: value.en,\n        fr: value.fr,\n        [deletedChipLang]: value[deletedChipLang].filter(\n          (keyword) => keyword !== chipText\n        ),\n      };\n\n      onChange({\n        target: {\n          name,\n          value: newValue,\n        },\n      });\n    };\n  }\n  function handleHelperChange() {\n    const keyword = selectedKeyword || inputValue;\n    if (keyword || selectedKeywordAltLang) {\n      const newValue = { en: value.en, fr: value.fr };\n\n      const userKeywordList = [...value[language], keyword];\n      const userKeywordListAlt = [\n        ...value[altLanguage],\n        selectedKeywordAltLang,\n      ];\n\n      if (keyword) newValue[language] = cleanList(userKeywordList);\n      if (selectedKeywordAltLang)\n        newValue[altLanguage] = cleanList(userKeywordListAlt);\n\n      onChange({\n        target: {\n          name,\n          value: newValue,\n        },\n      });\n    }\n    setKeyword(\"\");\n    setSelectedKeywordAltLang(\"\");\n    setInputValue(\"\");\n  }\n\n  return (\n    <Grid container spacing={3} direction=\"column\">\n      <Grid item xs>\n        <Autocomplete\n          inputValue={inputValue}\n          onInputChange={(event, newInputValue) => {\n            setInputValue(newInputValue);\n          }}\n          disabled={disabled}\n          onChange={(e, keyword) =>\n            setSelectedKeywordAltLang(translate(keyword, altLanguage))\n          }\n          value={selectedKeyword || \"\"}\n          freeSolo\n          options={keywordList\n            .sort((a, b) => a[language].localeCompare(b[language]))\n            .map((e) => e[language])}\n          fullWidth\n          renderInput={(params) => (\n            <TextField\n              // eslint-disable-next-line react/jsx-props-no-spreading\n              {...params}\n              label={language.toUpperCase()}\n            />\n          )}\n        />\n      </Grid>\n      <Grid item xs>\n        <TextField\n          value={selectedKeywordAltLang || \"\"}\n          onChange={(e) => setSelectedKeywordAltLang(e.target.value)}\n          fullWidth\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                {altLanguage.toUpperCase()}\n              </InputAdornment>\n            ),\n          }}\n        />\n      </Grid>\n\n      <Grid item xs={3}>\n        <Button\n          disabled={\n            disabled ||\n            (!selectedKeyword && !selectedKeywordAltLang && !inputValue)\n          }\n          startIcon={<ArrowDownward />}\n          onClick={handleHelperChange}\n        >\n          <I18n>\n            <En>Add</En>\n            <Fr>Ajouter</Fr>\n          </I18n>\n        </Button>\n      </Grid>\n\n      <Grid item xs>\n        {languages\n          .filter((lang) => value[lang]?.length)\n          .map((lang) => (\n            <div style={{ margin: \"15px\" }} key={lang}>\n              <InputAdornment position=\"start\" style={{ margin: \"10px\" }}>\n                {lang.toUpperCase()}\n              </InputAdornment>\n              <Grid container direction=\"row\">\n                <Grid item xs>\n                  {(value[lang] || []).map((keyword, i) => (\n                    <Chip\n                      key={i}\n                      disabled={disabled}\n                      label={keyword}\n                      onDelete={handleDelete(keyword, lang)}\n                      color=\"primary\"\n                      style={{ margin: \"5px\" }}\n                    />\n                  ))}\n                </Grid>\n              </Grid>\n            </div>\n          ))}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default KeywordsInput;\n","import React, { useContext, useState, useEffect, useRef } from \"react\";\nimport {\n  Paper,\n  TextField,\n  Grid,\n  IconButton,\n  Tooltip,\n  Button,\n} from \"@material-ui/core\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { useDebounce } from \"use-debounce\";\nimport { useParams } from \"react-router-dom\";\nimport { OpenInNew, Update } from \"@material-ui/icons\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport { progressCodes } from \"../../isoCodeLists\";\nimport { eovs, eovCategories } from \"../../eovs.json\";\n\nimport firebase from \"../../firebase\";\nimport BilingualTextInput from \"../FormComponents/BilingualTextInput\";\nimport CheckBoxList from \"../FormComponents/CheckBoxList\";\nimport DateInput from \"../FormComponents/DateInput\";\nimport KeywordsInput from \"../FormComponents/KeywordsInput\";\nimport RequiredMark from \"../FormComponents/RequiredMark\";\nimport SelectInput from \"../FormComponents/SelectInput\";\nimport licenses from \"../../utils/licenses\";\nimport recordToDataCite from \"../../utils/recordToDataCite\";\nimport { validateField, validateDOI } from \"../../utils/validate\";\n\nimport {\n  QuestionText,\n  SupplementalText,\n  paperClass,\n} from \"../FormComponents/QuestionStyles\";\n\nimport regions from \"../../regions\";\nimport { UserContext } from \"../../providers/UserProvider\";\n\nconst IdentificationTab = ({\n  disabled,\n  record,\n  handleUpdateRecord,\n  updateRecord,\n  projects,\n}) => {\n  const { createDraftDoi, updateDraftDoi, deleteDraftDoi, getDoiStatus } = useContext(UserContext);\n  const { language, region, userID } = useParams();\n  const regionInfo = regions[region];\n  const doiIsValid =validateDOI(record.datasetIdentifier)\n  \n  const languageUpperCase = language.toUpperCase();\n  const [doiGenerated, setDoiGenerated] = useState(false);\n  const [doiErrorFlag, setDoiErrorFlag] = useState(false);\n  const [debouncedDoiIdValue] = useDebounce(record.datasetIdentifier, 1000);\n  const [loadingDoi, setLoadingDoi] = useState(false);\n  const [loadingDoiUpdate, setLoadingDoiUpdate] = useState(false);\n  const [loadingDoiDelete, setLoadingDoiDelete] = useState(false);\n  const [doiUpdateFlag, setDoiUpdateFlag] = useState(false);\n\n  const generateDoiDisabled = doiGenerated || loadingDoi || (record.doiCreationStatus !== \"\" || record.recordID === \"\");\n  const showGenerateDoi = regionInfo.datacitePrefix;\n  const showDoiStatus = doiIsValid && regionInfo.datacitePrefix && record.doiCreationStatus && record.doiCreationStatus !== \"\"\n  const showUpdateDoi = doiIsValid && regionInfo.datacitePrefix && record.doiCreationStatus !== \"\" && record.datasetIdentifier.includes(regionInfo.datacitePrefix);\n  const showDeleteDoi = doiIsValid && regionInfo.datacitePrefix && record.doiCreationStatus !== \"\" && !doiErrorFlag && record.datasetIdentifier.includes(regionInfo.datacitePrefix);\n  const mounted = useRef(false);\n\n  const CatalogueLink = ({ lang }) => (\n    <a\n      href={regionInfo.catalogueURL[lang]}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      {regionInfo.catalogueURL[lang]}\n    </a>\n  );\n\n  // sort into array of objects sorted by name?\n  const licensesSorted = Object.values(licenses).sort((a, b) =>\n    (a.title[language] || a.title.en).localeCompare(\n      b.title[language] || a.title.en,\n      language\n    )\n  );\n\n  async function handleGenerateDOI() {\n    setLoadingDoi(true);\n\n    try {\n      const mappedDataCiteObject = recordToDataCite(record, language, region);\n      await createDraftDoi(mappedDataCiteObject)\n        .then((response) => {\n          return response.data.data.attributes;\n        })\n        .then(async (attributes) => {\n          // Update the record object with datasetIdentifier and doiCreationStatus\n          updateRecord(\"datasetIdentifier\")(`https://doi.org/${attributes.doi}`);\n          updateRecord(\"doiCreationStatus\")(\"draft\");\n\n          // Create a new object with updated properties\n          const updatedRecord = {\n            ...record,\n            datasetIdentifier: `https://doi.org/${attributes.doi}`,\n            doiCreationStatus: \"draft\",\n          };\n\n          // Save the updated record to the Firebase database\n          const recordsRef = firebase\n            .database()\n            .ref(region)\n            .child(\"users\")\n            .child(userID)\n            .child(\"records\");\n\n          if (record.recordID) {\n            await recordsRef\n              .child(record.recordID)\n              .update({ datasetIdentifier: updatedRecord.datasetIdentifier, doiCreationStatus: updatedRecord.doiCreationStatus });\n          }\n\n          setDoiGenerated(true);\n        })\n        .finally(() => {\n          setLoadingDoi(false);\n        });\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n      setDoiErrorFlag(true);\n      throw err;\n    }\n  }\n\n  async function handleUpdateDraftDOI() {\n    setLoadingDoiUpdate(true);\n\n    try {\n      const mappedDataCiteObject = recordToDataCite(record, language, region);\n      delete mappedDataCiteObject.data.type;\n      delete mappedDataCiteObject.data.attributes.prefix;\n\n      // Extract DOI from the full URL\n      const doi = record.datasetIdentifier.replace('https://doi.org/', '');\n\n      const dataObject = {\n        doi,\n        data: mappedDataCiteObject,\n      }\n\n      const response = await updateDraftDoi( dataObject );\n      const statusCode = response.data.status;\n\n      if (statusCode === 200) {\n        setDoiUpdateFlag(true);\n      } else {\n        setDoiErrorFlag(true);\n      }\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Error updating draft DOI: ', err);\n      setDoiErrorFlag(true);\n      throw err;\n    } finally {\n      setLoadingDoiUpdate(false);\n    }\n  }\n\n  async function handleDeleteDOI() {\n    setLoadingDoiDelete(true);\n\n    try {\n      // Extract DOI from the full URL\n      const doi = record.datasetIdentifier.replace('https://doi.org/', '');\n\n      deleteDraftDoi(doi)\n        .then((response) => response.data)\n        .then(async (statusCode) => {\n          if (statusCode === 204) {\n            // Update the record object with datasetIdentifier and doiCreationStatus\n            updateRecord(\"datasetIdentifier\")(\"\");\n            updateRecord(\"doiCreationStatus\")(\"\");\n\n            // Create a new object with updated properties\n            const updatedRecord = {\n              ...record,\n              datasetIdentifier: \"\",\n              doiCreationStatus: \"\",\n            };\n\n            // Save the updated record to the Firebase database\n            const recordsRef = firebase\n              .database()\n              .ref(region)\n              .child(\"users\")\n              .child(userID)\n              .child(\"records\");\n\n            if (record.recordID) {\n              await recordsRef\n                .child(record.recordID)\n                .update({ datasetIdentifier: updatedRecord.datasetIdentifier, doiCreationStatus: updatedRecord.doiCreationStatus });\n            }\n\n            setDoiGenerated(false);\n          } else {\n            setDoiErrorFlag(true);\n          }\n        })\n        .finally(() => {\n          setLoadingDoiDelete(false);\n        });\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n      setDoiErrorFlag(true);\n      throw err;\n    }\n  }\n\n  useEffect(() => {\n    mounted.current = true;\n    if (debouncedDoiIdValue === '') {\n      updateRecord(\"doiCreationStatus\")('')\n    }\n    else if (debouncedDoiIdValue && regionInfo.datacitePrefix && doiIsValid) {\n      let id = debouncedDoiIdValue\n      if (debouncedDoiIdValue.includes('doi.org/')) {\n        id = debouncedDoiIdValue.split('doi.org/').pop();\n      }\n      getDoiStatus({ doi: id, prefix: regionInfo.datacitePrefix })\n        .then(response => {\n          updateRecord(\"doiCreationStatus\")(response.data)\n        })\n        .catch(err => {\n          console.error(err)\n        });\n    }\n\n    return () => {\n      mounted.current = false;\n    };\n  }, [debouncedDoiIdValue, getDoiStatus, doiIsValid, updateRecord, regionInfo.datacitePrefix])\n\n  return (\n    <div>\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What is the dataset title? Required in English and French.</En>\n            <Fr>\n              Quel est le titre du jeu de donnes? Obligatoire dans les deux\n              langues.\n            </Fr>\n          </I18n>\n          <RequiredMark passes={validateField(record, \"title\")} />\n          <SupplementalText>\n            <I18n>\n              <En>\n                <p>Recommended title includes: What, Where, When.</p>\n                <p>\n                  Title should be precise enough so that the user will not have\n                  to open the dataset to understand its contents. Title should\n                  not have acronyms, special characters, or use specialized\n                  nomenclature. This will appear as the title that is shown for\n                  this dataset in the {regionInfo.catalogueTitle.en}.\n                </p>\n              </En>\n              <Fr>\n                <p>Le titre recommand comprend : Quoi, O, Quand.</p>\n                <p>\n                  Le titre doit tre suffisamment prcis pour que l'utilisateur\n                  n'ait pas  ouvrir le ensemble de donnes pour comprendre son\n                  contenu. Le titre ne doit pas avoir des acronymes, des\n                  caractres spciaux ou utiliser une nomenclature spcialise.\n                  Ceci apparatra comme titre de votre jeu de donnes dans le{\" \"}\n                  {regionInfo.catalogueTitle.fr}.\n                </p>\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n\n        <BilingualTextInput\n          value={record.title}\n          onChange={handleUpdateRecord(\"title\")}\n          disabled={disabled}\n        />\n      </Paper>\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What is the primary language of the dataset?</En>\n            <Fr>Quelle est la langue principale du jeu de donnes?</Fr>\n          </I18n>\n          <RequiredMark passes={validateField(record, \"language\")} />\n        </QuestionText>\n        <SelectInput\n          value={record.language}\n          onChange={handleUpdateRecord(\"language\")}\n          options={[\"en\", \"fr\"]}\n          optionLabels={[\"English\", \"Franais\"]}\n          disabled={disabled}\n        />\n      </Paper>\n\n      {projects.length ? (\n        <Paper style={paperClass}>\n          <QuestionText>\n            <I18n>\n              <En>\n                What are the projects that this record is part of? To add a\n                project, email{\" \"}\n              </En>\n              <Fr>\n                Quels sont les projets dont ce disque fait partie? Pour ajouter\n                un projet, e-mail{\" \"}\n              </Fr>\n            </I18n>\n            <a href={`mailto:${regionInfo.email}`}>{regionInfo.email}</a>.\n          </QuestionText>\n          <CheckBoxList\n            value={record.projects || []}\n            labelSize={6}\n            onChange={updateRecord(\"projects\")}\n            options={projects}\n            optionLabels={projects}\n            disabled={disabled}\n          />\n        </Paper>\n      ) : (\n        <div />\n      )}\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>\n              Enter an abstract or summary for the dataset. Required in both\n              languages.\n            </En>\n            <Fr>Dcrivez votre jeu de donnes.</Fr>\n          </I18n>\n          <RequiredMark passes={validateField(record, \"abstract\")} />\n          <SupplementalText>\n            <I18n>\n              <En>\n                This information will appear as the summary text that is shown\n                for this dataset in the {regionInfo.catalogueTitle.en}. Browsing\n                datasets at <CatalogueLink lang=\"en\" /> can help provide a sense\n                of the type of descriptions that are typically used for this\n                section of the record. As a general rule, this section should be\n                worded with as little jargon as possible to give potential users\n                an understanding of your dataset. Use a maximum of 500 words.\n                For detailed methods please submit supplemental materials with\n                your data.\n                <br />\n                <br />\n                Suggested abstract points -\n                <div>\n                  <ul>\n                    <li>\n                      <b>What</b>- variables that were measured\n                    </li>\n                    <li>\n                      <b>When</b>- temporal coverage of the data, frequency of\n                      the measurements/observations\n                    </li>\n                    <li>\n                      <b>Where</b>- spatial coverage of the data, sampling\n                      sites, sensor tracks, laboratory spaces\n                    </li>\n                    <li>\n                      <b>Why</b>- a high level statement on the outcome this\n                      data is meant to inform\n                    </li>\n                  </ul>\n                </div>\n              </En>\n\n              <Fr>\n                Cette description correspond au rsum de votre jeu de donnes\n                lorsquil sera publi dans le {regionInfo.catalogueTitle.fr}{\" \"}\n                <CatalogueLink lang=\"fr\" />. Pour vous aider  rdiger ce\n                rsum, vous pouvez vous inspirer dautres jeux de donnes dj\n                publis dans le catalogue. Ce champ doit tre compris par tout\n                type dutilisateur, nous vous recommandons un maximum de 500\n                mots, lutilisation dun langage accessible et de limiter\n                lutilisation de vocabulaire de type jargon.\n                <br />\n                <br />\n                Suggestion de points  aborder dans votre rsum:\n                <div>\n                  <ul>\n                    <li>\n                      <b>Quoi</b>: Les variables qui ont t mesures\n                    </li>\n                    <li>\n                      <b>Quand</b>: Couverture temporelle de la donne,\n                      frquence de la mesure/observation\n                    </li>\n                    <li>\n                      <b>O</b>: Couverture spatiale de la donne, nom/lieu des\n                      sites dchantillonnages, dplacement enregistrs dun\n                      capteur, laboratoire, etc.\n                    </li>\n                    <li>\n                      <b>Comment</b>: quipement, procdures, protocoles,\n                      calibration, assurance/contrle de la qualit\n                    </li>\n                    <li>\n                      <b>Qui</b>: Participants, membres du personnel\n                    </li>\n                    <li>\n                      <b>Pourquoi</b>: Quelques lignes pour dcrire le contexte\n                      dans lequel les donnes ont t chantillonnes et comment\n                      elles permettent de rpondre  la problmatique (p. ex:\n                      quelles informations peuvent-elles apporter)\n                    </li>\n                  </ul>\n                </div>\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n\n        <BilingualTextInput\n          value={record.abstract}\n          onChange={handleUpdateRecord(\"abstract\")}\n          disabled={disabled}\n          multiline\n        />\n      </Paper>\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>\n              Please select all the essential ocean variables that are contained\n              in this dataset. Hover over a variable to see its definition.\n            </En>\n            <Fr>\n              Veuillez slectionner toutes les variables ocaniques essentielles\n              contenues dans ce jeu de donnes. Survolez une variable pour voir\n              sa dfinition ou cliquez sur licne <OpenInNew /> pour accder \n              la dfinition complte du Systme dObservatoire Global des Ocans\n              (GOOS).\n            </Fr>\n          </I18n>\n          <RequiredMark passes={validateField(record, \"eov\")} />\n          <SupplementalText>\n            <I18n>\n              <En>If none of these apply you can select Other.</En>\n              <Fr>\n                Si aucune de ces variables ne vous semble pertinente, vous\n                pouvez slectionner  Autre .\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n        {Object.entries(eovCategories).map(([categoryKey, categoryText]) => {\n          const eovsFiltered = eovs\n            .filter((e) => e.category === categoryKey)\n            .sort((a, b) =>\n              a[`label ${languageUpperCase}`].localeCompare(\n                b[`label ${languageUpperCase}`],\n                language\n              )\n            );\n\n          return (\n            <div key={categoryText[language]}>\n              <h4>{categoryText[language]}</h4>\n              <CheckBoxList\n                value={record.eov || []}\n                labelSize={6}\n                onChange={updateRecord(\"eov\")}\n                options={eovsFiltered.map((e) => e.value)}\n                optionLabels={eovsFiltered.map((e) => (\n                  <>\n                    <Tooltip title={e[`definition ${languageUpperCase}`]}>\n                      <span>{e[`label ${languageUpperCase}`]}</span>\n                    </Tooltip>\n                    {e.url && (\n                      <IconButton\n                        onClick={() => {\n                          const win = window.open(e.url, \"_blank\");\n                          win.focus();\n                        }}\n                      >\n                        <Tooltip\n                          title={\n                            <I18n\n                              en=\"Open GOOS definition in new window\"\n                              fr=\"Ouvrir la dfinition GOOS dans une nouvelle fentre\"\n                            />\n                          }\n                        >\n                          <OpenInNew />\n                        </Tooltip>\n                      </IconButton>\n                    )}\n                    {e.emerging && (\n                      <IconButton onClick={() => {}}>\n                        <Tooltip\n                          title={\n                            <I18n\n                              en=\"GOOS emerging EOV\"\n                              fr=\"EOV mergent GOOS\"\n                            />\n                          }\n                        >\n                          <Update />\n                        </Tooltip>\n                      </IconButton>\n                    )}\n                  </>\n                ))}\n                disabled={disabled}\n              />\n            </div>\n          );\n        })}\n      </Paper>\n      <Paper style={paperClass}>\n        <Grid container spacing={3} direction=\"column\">\n          <Grid item xs>\n            <QuestionText>\n              <I18n>\n                <En>\n                  Choose the most specific keywords that apply to your data, or\n                  create your own.\n                </En>\n                <Fr>\n                  Choisissez des mots-cls spcifiques qui sappliquent  vos\n                  donnes ou crez-en des nouveaux.\n                </Fr>\n              </I18n>\n              <RequiredMark passes={validateField(record, \"keywords\")} />\n              <SupplementalText>\n                <I18n>\n                  <En>\n                    <p>\n                      Keywords are an important way to categorize your data that\n                      allow people and other systems to search for datasets that\n                      share some important characteristics.\n                    </p>\n                    <p>\n                      Keywords should include the place name of the closest\n                      community or major geographic location. Ex. Hartley Bay,\n                      Gitgaat Territory, in addition to the closest body of\n                      water, e.g. Douglas Channel.\n                    </p>\n                    <p>Enter one at a time, clicking 'Add' after each.</p>\n                  </En>\n                  <Fr>\n                    <p>\n                      Les mots cls sont un moyen efficace de catgoriser vos\n                      donnes pour permettre aux utilisateurs ou  d'autres\n                      systmes daccder  tous les jeux de donnes partageant\n                      une mme caractristique.\n                    </p>\n                    <p>\n                      Vous pouvez choisir un mot cl prdfini (liste\n                      droulante) en franais puis cliquer sur le bouton de\n                      traduction. Vous pouvez aussi crer votre propre mot cl\n                      en rdigeant un texte libre en anglais ou en franais\n                      (vrifiez toujours si son quivalent existe dans la liste\n                      droulante afin de diminuer le risque dcriture multiple\n                      dun mme mot cl -ex: phoque Vs Phoques-).\n                    </p>\n                    <p>\n                      Entrez un mot-cl  la fois. Cliquez sur  Ajouter \n                      chaque mot saisi.\n                    </p>\n                  </Fr>\n                </I18n>\n              </SupplementalText>\n            </QuestionText>\n          </Grid>\n          <Grid item xs>\n            <KeywordsInput\n              value={record.keywords}\n              onChange={handleUpdateRecord(\"keywords\")}\n              disabled={disabled}\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What is the status of this dataset?</En>\n            <Fr>Quel est l'tat de ce jeu de donnes?</Fr>\n          </I18n>\n          <RequiredMark passes={validateField(record, \"progress\")} />\n\n          <SupplementalText>\n            {Object.values(progressCodes).map(({ title, text }) => (\n              <div style={{ margin: \"10px\" }} key={title[language]}>\n                {`${title[language]}: ${text[language]}`}\n              </div>\n            ))}\n          </SupplementalText>\n        </QuestionText>\n        <SelectInput\n          value={record.progress || \"\"}\n          onChange={handleUpdateRecord(\"progress\")}\n          options={Object.keys(progressCodes)}\n          optionLabels={Object.values(progressCodes).map(\n            ({ title }) => title[language]\n          )}\n          disabled={disabled}\n          fullWidth={false}\n          style={{ width: \"200px\" }}\n        />\n      </Paper>\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What is the start date when data was first collected?</En>\n            <Fr>Inscrivez la date de dbut de votre collecte de donnes.</Fr>\n          </I18n>\n        </QuestionText>\n        <DateInput\n          value={record.dateStart || null}\n          onChange={handleUpdateRecord(\"dateStart\")}\n          disabled={disabled}\n          dateEnd={record.dateEnd || undefined}\n        />\n        <br />\n        <QuestionText>\n          <I18n>\n            <En>\n              What is the end date when data was last collected? Leave blank if\n              data collection is ongoing.\n            </En>\n            <Fr>\n              Inscrivez la date de fin de votre collecte de donnes. Laissez le\n              champs vide si la collecte des donnes toujours est en cours.\n            </Fr>\n          </I18n>\n        </QuestionText>\n        <DateInput\n          value={record.dateEnd || null}\n          onChange={handleUpdateRecord(\"dateEnd\")}\n          disabled={disabled}\n          dateStart={record.dateStart || undefined}\n        />\n      </Paper>\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>\n              What is the date when the data was published? Leave blank if\n              dataset hasn't been published.\n            </En>\n            <Fr>\n              Quelle est la date de premire publication des donnes ? Laissez\n              le champ vide si les donnes n'ont pas t publies.\n            </Fr>\n          </I18n>\n        </QuestionText>\n        <DateInput\n          name=\"datePublished\"\n          value={record.datePublished || null}\n          onChange={handleUpdateRecord(\"datePublished\")}\n          disabled={disabled}\n        />\n      </Paper>\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>The version number of this dataset. For example, 1.1</En>\n            <Fr>\n              Le numro de version de cet ensemble de donnes. Par exemple, 1.1\n            </Fr>\n          </I18n>\n        </QuestionText>\n        <TextField\n          value={record.edition}\n          onChange={handleUpdateRecord(\"edition\")}\n          disabled={disabled}\n          style={{ marginTop: \"10px\" }}\n          fullWidth\n        />\n      </Paper>\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>\n              What is the date when data was revised? Leave blank if dataset\n              hasn't been revised.\n            </En>\n            <Fr>\n              Quelle est la date de la dernire rvision des donnes ? Laissez\n              le champ vide si le jeu de donnes n'a pas t rvis.\n            </Fr>\n          </I18n>\n          <SupplementalText>\n            <I18n>\n              <En>\n                <p>\n                  Please note that this field does not need to be populated or\n                  updated when revisions are made to the metadata, but rather\n                  when a new version of the data file or package becomes\n                  available, i.e. for time-series data.\n                </p>\n              </En>\n              <Fr>\n                <p>\n                  Veuillez noter que ce champ n'a pas besoin d'tre rempli ou\n                  mis  jour lorsque des rvisions sont apportes aux\n                  mtadonnes, mais plutt lorsqu'une nouvelle version du\n                  fichier ou du paquet de donnes devient disponible,\n                  c'est--dire pour les donnes de sries temporelles.\n                </p>\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n        <DateInput\n          name=\"dateRevised\"\n          value={record.dateRevised || null}\n          onChange={handleUpdateRecord(\"dateRevised\")}\n          disabled={disabled}\n        />\n      </Paper>\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What is the DOI for this dataset? Eg,</En>\n            <Fr>Quel est le DOI de ce jeu de donnes ? Par exemple,</Fr>\n          </I18n>{\" \"}\n          https://doi.org/10.0000/0000\n          {showGenerateDoi && (\n            <SupplementalText>\n              <I18n>\n                <En>\n                  <p>\n                    Please save the form before generating a draft DOI.\n                  </p>\n                </En>\n                <Fr>\n                  <p>\n                  Veuillez enregistrer le formulaire avant de gnrer un brouillon de DOI.\n                  </p>\n                </Fr>\n              </I18n>\n            </SupplementalText>\n          )}\n        </QuestionText>\n        {showGenerateDoi && (\n          <Button\n            onClick={handleGenerateDOI}\n            disabled={generateDoiDisabled}\n            style={{ display: \"inline\" }}\n          >\n            <div style={{ display: \"flex\", alignItems: \"center\" }}>\n              {loadingDoi ? (\n                <>\n                  <CircularProgress size={24} style={{ marginRight: \"8px\" }} />\n                  Loading...\n                </>\n              ) : (\n                \"Generate DOI\"\n              )}\n            </div>\n          </Button>\n        )}\n        {showUpdateDoi && (\n          <Button\n            onClick={handleUpdateDraftDOI}\n            disabled={['not found', 'unknown'].includes(record.doiCreationStatus)}\n            style={{ display: 'inline' }}\n          >\n            <div style={{ display: \"flex\", alignItems: \"center\" }}>\n              {loadingDoiUpdate ? (\n                <>\n                    <CircularProgress size={24} style={{ marginRight: \"8px\" }} />\n                    Loading...\n                </>\n              ) : (\n                \"Update DOI\"\n              )}\n            </div>\n          </Button>\n        )}\n        {showDeleteDoi && (\n          <Button\n            onClick={handleDeleteDOI}\n            disabled={record.doiCreationStatus !== 'draft'}\n            style={{ display: \"inline\" }}\n          >\n            <div style={{ display: \"flex\", alignItems: \"center\" }}>\n              {loadingDoiDelete ? (\n                <>\n                  <CircularProgress size={24} style={{ marginRight: \"8px\" }} />\n                  Loading...\n                </>\n              ) : (\n                \"Delete DOI\"\n              )}\n            </div>\n          </Button>\n        )} \n\n        {doiErrorFlag && (\n          <span>\n            <I18n\n              en=\"Error occurred with DOI API\"\n              fr=\"Une erreur s'est produite avec l'API DOI\"\n            />\n          </span>\n        )}\n        {doiUpdateFlag && (\n          <span>\n            <I18n\n              en=\"DOI has been updated\"\n              fr=\"Le DOI a t mis  jour\"\n            />\n          </span>\n        )}\n\n        <TextField\n          style={{ marginTop: \"10px\" }}\n          name=\"datasetIdentifier\"\n          helperText={\n            (doiIsValid ? \"\" : <I18n en=\"Invalid DOI\" fr=\"DOI non valide\" />)\n            || (showDoiStatus && <I18n en={`DOI Status: ${record.doiCreationStatus}`} fr={`Statut DOI: ${record.doiCreationStatus}`} />)\n          }\n          error={!doiIsValid}\n          value={record.datasetIdentifier}\n          onChange={handleUpdateRecord(\"datasetIdentifier\")}\n          disabled={disabled}\n          fullWidth\n        />\n      </Paper>\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>How is the dataset licensed?</En>\n            <Fr>Quelle est la licence de ce jeu de donnes?</Fr>\n          </I18n>\n          <RequiredMark passes={validateField(record, \"license\")} />\n          <SupplementalText>\n            <I18n>\n              <En>\n                <ul>\n                  <li>\n                    <b>\n                      <a\n                        href=\"https://creativecommons.org/licenses/by/4.0/\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        Creative Commons Attribution 4.0 International licence\n                        (CC-BY 4.0)\n                      </a>\n                    </b>{\" \"}\n                    - CIOOS recommended. Allows for open sharing and adaptation\n                    of the data provided that the original creator is\n                    attributed.\n                  </li>\n                  <li>\n                    <b>\n                      <a\n                        href=\"https://creativecommons.org/share-your-work/public-domain/cc0/\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        Creative Commons 0\n                      </a>\n                    </b>{\" \"}\n                    - imposes no restrictions of any kind.\n                  </li>\n                  <li>\n                    <b>\n                      <a\n                        href=\"https://open.canada.ca/en/open-government-licence-canada\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        Open Government Licence - Canada\n                      </a>\n                    </b>{\" \"}\n                    - For datasets made available by Government of Canada\n                    departments and agencies, it is very similar to CC-BY as it\n                    allows for open sharing and adaptation of the data, provided\n                    that the original creator of the data is properly\n                    attributed.\n                  </li>\n                </ul>\n              </En>\n              <Fr>\n                <ul>\n                  <li>\n                    <b>\n                      Licence internationale Creative Commons Attribution 4.0\n                      (CC-BY 4.0){\" \"}\n                    </b>\n                    - Licence recommande par le SIOOC. Les donnes sont\n                    ouvertes, mais la licence exige que le jeu de donnes soit\n                    cit lorsquil est utilis par un autre utilisateur.\n                  </li>\n                  <li>\n                    <b>Creative Commons 0</b> - Nimpose aucune restriction\n                    particulire : le jeu de donnes peut tre utilis sans tre\n                    cit.\n                  </li>\n                  <li>\n                    <b>Licence du gouvernement ouvert - Canada</b> - Pour les\n                    jeux de donnes rendus disponibles par les organisations et\n                    ministres fdraux. Cette licence est similaire  CC-BY 4.0\n                    : les donnes sont ouvertes mais le jeu de donnes doit tre\n                    cit lorsqu'il est utilis par un autre utilisateur.\n                  </li>\n                </ul>\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n        <SelectInput\n          value={record.license}\n          onChange={handleUpdateRecord(\"license\")}\n          optionLabels={licensesSorted.map((l) => (\n            <span>\n              {l.title[language] || l.title.en}\n\n              <Tooltip\n                title={\n                  <I18n\n                    en=\"Open license definition in new window\"\n                    fr=\"Ouvrir la dfinition de licence dans une nouvelle fentre\"\n                  />\n                }\n              >\n                <IconButton\n                  onClick={() => {\n                    const win = window.open(l.url, \"_blank\");\n                    win.focus();\n                  }}\n                >\n                  <OpenInNew />\n                </IconButton>\n              </Tooltip>\n            </span>\n          ))}\n          options={licensesSorted.map((l) => l.code)}\n          disabled={disabled}\n        />\n      </Paper>\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What are the limitations affecting the dataset?</En>\n            <Fr>Quelles sont les limitations affectant le jeu de donnes?</Fr>\n          </I18n>\n          <SupplementalText>\n            <I18n>\n              <En>\n                For example:\n                <i>\n                  <ul>\n                    <li>Not to be used for navigational purposes.</li>\n                    <li>Instrument was not calibrated on day.</li>\n                    <li>Havent applied appropriate QC on the data yet.</li>\n                  </ul>\n                </i>\n              </En>\n              <Fr>\n                Par exemple :\n                <i>\n                  <ul>\n                    <li>Ne pas utiliser  des fins de navigation.</li>\n                    <li>L' instrument n'a pas t talonn.</li>\n                    <li>\n                      Un contrle de qualit na pas t effectu sur les\n                      donnes.\n                    </li>\n                  </ul>\n                </i>\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n        <BilingualTextInput\n          value={record.limitations}\n          onChange={handleUpdateRecord(\"limitations\")}\n          multiline\n          disabled={disabled}\n        />\n      </Paper>\n    </div>\n  );\n};\n\nexport default IdentificationTab;\n","import React, { useState } from \"react\";\nimport { Add, Delete } from \"@material-ui/icons\";\nimport {\n  TextField,\n  Grid,\n  Typography,\n  Button,\n  Paper,\n  List,\n  ListItem,\n  ListItemText,\n} from \"@material-ui/core\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport BilingualTextInput from \"./BilingualTextInput\";\nimport { deepCopy } from \"../../utils/misc\";\n\nimport RequiredMark from \"./RequiredMark\";\n\nconst emptyInstrument = {\n  id: \"\",\n  manufacturer: \"\",\n  version: \"\",\n  type: { en: \"\", fr: \"\" },\n  description: { en: \"\", fr: \"\" },\n};\n\nconst Instruments = ({\n  updateInstruments,\n  instruments = [],\n  disabled,\n  paperClass,\n}) => {\n  const [activeInstrument, setActiveInstrument] = useState(0);\n\n  function addInstrument() {\n    updateInstruments(instruments.concat(deepCopy(emptyInstrument)));\n    setActiveInstrument(instruments.length);\n  }\n  function updateInstrumentField(key) {\n    return (e) => {\n      const instrumentsCopy = [...instruments];\n      instrumentsCopy[activeInstrument][key] = e.target.value;\n      updateInstruments(instrumentsCopy);\n    };\n  }\n  function removeInstrument() {\n    updateInstruments(\n      instruments.filter((e, index) => index !== activeInstrument)\n    );\n    if (instruments.length) setActiveInstrument(instruments.length - 2);\n  }\n\n  const manufacturerLabel = <I18n en=\"Manufacturer\" fr=\"Fabricant\" />;\n  const versionLabel = <I18n en=\"Version\" fr=\"Version\" />;\n  const typeLabel = <I18n en=\"Type\" fr=\"Type\" />;\n  const descriptionLabel = <I18n en=\"Description\" fr=\"Description\" />;\n\n  const instrument = instruments.length > 0 && instruments[activeInstrument];\n\n  return (\n    <Grid container direction=\"row\" spacing={3}>\n      <Grid item xs={3}>\n        <Grid container direction=\"column\" spacing={2}>\n          <Grid item xs>\n            Instruments:\n            <List>\n              {instruments.map((instrumentItem, i) => {\n                return (\n                  <ListItem\n                    key={i}\n                    button\n                    onClick={() => setActiveInstrument(i)}\n                  >\n                    <ListItemText\n                      primary={\n                        <Typography\n                          style={{\n                            fontWeight: activeInstrument === i ? \"bold\" : \"\",\n                          }}\n                        >\n                          {i + 1}. {instrumentItem.id}\n                        </Typography>\n                      }\n                    />\n                  </ListItem>\n                );\n              })}\n            </List>\n          </Grid>\n\n          <Grid item xs>\n            <Button\n              disabled={disabled}\n              startIcon={<Add />}\n              onClick={addInstrument}\n              style={{ height: \"56px\", marginLeft: \"10px\" }}\n            >\n              <I18n>\n                <En>Add instrument</En>\n                <Fr>Ajouter un instrument</Fr>\n              </I18n>\n            </Button>\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item xs>\n        <Grid container direction=\"column\">\n          {instrument && (\n            <Paper style={paperClass}>\n              <Grid container direction=\"column\" spacing={2}>\n                <Grid item xs>\n                  <I18n>\n                    <En>Instrument ID</En>\n                    <Fr>L'ID de l'instrument</Fr>\n                  </I18n>\n                  <RequiredMark passes={instrument.id} />\n                  <TextField\n                    label=\"ID\"\n                    value={instrument.id}\n                    onChange={updateInstrumentField(\"id\")}\n                    fullWidth\n                    disabled={disabled}\n                  />\n                </Grid>\n                <Grid item xs>\n                  <TextField\n                    label={manufacturerLabel}\n                    name=\"manufacturer\"\n                    value={instrument.manufacturer}\n                    onChange={updateInstrumentField(\"manufacturer\")}\n                    fullWidth\n                    disabled={disabled}\n                  />{\" \"}\n                </Grid>\n                <Grid item xs>\n                  <TextField\n                    label={versionLabel}\n                    value={instrument.version}\n                    onChange={updateInstrumentField(\"version\")}\n                    fullWidth\n                    disabled={disabled}\n                  />\n                </Grid>\n                <Grid item xs>\n                  <Typography>\n                    <I18n>\n                      <En>Instrument Type</En>\n                      <Fr>Type d'instrument</Fr>\n                    </I18n>\n                  </Typography>\n                  <BilingualTextInput\n                    label={typeLabel}\n                    value={instrument.type}\n                    onChange={updateInstrumentField(\"type\")}\n                    disabled={disabled}\n                  />\n                </Grid>{\" \"}\n                <Grid item xs>\n                  <Typography>Description</Typography>\n                  <BilingualTextInput\n                    label={descriptionLabel}\n                    value={instrument.description}\n                    onChange={updateInstrumentField(\"description\")}\n                    disabled={disabled}\n                  />\n                </Grid>\n                <Grid item xs>\n                  <Button\n                    startIcon={<Delete />}\n                    disabled={disabled}\n                    onClick={removeInstrument}\n                  >\n                    <I18n>\n                      <En>Remove item</En>\n                      <Fr>Supprimer l'instrument</Fr>\n                    </I18n>\n                  </Button>\n                </Grid>\n              </Grid>\n            </Paper>\n          )}\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\nexport default Instruments;\n","import React from \"react\";\n\nimport { TextField, Grid, Tooltip } from \"@material-ui/core\";\nimport { useParams } from \"react-router-dom\";\nimport { OpenInNew } from \"@material-ui/icons\";\n\nimport BilingualTextInput from \"./BilingualTextInput\";\nimport { QuestionText, SupplementalText, paperClass } from \"./QuestionStyles\";\nimport RequiredMark from \"./RequiredMark\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport { validateField } from \"../../utils/validate\";\nimport SelectInput from \"./SelectInput\";\nimport platforms from \"../../platforms.json\";\n\nconst Platform = ({ record, handleUpdateRecord, disabled }) => {\n  const { language = \"en\" } = useParams();\n\n  const platformsSorted = Object.values(platforms).sort((a, b) =>\n    a[`label_${language}`].localeCompare(b[`label_${language}`], language)\n  );\n\n  return (\n    <div>\n      <Grid item xs style={{ ...paperClass, marginTop: \"-40px\" }}>\n        <QuestionText>\n          <I18n>\n            <En>What type of platform is it?</En>\n            <Fr>De quel type de plateforme s'agit-il ?</Fr>\n          </I18n>\n          <SupplementalText>\n            <I18n>\n              <En>Please select a platform from the </En>\n              <Fr>Veuillez slectionner une plateforme dans la </Fr>\n            </I18n>\n            <a\n              href=\"http://vocab.nerc.ac.uk/collection/L06/current/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              <I18n>\n                <En>SeaVoX Platform Categories (NERC L06 Vocabulary)</En>\n                <Fr>SeaVoX Platform Categories (liste Vocabulaire NERC L06)</Fr>\n              </I18n>\n              <Tooltip\n                title={\n                  <I18n\n                    en=\"Open in new window\"\n                    fr=\"Ouvrir dans une nouvelle fentre\"\n                  />\n                }\n              >\n                <OpenInNew style={{ verticalAlign: \"middle\" }} />\n              </Tooltip>\n            </a>\n\n            <RequiredMark passes={validateField(record, \"platform\")} />\n          </SupplementalText>\n        </QuestionText>\n        <SelectInput\n          value={record.platform}\n          onChange={handleUpdateRecord(\"platform\")}\n          optionLabels={platformsSorted.map((e) => `${e[`label_${language}`]}`)}\n          optionTooltips={platformsSorted.map(\n            (e) => `${e[`definition_${language}`]}`\n          )}\n          options={platformsSorted.map((e) => e.label_en)}\n          disabled={disabled}\n          label={<I18n en=\"Platform\" fr=\"Plateforme\" />}\n          fullWidth={false}\n        />\n      </Grid>\n\n      <Grid item xs style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What is the platform ID or code?</En>\n            <Fr>Quel est l'ID de la plateforme ?</Fr>\n          </I18n>\n          <SupplementalText>\n            <I18n>\n              <En>\n                This is a unique identification of the platform. If the platform\n                is registered with{\" \"}\n                <a\n                  href=\"https://vocab.seadatanet.org/v_bodc_vocab_v2/search.asp?lib=C17\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  ICES\n                </a>\n                , use that identifier\n              </En>\n              <Fr>\n                Il s'agit d'une identification unique de la plateforme. Si la\n                plateforme est enregistre auprs du{\" \"}\n                <a\n                  href=\"https://vocab.seadatanet.org/v_bodc_vocab_v2/search.asp?lib=C17\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  CIEM\n                </a>\n                , utilisez cet identifiant\n              </Fr>\n            </I18n>\n            <RequiredMark passes={validateField(record, \"platformID\")} />\n          </SupplementalText>\n        </QuestionText>\n\n        <TextField\n          label={<I18n en=\"Platform ID\" fr=\"ID de plateforme\" />}\n          value={record.platformID}\n          onChange={handleUpdateRecord(\"platformID\")}\n          fullWidth\n          disabled={disabled}\n        />\n      </Grid>\n\n      <Grid item xs style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>More information about the platform</En>\n            <Fr>Plus d'informations sur la plateforme</Fr>\n          </I18n>\n          <SupplementalText>\n            <I18n>\n              <En>\n                You can also add aditional information about the platform.\n              </En>\n              <Fr>\n                Vous pouvez galement ajouter des informations supplmentaires\n                sur la plateforme.\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n        <BilingualTextInput\n          value={record.platformDescription}\n          onChange={handleUpdateRecord(\"platformDescription\")}\n          multiline\n          disabled={disabled}\n        />\n      </Grid>\n    </div>\n  );\n};\n\nexport default Platform;\n","import React from \"react\";\n\nimport { Paper, Grid, FormControlLabel, Checkbox } from \"@material-ui/core\";\nimport Instruments from \"../FormComponents/Instruments\";\n\nimport { QuestionText, paperClass } from \"../FormComponents/QuestionStyles\";\nimport Platform from \"../FormComponents/Platform\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nconst PlatformTab = ({\n  disabled,\n  record,\n  handleUpdateRecord,\n  updateRecord,\n}) => {\n  const noPlatform = record.noPlatform && record.noPlatform !== \"false\";\n\n  return (\n    <div>\n      <Paper style={paperClass}>\n        <Grid container direction=\"column\" spacing={0}>\n          <Grid item xs style={paperClass}>\n            <QuestionText>\n              <I18n>\n                <En>\n                  A platform is anything used in data collection that has\n                  instrument(s) attached to it. Eg:\n                  <ul>\n                    <li>Glider</li>\n                    <li>Ship</li>\n                    <li>Buoy</li>\n                    <li>Satellite</li>\n                    <li>ROV</li>\n                    <li>Mooring</li>\n                  </ul>\n                  It is strongly encouraged to fill out platform information. If\n                  there is no platform, you can enter instruments at the bottom\n                  of the page.\n                </En>\n                <Fr>\n                  Une plateforme dsigne tout objet sur lequel un ou plusieurs\n                  instruments sont attachs et utiliss dans la collecte des\n                  donnes. Par exemple :\n                  <ul>\n                    <li>\n                      <i>Glider</i>\n                    </li>\n                    <li>Navire</li>\n                    <li>Boue</li>\n                    <li>Satellite</li>\n                    <li>ROV</li>\n                    <li>Amarrage</li>\n                  </ul>\n                  S'il n'y a pas de plateforme, vous pouvez entrer des\n                  informations sur les instruments au bas de la page. Sinon,\n                  vous devez dcrire le plus prcisment possible la plateforme\n                  utilise dans la collecte de donnes.\n                </Fr>\n              </I18n>\n            </QuestionText>\n\n            <FormControlLabel\n              disabled={disabled}\n              control={\n                <Checkbox\n                  name=\"noPlatform\"\n                  checked={noPlatform}\n                  onChange={(e) => {\n                    const { checked } = e.target;\n\n                    updateRecord(\"noPlatform\")(checked);\n                  }}\n                />\n              }\n              label={\n                <I18n>\n                  <En>This dataset doesn't have a platform</En>\n                  <Fr>Ce jeu de donnes n'a pas de plateforme</Fr>\n                </I18n>\n              }\n            />\n          </Grid>\n\n          <Grid item xs style={paperClass}>\n            {!noPlatform ? (\n              <>\n                <Platform\n                  record={record}\n                  handleUpdateRecord={handleUpdateRecord}\n                  disabled={disabled}\n                />\n              </>\n            ) : (\n              <QuestionText>\n                <I18n>\n                  <En>You can still enter an instrument without a platform</En>\n                  <Fr>\n                    Vous pouvez toujours entrer dans un instrument sans\n                    plateforme\n                  </Fr>\n                </I18n>\n              </QuestionText>\n            )}\n\n            <Instruments\n              instruments={record.instruments}\n              updateInstruments={updateRecord(\"instruments\")}\n              disabled={disabled}\n              paperClass={paperClass}\n              noPlatform={noPlatform}\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n    </div>\n  );\n};\nexport default PlatformTab;\n","/* eslint-disable no-case-declarations */\n/* eslint-disable no-underscore-dangle */\nimport React, { useState } from \"react\";\n\nimport { TextField, Grid, Typography } from \"@material-ui/core\";\nimport L from \"leaflet\";\nimport {\n  Map,\n  TileLayer,\n  FeatureGroup,\n  withLeaflet,\n  Polygon as LeafletPolygon,\n  Rectangle as LeafletRectangle,\n} from \"react-leaflet\";\nimport { EditControl } from \"react-leaflet-draw\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"leaflet-draw/dist/leaflet.draw.css\";\nimport { I18n, En, Fr } from \"../I18n\";\n\nimport { QuestionText, SupplementalText } from \"./QuestionStyles\";\nimport { validateField } from \"../../utils/validate\";\nimport RequiredMark from \"./RequiredMark\";\n\nconst MapSelect = ({ updateMap, mapData = {}, disabled, record }) => {\n  // On map clear?\n  function handleMapClear() {\n    const emptySpatial = {\n      north: \"\",\n      south: \"\",\n      east: \"\",\n      west: \"\",\n      polygon: \"\",\n    };\n\n    updateMap(emptySpatial);\n  }\n\n  const [editableFG, setEditableFG] = useState(null);\n  const [, setLayerError] = useState(null);\n\n  const coordTest = /-?\\d+\\.?\\d+/;\n  const polyTest = /-?\\d+\\.?\\d+,\\s*-?\\d+\\.?\\d+\\s*?/g;\n\n  function clearExtraLayers(drawnItems) {\n    // From https://stackoverflow.com/questions/61073568/delete-layer-before-creating-a-new-one-with-react-leaflet-draw-in-leaflet\n    // Only allow one box on the map at a time\n    // if the number of layers is bigger than 1 then delete the first\n    if (Object.keys(drawnItems).length > 1) {\n      Object.keys(drawnItems).forEach((layerid) => {\n        const existingLayers = Object.keys(editableFG.leafletElement._layers)\n          .length;\n\n        if (existingLayers === 1) return;\n\n        const layer = drawnItems[layerid];\n\n        editableFG.leafletElement.removeLayer(layer);\n      });\n    }\n  }\n  // update a mapData property using an event\n  function handleChange(key) {\n    return (e) => {\n      const drawnItems = editableFG.leafletElement._layers;\n      clearExtraLayers(drawnItems);\n\n      const newData = { ...mapData, [key]: e.target.value };\n\n      updateMap(newData);\n    };\n  }\n  // update the polygon property using an event\n  function handleChangePoly(e) {\n    const drawnItems = editableFG.leafletElement._layers;\n    clearExtraLayers(drawnItems);\n\n    const newData = { ...mapData, polygon: e.target.value, north: '', south: '', east: '', west: '' }\n    try {\n      const bounds = L.latLngBounds(parsePolyString(e.target.value))\n      const { lat: north, lng: east } = bounds.getNorthEast();\n      const { lat: south, lng: west } = bounds.getSouthWest();\n\n      newData.north = limitDecimals(north);\n      newData.south = limitDecimals(south);\n      newData.east = limitDecimals(east);\n      newData.west = limitDecimals(west);\n    } catch (ignore) {\n      // ignore bounds errors as a missing or invalid polygon string should not take down the app\n    }\n\n    updateMap(newData);\n  }\n\n  function limitDecimals(x) {\n    return Number.parseFloat(x).toPrecision(4);\n  }\n\n  function parsePolyString(polygonList) {\n    let coordList = [...polygonList.matchAll(polyTest)].map((match) => {\n      return match[0];\n    });\n\n    try {\n      coordList = coordList.map((point) => {\n        return point.split(\",\").map(Number);\n      });\n    } catch (error) {\n      setLayerError({ error });\n    }\n\n    return coordList;\n  }\n\n  const hasBoundingBox = (\n    test_n = mapData.north,\n    test_s = mapData.south,\n    test_e = mapData.east,\n    test_w = mapData.west\n  ) => {\n    const test =\n      coordTest.test(test_n) &&\n      coordTest.test(test_s) &&\n      coordTest.test(test_e) &&\n      coordTest.test(test_w);\n\n    return test;\n  };\n\n  const hasPolygon = (test_string = mapData.polygon) => {\n    return polyTest.test(test_string);\n  };\n\n  const onCreated = (e) => {\n    const { layer, layerType } = e;\n\n    // remove any existing shapes\n    const drawnItems = editableFG.leafletElement._layers;\n    clearExtraLayers(drawnItems);\n\n    switch (layerType) {\n      case \"polygon\": {\n        const points = layer.getLatLngs()[0];\n        const polygonStrings = points.map(\n          ({ lat, lng }) => `${limitDecimals(lat)},${limitDecimals(lng)}`\n        );\n        const polygon = polygonStrings.concat(polygonStrings[0]).join(\" \");\n\n        const polybounds = layer.getBounds();\n\n        let { lat: north, lng: east } = polybounds.getNorthEast();\n        let { lat: south, lng: west } = polybounds.getSouthWest();\n\n        north = limitDecimals(north);\n        south = limitDecimals(south);\n        east = limitDecimals(east);\n        west = limitDecimals(west);\n\n        updateMap({ polygon, north, south, east, west });\n      }\n        break;\n\n      default: // Assume rectangle\n      case \"rectangle\": {\n        const bounds = layer.getBounds();\n\n        let { lat: north, lng: east } = bounds.getNorthEast();\n        let { lat: south, lng: west } = bounds.getSouthWest();\n\n        north = limitDecimals(north);\n        south = limitDecimals(south);\n        east = limitDecimals(east);\n        west = limitDecimals(west);\n\n        const newValue = { north, south, east, west };\n        updateMap(newValue);\n      }\n    }\n  };\n\n  const onFeatureGroupReady = (reactFGref) => {\n    // store the featureGroup ref for future access to content\n    setEditableFG(reactFGref);\n  };\n  L.EditToolbar.Delete.include({\n    enable() {\n      // eslint-disable-next-line react/no-this-in-sfc\n      this.options.featureGroup.clearLayers();\n      handleMapClear();\n    },\n  });\n\n  const bboxIsDrawn = Boolean(\n    mapData.north || mapData.south || mapData.east || mapData.west\n  );\n\n  const polyIsDrawn = Boolean(\n    mapData.polygon\n  );\n\n  const fieldsAreEmpty = !bboxIsDrawn && !mapData.polygon;\n\n  return (\n    <div>\n      <Map\n        style={{ width: \"100%\", height: \"55vh\" }}\n        center={[50, -100]}\n        zoom={3}\n\n        // whenReady={loadExistingExtent}\n      >\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        <FeatureGroup\n          ref={(featureGroupRef) => {\n            onFeatureGroupReady(featureGroupRef);\n          }}\n        >\n          {disabled === false && (\n            <EditControl\n              position=\"topleft\"\n              // onEdited={onEditPath}\n              onCreated={onCreated}\n              onMapClear={handleMapClear}\n              draw={{\n                marker: false,\n                circle: false,\n                polyline: false,\n                circlemarker: false,\n                polygon: true,\n              }}\n              edit={{\n                edit: false,\n              }}\n            />\n          )}\n\n          {hasPolygon() && (\n            <LeafletPolygon positions={parsePolyString(mapData.polygon)} />\n          )}\n\n          {/* do not draw the bounding box if we are creating a polygon */}\n          {hasBoundingBox() && !hasPolygon() && (\n            <LeafletRectangle\n              bounds={[\n                [mapData.north, mapData.east],\n                [mapData.south, mapData.west],\n              ]}\n            />\n          )}\n        </FeatureGroup>\n      </Map>\n      <br />\n      <QuestionText>\n        <I18n>\n          <En>Bounding Box Coordinates</En>\n          <Fr>Coordonnes de dlimitation - Est, Ouest, Nord, Sud</Fr>\n        </I18n>\n        {((bboxIsDrawn && !polyIsDrawn) || fieldsAreEmpty) && (\n          <RequiredMark passes={validateField(record, \"map\")} />\n        )}\n\n        <SupplementalText>\n          <I18n>\n            <En>\n              If you are providing a bounding box, please provide the\n              coordinates in decimal degrees (eg 58.66) and not in decimal\n              minutes seconds.\n            </En>\n            <Fr>\n              Si vous fournissez des coordonnes de dlimitation, veuillez les\n              fournir en <b>degrs dcimaux</b>.\n            </Fr>\n          </I18n>\n        </SupplementalText>\n      </QuestionText>\n      <Grid container direction=\"row\" spacing={3}>\n        <Grid item xs={2}>\n          <TextField\n            label={<I18n en=\"North\" fr=\"Nord\" />}\n            value={mapData.north || \"\"}\n            inputProps={{ inputMode: \"numeric\", pattern: \"[0-9]*\" }}\n            onChange={handleChange(\"north\")}\n            type=\"number\"\n            disabled={disabled || Boolean(mapData.polygon)}\n          />\n        </Grid>\n        <Grid item xs={2}>\n          <TextField\n            label={<I18n en=\"South\" fr=\"Sud\" />}\n            value={mapData.south || \"\"}\n            onChange={handleChange(\"south\")}\n            type=\"number\"\n            disabled={disabled || Boolean(mapData.polygon)}\n          />\n        </Grid>\n        <Grid item xs={2}>\n          <TextField\n            label={<I18n en=\"East\" fr=\"Est\" />}\n            value={mapData.east || \"\"}\n            onChange={handleChange(\"east\")}\n            type=\"number\"\n            disabled={disabled || Boolean(mapData.polygon)}\n          />\n        </Grid>\n        <Grid item xs={2}>\n          <TextField\n            value={mapData.west || \"\"}\n            label={<I18n en=\"West\" fr=\"Ouest\" />}\n            onChange={handleChange(\"west\")}\n            type=\"number\"\n            disabled={disabled || Boolean(mapData.polygon)}\n          />\n        </Grid>\n      </Grid>\n\n      <Typography variant=\"h6\" style={{ margin: \"20px\", marginLeft: \"20%\" }}>\n        <I18n>\n          <En>OR</En>\n          <Fr>Ou</Fr>\n        </I18n>\n      </Typography>\n\n      <QuestionText>\n        <I18n>\n          <En>Polygon coordinates</En>\n          <Fr>Coordonnes du/des polygone(s)</Fr>\n        </I18n>\n        {(polyIsDrawn || fieldsAreEmpty) && (\n          <RequiredMark passes={validateField(record, \"map\")} />\n        )}\n        <SupplementalText>\n          <I18n>\n            <En>\n              If you are providing polygon coordinates, they must start and end\n              with the same point. Eg,\n            </En>\n            <Fr>\n              Doivent commencer et se terminer par le mme point. Par exemple,\n            </Fr>\n          </I18n>{\" \"}\n          48,-128 56,-133 56,-147 48,-128\n        </SupplementalText>\n      </QuestionText>\n      <TextField\n        value={mapData.polygon || \"\"}\n        onChange={handleChangePoly}\n        type=\"text\"\n        fullWidth\n        disabled={disabled || (bboxIsDrawn && !polyIsDrawn)}\n      />\n    </div>\n  );\n};\n\nexport default withLeaflet(MapSelect);\n","import { Paper, TextField, Grid, Tooltip, IconButton } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport { OpenInNew } from \"@material-ui/icons\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport RequiredMark from \"../FormComponents/RequiredMark\";\n\nimport MapSelect from \"../FormComponents/MapSelect\";\n\nimport SelectInput from \"../FormComponents/SelectInput\";\nimport { depthDirections } from \"../../isoCodeLists\";\n\nimport {\n  QuestionText,\n  SupplementalText,\n  paperClass,\n} from \"../FormComponents/QuestionStyles\";\nimport { validateField } from \"../../utils/validate\";\n\nconst OpenEPSGDefn = ({ url }) => {\n  return (\n    <IconButton\n      onClick={() => {\n        const win = window.open(url, \"_blank\");\n        win.focus();\n      }}\n    >\n      <Tooltip\n        title={\n          <I18n\n            en=\"Open EPSG definition in new window\"\n            fr=\"Ouvrir la dfinition EPSG dans une nouvelle fentre\"\n          />\n        }\n      >\n        <OpenInNew />\n      </Tooltip>\n    </IconButton>\n  );\n};\nconst SpatialTab = ({ disabled, record, handleUpdateRecord, updateRecord }) => {\n  const { language } = useParams();\n\n  return (\n    <Grid>\n      <Paper style={paperClass}>\n        <QuestionText style={{ paddingBottom: \"15px\" }}>\n          <I18n>\n            <En>What is the spatial extent of the dataset?</En>\n            <Fr>Quelle est l'tendue gographique du jeu de donnes?</Fr>\n          </I18n>\n\n          <SupplementalText>\n            <div>\n              <I18n>\n                <En>\n                  You can draw a bounding box or polygon for the dataset using\n                  the Polygon or Box buttons at the left side of them form.\n                  Alternatively you can enter them using the fields below.\n                  Either a bounding box or a Polygon is required.\n                </En>\n                <Fr>\n                  Vous pouvez tracer un cadre ou un polygone pour situer\n                  gographiquement votre jeu de donnes. Vous pouvez aussi\n                  localiser laire gographique couverte par votre jeu de\n                  donnes en inscrivant les coordonnes gographiques (degrs\n                  dcimaux) dans les champs apparaissant sous la carte. Cette\n                  section doit obligatoirement tre complte.\n                </Fr>\n              </I18n>\n            </div>\n            <br />\n            <div>\n              <I18n>\n                <En>\n                  Define the geographical area using the tool that meets the\n                  geographic distribution of your data. Broadly distributed data\n                  in the open ocean might be well served by a bounding box.\n                  Tightly clustered coastal data may benefit from a polygon that\n                  does not include terrain or unsampled area.\n                </En>\n                <Fr>\n                  Dfinissez la zone gographique  l'aide de l'outil qui\n                  correspond  la distribution gographique de vos donnes. Les\n                  donnes largement distribues en haute mer peuvent tre bien\n                  desservies par un cadre englobant. Les donnes ctires\n                  troitement regroupes peuvent bnficier d'un polygone qui\n                  n'inclut pas le terrain ou la zone non chantillonne.\n                </Fr>\n              </I18n>\n            </div>\n          </SupplementalText>\n        </QuestionText>\n        <MapSelect\n          mapData={record.map}\n          updateMap={updateRecord(\"map\")}\n          handleUpdateMap={updateRecord(\"map\")}\n          disabled={disabled}\n          record={record}\n        />\n      </Paper>\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What is the vertical extent of the dataset in meters?</En>\n            <Fr>Quelle est l'tendue verticale du jeu de donnes en mtres?</Fr>\n          </I18n>\n          <RequiredMark\n            passes={\n              validateField(record, \"verticalExtentDirection\") &&\n              validateField(record, \"verticalExtentMin\") &&\n              validateField(record, \"verticalExtentMax\")\n            }\n          />\n\n          <SupplementalText>\n            <div>\n              <I18n>\n                <En>\n                  This captures the minimum and maximum depths (or height from\n                  sea floor) where the instrument recorded data.\n                </En>\n\n                <Fr>\n                  Cela permet de capturer les profondeurs minimales et maximales\n                  (ou la hauteur du fond marin) o l'instrument a enregistr des\n                  donnes.\n                </Fr>\n              </I18n>\n            </div>\n\n            <div style={{ paddingTop: \"5px\" }}>\n              <I18n>\n                <En>\n                  Depth positive: Depth is recorded with positive values (i.e. a\n                  maximum value of 150m implies 150m below the water surface).\n                </En>\n                <Fr>\n                  Profondeur positive: La profondeur est enregistre avec des\n                  valeurs positives (cest--dire quune valeur maximale de 150\n                  m indique que les enregistrements ont t effectus  un\n                  maximum de 150 m au-dessous de la surface).\n                </Fr>\n              </I18n>\n              <OpenEPSGDefn url=\"https://epsg.io/5831\" />\n            </div>\n            <div>\n              <I18n>\n                <En>\n                  Height Positive: Height is the elevation from water surface\n                  (i.e. a maximum value of 150m implies 150m above the water\n                  surface).\n                </En>\n                <Fr>\n                  Hauteur positive: La hauteur est l'altitude par rapport  la\n                  surface de l'eau (c'est--dire qu'une valeur maximale de 150 m\n                  implique 150 m au-dessus de la surface de l'eau).\n                </Fr>\n              </I18n>\n              <OpenEPSGDefn url=\"https://epsg.io/5829\" />\n            </div>\n          </SupplementalText>\n        </QuestionText>\n        <Grid\n          container\n          direction=\"row\"\n          justifyContent=\"flex-start\"\n          alignItems=\"flex-start\"\n          spacing={4}\n        >\n          <Grid item xs={5}>\n            <SelectInput\n              value={record.verticalExtentDirection || \"\"}\n              onChange={handleUpdateRecord(\"verticalExtentDirection\")}\n              options={Object.keys(depthDirections)}\n              optionLabels={Object.values(depthDirections).map(\n                (e) => e[language]\n              )}\n              disabled={disabled}\n            />\n          </Grid>\n          <Grid item xs={2}>\n            <TextField\n              value={record.verticalExtentMin}\n              onChange={handleUpdateRecord(\"verticalExtentMin\")}\n              label=\"Min\"\n              fullWidth\n              type=\"number\"\n              disabled={disabled}\n            />\n          </Grid>\n          <Grid item xs={2}>\n            <TextField\n              value={record.verticalExtentMax}\n              onChange={handleUpdateRecord(\"verticalExtentMax\")}\n              label=\"Max\"\n              fullWidth\n              type=\"number\"\n              disabled={disabled}\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n    </Grid>\n  );\n};\n\nexport default SpatialTab;\n","const tabs = {\n  // Submit section\n  start: { en: \"Start\", fr: \"Accueil\" },\n  dataID: { en: \"Data Identification\", fr: \"Identification des donnes\" },\n  spatial: { en: \"Spatial\", fr: \"Spatial\" },\n  contacts: { en: \"Contacts\", fr: \"Contacts\" },\n  resources: { en: \"Resources\", fr: \"Ressources\" },\n  platform: { en: \"Platform\", fr: \"Plateforme\" },\n  platformInstruments: {\n    en: \"Platform - instruments\",\n    fr: \"Plateforme - instruments\",\n  },\n};\nexport default tabs;\n","import { useParams } from \"react-router-dom\";\n\nimport regions from \"../../regions\";\n\nfunction GetRegionInfo() {\n  const { region } = useParams();\n  return regions[region];\n}\n\nexport default GetRegionInfo;\n","import React, { useState } from \"react\";\n\nimport {\n  Paper,\n  Grid,\n  List,\n  ListItem,\n  ListItemText,\n  Typography,\n  Button,\n  CircularProgress,\n} from \"@material-ui/core\";\n\nimport { useParams } from \"react-router-dom\";\n\nimport { paperClass } from \"../FormComponents/QuestionStyles\";\n\nimport { En, Fr, I18n } from \"../I18n\";\nimport { getErrorsByTab, recordIsValid } from \"../../utils/validate\";\nimport tabs from \"../../utils/tabs\";\n\nimport GetRegionInfo from \"../FormComponents/Regions\";\n\nconst SubmitTab = ({ record, submitRecord }) => {\n  const [isSubmitting, setSubmitting] = useState(false);\n\n  const { language } = useParams();\n\n  const validationErrors = getErrorsByTab(record);\n  const submitted = record.status === \"submitted\";\n  const regionInfo = GetRegionInfo();\n\n  return (\n    <Paper style={paperClass}>\n      <Grid container direction=\"column\" spacing={3}>\n        <Grid item xs>\n          <Typography>\n            <I18n>\n              <En>\n                Thank-you for completing this form. The information will be\n                reviewed and a {regionInfo.title.en} staff member will contact\n                you to request more information or provide an update on when\n                your dataset will be available through the{\" \"}\n                {regionInfo.catalogueTitle.en}. Your information will not be\n                published before you are contacted. If you have any questions or\n                would like to follow up on the status of your record, please\n                contact\n              </En>\n              <Fr>\n                Merci d'avoir rempli ce formulaire. L'information sera valide\n                par un membre du personnel {regionInfo.titleFrPossessive}. Cette\n                personne pourrait vous contacter pour obtenir plus\n                d'informations ou pour vous indiquer quand votre jeu de donnes\n                sera disponible dans notre {regionInfo.catalogueTitle.fr}. Vos\n                informations ne seront pas publies avant d'obtenir votre\n                approbation. Si vous avez des questions ou si vous dsirez\n                effectuer un suivi concernant l'tat de votre soumission,\n                veuillez contacte\n              </Fr>\n            </I18n>{\" \"}\n            <a href={`mailto:${regionInfo.email}`}>{regionInfo.email}</a>.\n          </Typography>\n        </Grid>\n        {submitted ? (\n          <Grid item xs>\n            <Typography>\n              <I18n>\n                <En>\n                  Thank you for your submission. A reviewer has been notified.\n                  You will receive an email when the record is published. You\n                  are still able to edit this record by saving it, until it is\n                  published.\n                </En>\n                <Fr>\n                  Merci pour votre soumission. Un examinateur a t avis. Vous\n                  recevrez un e-mail lors de la publication de l'enregistrement.\n                  Vous pouvez toujours modifier cet enregistrement en\n                  l'enregistrant, jusqu' ce qu'il soit publi.\n                </Fr>\n              </I18n>\n            </Typography>\n          </Grid>\n        ) : (\n          <>\n            {recordIsValid(record) ? (\n              <>\n                <Grid item xs>\n                  <Typography>\n                    <I18n>\n                      <En>\n                        You have completed all of the required fields, your\n                        record can be submitted now.\n                      </En>\n                      <Fr>\n                        Vous avez rempli tous les champs obligatoires, vous\n                        pouvez maintenant soumettre votre formulaire.\n                      </Fr>\n                    </I18n>\n                  </Typography>\n                </Grid>\n                <Grid item xs>\n                  {isSubmitting ? (\n                    <CircularProgress />\n                  ) : (\n                    <Button\n                      onClick={() => {\n                        setSubmitting(true);\n                        submitRecord().then(() => {\n                          setSubmitting(false);\n                        });\n                      }}\n                      disabled={submitted}\n                    >\n                      <I18n>\n                        <En>Submit</En>\n                        <Fr>Soumettre</Fr>\n                      </I18n>\n                    </Button>\n                  )}\n                </Grid>\n              </>\n            ) : (\n              <>\n                <Grid item xs>\n                  <Typography>\n                    <I18n>\n                      <En>\n                        You haven't completed all of the required fields. You\n                        will need to address the list below before submitting.\n                      </En>\n                      <Fr>\n                        Vous n'avez pas rempli tous les champs obligatoires.\n                        Veuillez complter les champs identifis ci-dessous\n                        avant de soumettre votre demande.\n                      </Fr>\n                    </I18n>\n                  </Typography>\n                </Grid>\n\n                <Grid item xs>\n                  {Object.keys(validationErrors).map((tab) => (\n                    <div key={tab}>\n                      <Typography variant=\"h6\">\n                        {tabs[tab][language]}\n                      </Typography>\n                      <List>\n                        {validationErrors[tab].map(\n                          ({ [language]: error }, i) => (\n                            <ListItem key={i}>\n                              <ListItemText primary={error} />\n                            </ListItem>\n                          )\n                        )}\n                      </List>\n                    </div>\n                  ))}\n                </Grid>\n              </>\n            )}\n          </>\n        )}\n      </Grid>\n    </Paper>\n  );\n};\nexport default SubmitTab;\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React from \"react\";\nimport {\n  Box,\n  CircularProgress,\n  Grid,\n  Tab,\n  Tabs,\n  Fab,\n  Tooltip,\n  Typography,\n  LinearProgress,\n} from \"@material-ui/core\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Save } from \"@material-ui/icons\";\nimport { withRouter } from \"react-router-dom\";\nimport FormClassTemplate from \"./FormClassTemplate\";\nimport { I18n, En, Fr } from \"../I18n\";\nimport StatusChip from \"../FormComponents/StatusChip\";\nimport LastEdited from \"../FormComponents/LastEdited\";\nimport NotFound from \"./NotFound\";\n\nimport SimpleModal from \"../FormComponents/SimpleModal\";\nimport StartTab from \"../Tabs/StartTab\";\nimport ContactTab from \"../Tabs/ContactTab\";\nimport ResourcesTab from \"../Tabs/ResourcesTab\";\nimport IdentificationTab from \"../Tabs/IdentificationTab\";\nimport PlatformTab from \"../Tabs/PlatformTab\";\nimport SpatialTab from \"../Tabs/SpatialTab\";\nimport SubmitTab from \"../Tabs/SubmitTab\";\n\nimport { auth } from \"../../auth\";\nimport firebase from \"../../firebase\";\nimport { firebaseToJSObject, trimStringsInObject } from \"../../utils/misc\";\nimport {\n  submitRecord,\n  getRegionProjects,\n  standardizeRecord,\n} from \"../../utils/firebaseRecordFunctions\";\nimport { UserContext } from \"../../providers/UserProvider\";\nimport { percentValid } from \"../../utils/validate\";\nimport tabs from \"../../utils/tabs\";\n\nimport { getBlankRecord } from \"../../utils/blankRecord\";\n\nconst LinearProgressWithLabel = ({ value }) => (\n  <Tooltip\n    title={\n      <I18n\n        en=\"Percentage of required fields filled in\"\n        fr=\"Pourcentage de champs obligatoires remplis\"\n      />\n    }\n  >\n    <Box display=\"flex\" width=\"90%\" style={{ margin: \"auto\" }}>\n      <Box width=\"100%\" mr={1}>\n        <LinearProgress\n          variant=\"determinate\"\n          value={value}\n          style={{ marginLeft: \"-30px\" }}\n        />\n      </Box>\n      <Box minWidth={35}>\n        <Typography variant=\"body2\" color=\"textSecondary\">{`${Math.round(\n          value\n        )}%`}</Typography>\n      </Box>\n    </Box>\n  </Tooltip>\n);\n\nfunction TabPanel({ children, value, index, ...other }) {\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box>{children}</Box>}\n    </div>\n  );\n}\n\nconst styles = (theme) => ({\n  tabRoot: {\n    minWidth: \"115px\",\n  },\n  fab: {\n    position: \"fixed\",\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n});\nclass MetadataForm extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      projects: [],\n      record: getBlankRecord(),\n\n      // contacts saved by user (not the ones saved in the record)\n      // kept in firebase object format instead of array\n      userContacts: {},\n\n      // UI state:\n      loading: false,\n      tabIndex: \"start\",\n\n      // whether the 'save' icon button is greyed out or not\n      saveDisabled: true,\n\n      highlightMissingRequireFields: false,\n\n      editorInfo: { email: \"\", displayName: \"\" },\n      loggedInUserCanEditRecord: false,\n      saveIncompleteRecordModalOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    const { match } = this.props;\n    this.setState({ loading: true });\n\n    this.unsubscribe = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        const { region, recordID } = match.params;\n        const isNewRecord = match.url.endsWith(\"new\");\n        // could be viewer or reviewer\n        const loggedInUserID = user.uid;\n        const recordUserID = isNewRecord ? loggedInUserID : match.params.userID;\n        const loggedInUserOwnsRecord = loggedInUserID === recordUserID;\n        const { isReviewer } = this.context;\n\n        this.setState({ projects: await getRegionProjects(region) });\n        let editorInfo;\n        // get info of the person openeing the record\n        const editorDataRef = firebase\n          .database()\n          .ref(region)\n          .child(\"users\")\n          .child(loggedInUserID);\n        const userinfoRef = editorDataRef.child(\"userinfo\");\n        userinfoRef.on(\"value\", (userinfo) => {\n          editorInfo = userinfo.toJSON();\n\n          this.setState({ editorInfo });\n        });\n        this.listenerRefs.push(userinfoRef);\n\n        // get info of the original author of record\n        const userDataRef = firebase\n          .database()\n          .ref(region)\n          .child(\"users\")\n          .child(recordUserID);\n\n        // get contacts\n        const editorContactsRef = editorDataRef.child(\"contacts\");\n\n        editorContactsRef.on(\"value\", (contactsFB) => {\n          const userContacts = contactsFB.toJSON();\n          Object.entries(userContacts || {}).forEach(([k, v]) => {\n            // eslint-disable-next-line no-param-reassign\n            v.contactID = k;\n          });\n          this.setState({ userContacts });\n        });\n        this.listenerRefs.push(editorContactsRef);\n\n        // if recordID is set then the user is editing an existing record\n        if (isNewRecord) {\n          this.setState({ loading: false, loggedInUserCanEditRecord: true });\n        } else {\n          const ref = userDataRef.child(\"records\").child(recordID);\n          ref.on(\"value\", (recordFireBase) => {\n            // Record not found, eg a bad link\n            const recordFireBaseObj = recordFireBase.toJSON();\n            if (!recordFireBaseObj) {\n              this.setState({ loading: false, record: null });\n\n              return;\n            }\n            const record = firebaseToJSObject(recordFireBaseObj);\n\n            const loggedInUserCanEditRecord =\n              isReviewer || loggedInUserOwnsRecord;\n\n            this.setState({\n              record: standardizeRecord(record, null, null, recordID),\n              loggedInUserCanEditRecord,\n            });\n\n            this.setState({ loading: false });\n          });\n          this.listenerRefs.push(ref);\n        }\n      }\n    });\n\n\n\n  }\n\n  toggleModal = (modalName, state, key = \"\", userID) => {\n    this.setState({ modalKey: key, [modalName]: state, modalUserID: userID });\n  };\n\n  // genereric handler for updating state, used by most form components\n  // generic event handler\n  handleUpdateRecord = (key) => (event) => {\n    const { value } = event.target;\n    const changes = { [key]: value };\n\n    this.setState(({ record }) => ({\n      record: { ...record, ...changes },\n      saveDisabled: false,\n    }));\n  };\n\n  // a second genereric handler components that dont use onChange\n  // generic state updater creator\n  updateRecord = (key) => (value) => {\n    const changes = { [key]: value };\n\n    this.setState(({ record }) => ({\n      record: { ...record, ...changes },\n      saveDisabled: false,\n    }));\n  };\n\n  saveUpdateContact(contact) {\n    const { contactID } = contact;\n    const { match } = this.props;\n\n    const { region } = match.params;\n\n    const contactsRef = firebase\n      .database()\n      .ref(region)\n      .child(\"users\")\n      .child(auth.currentUser.uid)\n      .child(\"contacts\");\n\n    // existing contact\n    if (contactID) {\n      contactsRef.child(contactID).update(contact);\n      return contactID;\n    }\n    // new contact\n\n    return contactsRef.push(contact).getKey();\n  }\n\n  async handleSubmitRecord() {\n    const { match } = this.props;\n    const { region, userID } = match.params;\n    const isNewRecord = match.url.endsWith(\"new\");\n    const { record } = this.state;\n    // Bit of logic here to decide if this is a user submitting their own form\n    // or a reviewer submitting it\n    const loggedInUserID = auth.currentUser.uid;\n    const recordUserID = isNewRecord ? loggedInUserID : userID;\n\n    const recordID = await this.handleSaveClick();\n    return submitRecord(region, recordUserID, recordID, \"submitted\", record);\n  }\n\n  // userOKedRecordDemotion - user has clicked that they understand that their record will be\n  // changed from published to draft since the record is incomplete\n  async handleSaveClick(userOKedRecordDemotion = false) {\n    const { match, history } = this.props;\n    const { language, region } = match.params;\n\n    const userID = match.params.userID || auth.currentUser.uid;\n\n    const recordsRef = firebase\n      .database()\n      .ref(region)\n      .child(\"users\")\n      .child(userID)\n      .child(\"records\");\n\n    // remove userContacts since they get saved elsewhere\n    const { editorInfo } = this.state;\n\n    // trim whitespace from all srtings in record\n    const record = trimStringsInObject(this.state.record);\n\n    // record doesn't have required fieds filled\n    const recordIsComplete = percentValid(record) === 1;\n\n    if (record.status === \"published\" && !recordIsComplete) {\n      // if userOKedRecordDemotion is set, user has acknowledge that record will be demoted to draft\n      if (userOKedRecordDemotion) {\n        record.status = \"\";\n      } else {\n        // display warning modal\n        this.toggleModal(\"saveIncompleteRecordModalOpen\", true);\n\n        return;\n      }\n    }\n    // created is really \"last updated\"\n    record.created = new Date().toISOString();\n\n    // having userID down here makes it easier to transfer records\n    record.userID = userID;\n\n    record.lastEditedBy = editorInfo;\n    let recordID;\n    if (record.recordID) {\n      recordID = record.recordID;\n      await recordsRef\n        .child(record.recordID)\n        // using blankRecord here in case there are new fields that the old record didnt have\n        .update({ ...getBlankRecord(), ...record });\n    } else {\n      // new record\n      const newNode = await recordsRef.push(record);\n\n      // cheesy workaround to the issue of push() not saving dates\n      await newNode.update(record);\n      recordID = newNode.key;\n      this.setState({\n        record: { ...record, recordID },\n      });\n      history.push(`/${language}/${region}/${userID}/${recordID}`);\n    }\n\n    // regnerate XML on save\n    if ([\"submitted\", \"published\"].includes(record.status)) {\n      const { regenerateXMLforRecord } = this.context;\n\n      const path = `${region}/${userID}/${recordID}`;\n      const { status, filename } = record;\n\n      regenerateXMLforRecord({ path, status, filename });\n    }\n\n    this.setState({ saveDisabled: true });\n    // if (match.url.endsWith(\"new\")) {\n    // set the URL so its shareable\n    // }\n    // eslint-disable-next-line consistent-return\n    return recordID;\n  }\n\n  render() {\n    const { match } = this.props;\n    const { language } = match.params;\n    const { isReviewer } = this.context;\n\n    const {\n      userContacts,\n      tabIndex,\n      record,\n      saveDisabled,\n      loading,\n      highlightMissingRequireFields,\n      loggedInUserCanEditRecord,\n      saveIncompleteRecordModalOpen,\n      projects,\n    } = this.state;\n\n    if (!record) {\n      return <NotFound />;\n    }\n    const { classes } = this.props;\n\n    const disabled = !loggedInUserCanEditRecord;\n\n    const tabProps = {\n      highlightMissingRequireFields,\n      disabled,\n      record,\n      handleUpdateRecord: this.handleUpdateRecord,\n      updateRecord: this.updateRecord,\n    };\n    const percentValidInt = Math.round(percentValid(record) * 100);\n    return loading ? (\n      <CircularProgress />\n    ) : (\n      <Grid\n        container\n        direction=\"column\"\n        justifyContent=\"space-between\"\n        alignItems=\"stretch\"\n        spacing={3}\n      >\n        <SimpleModal\n          open={saveIncompleteRecordModalOpen}\n          modalQuestion={\n            <I18n\n              en=\"Record is missing required fields. Saving will demote it to draft. Do you want to do this?\"\n              fr=\"Il manque des champs obligatoires dans l'enregistrement. L'enregistrement le rtrogradera en brouillon. Est-ce que tu veux le faire ?\"\n            />\n          }\n          onClose={() => {\n            this.toggleModal(\"saveIncompleteRecordModalOpen\", false);\n          }}\n          onAccept={() => {\n            this.handleSaveClick(true);\n            this.toggleModal(\"saveIncompleteRecordModalOpen\", false);\n          }}\n        />\n\n        <Fab\n          color=\"primary\"\n          aria-label=\"add\"\n          className={classes.fab}\n          disabled={\n            saveDisabled || !(record.title.en || record.title.fr) || disabled\n          }\n          onClick={() => this.handleSaveClick()}\n        >\n          <Tooltip\n            placement=\"right-start\"\n            title={\n              saveDisabled\n                ? \"Dataset needs a title before it can be saved\"\n                : \"Save record.\"\n            }\n          >\n            <span>\n              <Save />\n            </span>\n          </Tooltip>\n        </Fab>\n        <Grid container spacing={2} direction=\"row\" alignItems=\"center\">\n          <Grid item xs>\n            <Tabs\n              scrollButtons=\"auto\"\n              variant=\"fullWidth\"\n              value={tabIndex}\n              onChange={(e, newValue) => this.setState({ tabIndex: newValue })}\n              aria-label=\"simple tabs example\"\n            >\n              <Tab\n                fullWidth\n                classes={{ root: classes.tabRoot }}\n                label={tabs.start[language]}\n                value=\"start\"\n              />\n              <Tab\n                fullWidth\n                classes={{ root: classes.tabRoot }}\n                label={tabs.dataID[language]}\n                value=\"identification\"\n              />\n              <Tab\n                fullWidth\n                classes={{ root: classes.tabRoot }}\n                label={tabs.spatial[language]}\n                value=\"spatial\"\n              />\n              <Tab\n                fullWidth\n                classes={{ root: classes.tabRoot }}\n                label=\"Contact\"\n                value=\"contact\"\n              />\n              <Tab\n                fullWidth\n                classes={{ root: classes.tabRoot }}\n                label={tabs.resources[language]}\n                value=\"distribution\"\n              />\n              <Tab\n                fullWidth\n                classes={{ root: classes.tabRoot }}\n                label={tabs.platform[language]}\n                value=\"platform\"\n              />\n              {loggedInUserCanEditRecord && (\n                <Tab\n                  fullWidth\n                  classes={{ root: classes.tabRoot }}\n                  label={<I18n en=\"Submit\" fr=\"Soumettre\" />}\n                  value=\"submit\"\n                  disabled={\n                    record.status === \"submitted\" ||\n                    record.status === \"published\"\n                  }\n                />\n              )}\n            </Tabs>\n            <div style={{ marginTop: \"10px\", textAlign: \"center\" }}>\n              <Typography variant=\"h5\">\n                {(language && record.title?.[language]) || (\n                  <I18n en=\"New Record\" fr=\"Nouvel enregistrement\" />\n                )}{\" \"}\n                <StatusChip status={record.status} />\n              </Typography>\n              <Typography component=\"div\">\n                <i>\n                  <LastEdited dateStr={record.created} />\n                  {record.lastEditedBy?.displayName && (\n                    <>\n                      <I18n>\n                        <En>by </En>\n                        <Fr>Par </Fr>\n                      </I18n>\n                      {record.lastEditedBy.displayName}{\" \"}\n                      {isReviewer && record.lastEditedBy.email}\n                    </>\n                  )}\n                </i>\n                <LinearProgressWithLabel value={percentValidInt} />\n              </Typography>\n            </div>\n          </Grid>\n        </Grid>\n        <TabPanel value={tabIndex} index=\"start\">\n          <StartTab {...tabProps} />\n        </TabPanel>\n        <TabPanel value={tabIndex} index=\"identification\">\n          <IdentificationTab {...tabProps} projects={projects} />\n        </TabPanel>\n        <TabPanel value={tabIndex} index=\"spatial\">\n          <SpatialTab {...tabProps} />\n        </TabPanel>\n        <TabPanel value={tabIndex} index=\"platform\">\n          <PlatformTab {...tabProps} />\n        </TabPanel>\n        <TabPanel value={tabIndex} index=\"distribution\">\n          <ResourcesTab {...tabProps} />\n        </TabPanel>\n\n        <TabPanel value={tabIndex} index=\"submit\">\n          <SubmitTab\n            {...tabProps}\n            submitRecord={() => this.handleSubmitRecord()}\n          />\n        </TabPanel>\n\n        <TabPanel value={tabIndex} index=\"contact\">\n          {/* userContacts are the ones the user has saved, not necessarily part of the record */}\n          <ContactTab\n            userContacts={userContacts}\n            saveToContacts={(c) => this.saveUpdateContact(c)}\n            {...tabProps}\n          />\n        </TabPanel>\n      </Grid>\n    );\n  }\n}\nMetadataForm.contextType = UserContext;\nexport default withStyles(styles)(withRouter(MetadataForm));\n","import React, { Component } from \"react\";\nimport * as Sentry from \"@sentry/react\";\nimport { I18n, En, Fr } from \"../I18n\";\n\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error(error, errorInfo);\n    Sentry.captureException(error);\n  }\n\n  render() {\n    const { hasError } = this.state;\n    const { children } = this.props;\n    if (hasError) {\n      return (\n        <div>\n          <h1>\n            <I18n>\n              <En>Something went wrong!</En>\n              <Fr>Un problme s'est produit!</Fr>\n            </I18n>\n          </h1>\n          <h5>\n            <I18n>\n              <En>\n                The developers have been notified and are working to resolve the\n                issue.\n              </En>\n              <Fr>\n                Les dveloppeurs ont t avertis et s'efforent de rsoudre le\n                problme.\n              </Fr>\n            </I18n>\n          </h5>\n        </div>\n      );\n    }\n    return children;\n  }\n}\n\nexport default ErrorBoundary;\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { Grid, Button } from \"@material-ui/core\";\nimport { Save } from \"@material-ui/icons\";\nimport firebase from \"../../firebase\";\nimport { auth } from \"../../auth\";\n\nimport { En, Fr, I18n } from \"../I18n\";\n\nimport ContactEditor from \"./ContactEditor\";\nimport FormClassTemplate from \"../Pages/FormClassTemplate\";\n\nclass EditContact extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n    this.state = {\n      orgRor: \"\",\n      orgName: \"\",\n      orgEmail: \"\",\n      orgURL: \"\",\n      orgAdress: \"\",\n      orgCity: \"\",\n      orgCountry: \"\",\n      // ind = individual\n      indOrcid: \"\",\n      indPosition: \"\",\n      indEmail: \"\",\n      givenNames: \"\",\n      lastName: \"\",\n    };\n    const { match } = props;\n\n    const { region } = match.params;\n\n    this.contactsRef = firebase\n      .database()\n      .ref(region)\n      .child(\"users\")\n      .child(auth.currentUser.uid)\n      .child(\"contacts\");\n  }\n\n  async componentDidMount() {\n    const { match } = this.props;\n\n    const { contactID } = match.params;\n\n    if (auth.currentUser && contactID) {\n      this.setState({ contactID });\n      const contactRef = this.contactsRef.child(contactID);\n      contactRef.on(\"value\", (contact) => this.setState(contact.toJSON()));\n      this.listenerRefs.push(contactRef);\n    }\n  }\n\n  handleChange(key) {\n    return (event) => {\n      this.setState({ [key]: event.target.value });\n    };\n  }\n\n  handleClear(key) {\n    this.setState({ [key]: \"\" });\n  }\n\n  updateOrgFromRor() {\n    return (payload) => {\n      this.setState({\n        orgRor: payload.id,\n        orgName: payload.name,\n        orgURL: payload.links.find(() => true) || \"\",\n        orgCity: payload.addresses.find(() => true).city || \"\",\n        orgCountry: payload.country.country_name,\n      });\n    };\n  }\n\n  updateIndFromOrcid() {\n    return (payload) => {\n      const { name, emails } = payload.person;\n      const indEmail = emails.email.length > 0 ? emails.email[0].email : \"\";\n      const lastName = name[\"family-name\"] ? name[\"family-name\"].value : \"\";\n\n      this.setState({\n        indOrcid: payload[\"orcid-identifier\"].uri,\n        givenNames: name[\"given-names\"].value,\n        indEmail,\n        lastName,\n      });\n    };\n  }\n\n  handleCancelClick() {\n    const { match, history } = this.props;\n    const { language, region } = match.params;\n\n    history.push(`/${language}/${region}/contacts`);\n  }\n\n  // Create or update contact\n  async handleSubmitClick() {\n    const { history, match } = this.props;\n\n    const { region, language, contactID } = match.params;\n\n    // update\n    if (contactID) this.contactsRef.child(contactID).update(this.state);\n    // create\n    else this.contactsRef.push(this.state);\n\n    history.push(`/${language}/${region}/contacts`);\n  }\n\n  render() {\n    const { orgName, givenNames, lastName } = this.state;\n    const isFilledEnoughToSave = orgName || (givenNames && lastName);\n    return (\n      <Grid container direction=\"column\" spacing={2}>\n        <Grid item xs>\n          <ContactEditor\n            value={this.state}\n            handleClear={(key) => this.handleClear(key)}\n            updateContactEvent={(key) => this.handleChange(key)}\n            updateContactRor={this.updateOrgFromRor()}\n            updateContactOrcid={this.updateIndFromOrcid()}\n          />\n        </Grid>\n\n        <Grid item xs>\n          <Button\n            startIcon={<Save />}\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => this.handleSubmitClick()}\n            disabled={!isFilledEnoughToSave}\n          >\n            <I18n>\n              <En>Save</En>\n              <Fr>Enregistrer</Fr>\n            </I18n>\n          </Button>\n\n          <Button\n            style={{ marginLeft: \"10px\" }}\n            variant=\"contained\"\n            color=\"secondary\"\n            onClick={() => this.handleCancelClick()}\n          >\n            <I18n>\n              <En>Cancel</En>\n              <Fr>Annuler</Fr>\n            </I18n>\n          </Button>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default withRouter(EditContact);\n","import React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Modal, TextField } from \"@material-ui/core\";\nimport { validateEmail } from \"../../utils/validate\";\n\nimport { En, Fr, I18n } from \"../I18n\";\n\nfunction rand() {\n  return Math.round(Math.random() * 20) - 10;\n}\n\nfunction getModalStyle() {\n  const top = 50 + rand();\n  const left = 50 + rand();\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: \"absolute\",\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nexport default function TransferModal({\n  open,\n  onClose,\n  onAccept,\n  email,\n  setEmail,\n}) {\n  // result of the transger\n  const [transferResult, setTransferResult] = useState(true);\n  const [isTransferring, setIsTransferring] = useState(false);\n  const classes = useStyles();\n\n  // getModalStyle is not a pure function, we roll the style only on the first render\n  const [modalStyle] = React.useState(getModalStyle);\n\n  const emailIsValid = validateEmail(email);\n\n  return (\n    <div>\n      <Modal\n        open={open}\n        onClose={onClose}\n        aria-labelledby=\"simple-modal-title\"\n        aria-describedby=\"simple-modal-description\"\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <h2 id=\"simple-modal-title\">\n            <I18n>\n              <En>Transfer Record</En>\n              <Fr>Enregistrement de transfert</Fr>\n            </I18n>\n          </h2>\n          {isTransferring ? (\n            <h3>\n              <I18n>\n                <En>Transferring...</En>\n                <Fr>Transfert en cours...</Fr>\n              </I18n>\n            </h3>\n          ) : (\n            <div>\n              {!transferResult && (\n                <h3>\n                  <I18n>\n                    <En>User {email} not found</En>\n                    <Fr>L'utilisateur {email} n'a pas t trouv</Fr>\n                  </I18n>\n                </h3>\n              )}\n\n              <div>\n                <I18n>\n                  <En>\n                    Enter the email address of the user to transfer this record\n                    to. The user must have logged into this region at least\n                    once:\n                  </En>\n                  <Fr>\n                    Entrez l'adresse e-mail de l'utilisateur vers lequel\n                    transfrer cet enregistrement. L'utilisateur doit s'tre\n                    connect  cette rgion au moins une fois:\n                  </Fr>\n                </I18n>\n              </div>\n\n              {/* naterosenstock@gmail.com */}\n              <div>\n                <TextField\n                  helperText={\n                    !emailIsValid && (\n                      <I18n en=\"Invalid email\" fr=\"E-mail non valide\" />\n                    )\n                  }\n                  error={!emailIsValid}\n                  value={email}\n                  onChange={(e) => {\n                    setTransferResult(true);\n                    setEmail(e.target.value);\n                  }}\n                  fullWidth\n                />\n              </div>\n\n              <button\n                type=\"button\"\n                disabled={!email || !emailIsValid || isTransferring}\n                onClick={async () => {\n                  setIsTransferring(true);\n                  const transferResult = await onAccept();\n\n                  setTransferResult(transferResult);\n                  setIsTransferring(false);\n                  if (transferResult) onClose();\n                }}\n              >\n                <I18n>\n                  <En>Transfer</En>\n                  <Fr>Transfert</Fr>\n                </I18n>\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setTransferResult(true);\n                  onClose();\n                }}\n              >\n                <I18n>\n                  <En>Cancel</En>\n                  <Fr>Annuler</Fr>\n                </I18n>\n              </button>\n            </div>\n          )}\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","/* eslint-disable react/jsx-no-bind */\nimport React from \"react\";\nimport {\n  Typography,\n  List,\n  Grid,\n  CircularProgress,\n  Checkbox,\n  TextField,\n  Paper,\n} from \"@material-ui/core\";\n\nimport Accordion from \"@material-ui/core/Accordion\";\nimport AccordionSummary from \"@material-ui/core/AccordionSummary\";\nimport AccordionDetails from \"@material-ui/core/AccordionDetails\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport { QuestionText } from \"../FormComponents/QuestionStyles\";\n\nimport firebase from \"../../firebase\";\nimport { auth } from \"../../auth\";\nimport { Fr, En, I18n } from \"../I18n\";\n\nimport CheckBoxList from \"../FormComponents/CheckBoxList\";\n\nimport SimpleModal from \"../FormComponents/SimpleModal\";\nimport TransferModal from \"../FormComponents/TransferModal\";\nimport MetadataRecordListItem from \"../FormComponents/MetadataRecordListItem\";\n\nimport {\n  loadRegionRecords,\n  transferRecord,\n  deleteRecord,\n  submitRecord,\n  cloneRecord,\n} from \"../../utils/firebaseRecordFunctions\";\nimport { unique } from \"../../utils/misc\";\nimport FormClassTemplate from \"./FormClassTemplate\";\n\nconst RecordItem = ({\n  record,\n  language,\n  editRecord,\n  toggleModal,\n  handleCloneRecord,\n}) => {\n  const commonProps = {\n    record,\n    language,\n    onViewEditClick: () => editRecord(record.recordID, record.userinfo.userID),\n    onCloneClick: () =>\n      handleCloneRecord(record.recordID, record.userinfo.userID),\n    onDeleteClick: () =>\n      toggleModal(\n        \"deleteModalOpen\",\n        true,\n        record.recordID,\n        record.userinfo.userID\n      ),\n    onTransferClick: () =>\n      toggleModal(\n        \"transferModalOpen\",\n        true,\n        record.recordID,\n        record.userinfo.userID\n      ),\n    showAuthor: true,\n    showTransferButton: true,\n    showDeleteAction: true,\n    showCloneAction: true,\n  };\n\n  const DraftRecordItem = () => {\n    return (\n      <MetadataRecordListItem\n        onSubmitClick={() => {\n          return toggleModal(\n            \"submitModalOpen\",\n            true,\n            record.recordID,\n            record.userinfo.userID\n          );\n        }}\n        showSubmitAction\n        showEditAction\n        // eslint-disable-next-line react/jsx-props-no-spreading\n        {...commonProps}\n        showPercentComplete\n      />\n    );\n  };\n  const SubmittedRecordItem = () => (\n    <MetadataRecordListItem\n      onSubmitClick={() =>\n        toggleModal(\n          \"publishModalOpen\",\n          true,\n          record.recordID,\n          record.userinfo.userID\n        )\n      }\n      onUnSubmitClick={() =>\n        toggleModal(\n          \"unSubmitModalOpen\",\n          true,\n          record.recordID,\n          record.userinfo.userID\n        )\n      }\n      showPublishAction\n      showUnSubmitAction\n      showEditAction\n      showPercentComplete\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      {...commonProps}\n    />\n  );\n  const PublishedRecordItem = () => {\n    return (\n      <MetadataRecordListItem\n        onUnPublishClick={() =>\n          toggleModal(\n            \"unPublishModalOpen\",\n            true,\n            record.recordID,\n            record.userinfo.userID\n          )\n        }\n        showUnPublishAction\n        showViewAction\n        showPercentComplete\n        // eslint-disable-next-line react/jsx-props-no-spreading\n        {...commonProps}\n      />\n    );\n  };\n\n  if (record.status === \"submitted\") return <SubmittedRecordItem />;\n  if (record.status === \"published\") return <PublishedRecordItem />;\n  return <DraftRecordItem />;\n};\n\nclass Reviewer extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n    this.state = {\n      users: [],\n      deleteModalOpen: false,\n      publishModalOpen: false,\n      unPublishModalOpen: false,\n      unSubmitModalOpen: false,\n      submitModalOpen: false,\n      transferModalOpen: false,\n      modalKey: \"\",\n      modalUserID: \"\",\n      loading: false,\n      showRecordTypes: [\"submitted\", \"published\"],\n      showUsers: [],\n      records: [],\n      recordsFilter: \"\",\n      recordCountsByStatus: {},\n    };\n  }\n\n  async componentDidMount() {\n    this.setState({ loading: true });\n    const { match } = this.props;\n    const { region } = match.params;\n\n    this.unsubscribe = auth.onAuthStateChanged((authUser) => {\n      if (authUser) {\n        const usersRef = firebase.database().ref(region).child(\"users\");\n        usersRef.on(\"value\", (regionUsersRaw) => {\n          const records = loadRegionRecords(regionUsersRaw, [\n            \"\",\n            \"submitted\",\n            \"published\",\n          ]);\n\n          this.setState({ records, loading: false });\n\n          const users = unique(records.map((record) => record.userinfo.email));\n\n          this.setState({\n            records,\n            loading: false,\n            users,\n            showUsers: users,\n          });\n        });\n        this.listenerRefs.push(usersRef);\n      }\n    });\n  }\n\n  editRecord(key, userID) {\n    const { history } = this.props;\n    const { language, region } = this.props.match.params;\n    history.push(`/${language}/${region}/${userID}/${key}`);\n  }\n\n  async handleTransferRecord(recordID, userID) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    return transferRecord(this.state.transferEmail, recordID, userID, region);\n  }\n\n  // user ID is that of the record owner, not the editor\n  handleCloneRecord(recordID, sourceUserID) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser) {\n      cloneRecord(recordID, sourceUserID, auth.currentUser.uid, region);\n    }\n  }\n\n  async handleSubmitRecord(key, userID, status) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (key && userID) {\n      this.setState({ loading: true });\n      await submitRecord(region, userID, key, status);\n      this.setState({ loading: false });\n    }\n  }\n\n  async deleteRecord(key, userID) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (key && userID) {\n      this.setState({ loading: true });\n      await deleteRecord(region, userID, key);\n      this.setState({ loading: false });\n    }\n  }\n\n  toggleModal(modalName, state, key = \"\", userID) {\n    this.setState({ modalKey: key, [modalName]: state, modalUserID: userID });\n  }\n\n  render() {\n    const {\n      records,\n      recordsFilter,\n      showRecordTypes,\n      showUsers,\n      deleteModalOpen,\n      transferModalOpen,\n      transferEmail,\n      transferUserNotFound,\n      modalKey,\n      modalUserID,\n      unPublishModalOpen,\n      publishModalOpen,\n      unSubmitModalOpen,\n      submitModalOpen,\n      loading,\n      users,\n    } = this.state;\n\n    const { match } = this.props;\n    const { language } = match.params;\n\n    const recordTypeOptions = [\"\", \"submitted\", \"published\"];\n\n    // sort records - drafts then submitted then published\n    let recordsToShow = records\n      .filter((record) => showUsers.includes(record.userinfo.email))\n      .sort((a, b) => a.created < b.created);\n\n    // the text search\n    if (recordsFilter) {\n      recordsToShow = recordsToShow.filter((record) => {\n        const recordText = JSON.stringify([\n          record.title || {},\n          record.abstract || {},\n        ]).toUpperCase();\n        return recordText.includes(recordsFilter.toUpperCase());\n      });\n    }\n\n    const recordCountsByStatus = {\n      draft: (recordsToShow.filter((record) => record.status === \"\") || [])\n        .length,\n      submitted: (\n        recordsToShow.filter((record) => record.status === \"submitted\") || []\n      ).length,\n      published: (\n        recordsToShow.filter((record) => record.status === \"published\") || []\n      ).length,\n    };\n\n    recordsToShow = recordsToShow.filter((record) =>\n      showRecordTypes.includes(record.status)\n    );\n\n    recordsToShow = recordsToShow.sort((a, b) => {\n      return (\n        showRecordTypes.indexOf(a.status) > showRecordTypes.indexOf(b.status)\n      );\n    });\n\n    const recordStatusTranslate = {\n      draft: { en: \"Draft\", fr: \"Brouillon\" },\n      submitted: { en: \"Submitted\", fr: \"Soumis\" },\n      published: { en: \"Published\", fr: \"Publi\" },\n    };\n    const selectedText = language === \"fr\" ? \"slectionns\" : \"selected\";\n    return (\n      <Grid\n        container\n        direction=\"column\"\n        justifyContent=\"space-between\"\n        alignItems=\"stretch\"\n        spacing={3}\n      >\n        <TransferModal\n          open={transferModalOpen}\n          onClose={() => {\n            this.toggleModal(\"transferModalOpen\", false);\n            this.setState({ transferEmail: \"\" });\n          }}\n          onAccept={() => this.handleTransferRecord(modalKey, modalUserID)}\n          transferUserNotFound={transferUserNotFound}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n          email={transferEmail}\n          setEmail={(v) => this.setState({ transferEmail: v })}\n        />\n        <SimpleModal\n          open={deleteModalOpen}\n          onClose={() => this.toggleModal(\"deleteModalOpen\", false)}\n          onAccept={() => this.deleteRecord(modalKey, modalUserID)}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        />\n        <SimpleModal\n          open={submitModalOpen}\n          onClose={() => this.toggleModal(\"submitModalOpen\", false)}\n          onAccept={() =>\n            this.handleSubmitRecord(modalKey, modalUserID, \"submitted\")\n          }\n          aria-labelledby=\"simple-modal-title\"\n        />\n        <SimpleModal\n          open={publishModalOpen}\n          onClose={() => this.toggleModal(\"publishModalOpen\", false)}\n          onAccept={() =>\n            this.handleSubmitRecord(modalKey, modalUserID, \"published\")\n          }\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        />\n        <SimpleModal\n          open={unPublishModalOpen}\n          onClose={() => this.toggleModal(\"unPublishModalOpen\", false)}\n          onAccept={() =>\n            this.handleSubmitRecord(modalKey, modalUserID, \"submitted\")\n          }\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        />\n        <SimpleModal\n          open={unSubmitModalOpen}\n          onClose={() => this.toggleModal(\"unSubmitModalOpen\", false)}\n          onAccept={() => this.handleSubmitRecord(modalKey, modalUserID, \"\")}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        />\n        <Grid item xs>\n          <Typography variant=\"h5\">\n            <I18n>\n              <En>Review submissions</En>\n              <Fr>Examen des soumissions</Fr>\n            </I18n>\n          </Typography>\n        </Grid>\n        {loading ? (\n          <CircularProgress />\n        ) : (\n          <>\n            <Paper\n              style={{\n                padding: \"10px\",\n                margin: \"10px\",\n                width: \"100%\",\n              }}\n            >\n              <QuestionText>\n                <En>Filters</En>\n                <Fr>Filtres</Fr>\n              </QuestionText>\n              <Grid container direction=\"column\" spacing={2}>\n                <Grid item xs>\n                  <CheckBoxList\n                    value={showRecordTypes}\n                    onChange={(e) => {\n                      this.setState({ showRecordTypes: e });\n                    }}\n                    options={recordTypeOptions}\n                    optionLabels={[\"draft\", \"submitted\", \"published\"].map(\n                      (status) =>\n                        `${recordStatusTranslate[status][language]} (${recordCountsByStatus[status]})`\n                    )}\n                  />\n                </Grid>\n                <Grid item xs>\n                  <Accordion>\n                    <AccordionSummary\n                      expandIcon={<ExpandMoreIcon />}\n                      aria-controls=\"panel2a-content\"\n                      id=\"panel2a-header\"\n                    >\n                      <Typography>\n                        {showUsers.length === users.length ? (\n                          <I18n\n                            en=\"Users (All users selected)\"\n                            fr=\"Utilisateurs (Tous les utilisateurs)\"\n                          />\n                        ) : (\n                          <I18n\n                            en={`Users (${showUsers.length}  ${selectedText})`}\n                            fr={`Utilisateurs (${showUsers.length}  ${selectedText})`}\n                          />\n                        )}\n                      </Typography>\n                    </AccordionSummary>\n                    <AccordionDetails>\n                      <Grid container direction=\"column\">\n                        <Grid item xs>\n                          <En>Select All / None</En>\n                          <Fr>Tout slectionner/Aucun</Fr>\n\n                          <Checkbox\n                            label=\"Show All / None\"\n                            onChange={(e) => {\n                              this.setState({\n                                showUsers: e.target.checked ? users : [],\n                              });\n                            }}\n                          />\n                        </Grid>\n                        <Grid item xs>\n                          <CheckBoxList\n                            value={showUsers}\n                            onChange={(e) => {\n                              this.setState({ showUsers: e });\n                            }}\n                            options={users}\n                            labelSize={null}\n                          />\n                        </Grid>\n                      </Grid>\n                    </AccordionDetails>\n                  </Accordion>\n                </Grid>\n                <Grid item xs>\n                  <TextField\n                    fullWidth\n                    onChange={(e) => {\n                      this.setState({ recordsFilter: e.target.value });\n                    }}\n                    label={\n                      <I18n\n                        en=\"Search title and abstract\"\n                        fr=\"Rechercher le titre et le rsum\"\n                      />\n                    }\n                  />\n                </Grid>\n              </Grid>\n            </Paper>\n            {recordsToShow.length ? (\n              <>\n                <Grid container direction=\"column\">\n                  <Grid item xs>\n                    <Typography>\n                      <I18n>\n                        <En>\n                          These are the submissions we have received from all\n                          users that have not yet been reviewed. To accept a\n                          record, click the 'Publish' button.\n                        </En>\n                        <Fr>\n                          Ce sont les soumissions que nous avons reues de tous\n                          les utilisateurs qui n'ont pas encore t examines.\n                          Pour accepter un enregistrement, cliquez sur le bouton\n                           Publier .\n                        </Fr>\n                      </I18n>\n                    </Typography>\n                  </Grid>\n                  <Grid item xs>\n                    <List>\n                      {recordsToShow.map((record) => (\n                        <RecordItem\n                          key={record.recordID}\n                          record={record}\n                          // eslint-disable-next-line react/jsx-no-bind\n                          toggleModal={this.toggleModal.bind(this)}\n                          editRecord={this.editRecord.bind(this)}\n                          handleCloneRecord={this.handleCloneRecord.bind(this)}\n                        />\n                      ))}\n                    </List>\n                  </Grid>\n                </Grid>\n              </>\n            ) : (\n              <Grid container direction=\"column\">\n                <Grid item xs>\n                  <Typography>\n                    <I18n>\n                      <En>There are no records waiting to be reviewed.</En>\n                      <Fr>Aucun dossier n'attend d'tre examin.</Fr>\n                    </I18n>\n                  </Typography>\n                </Grid>\n              </Grid>\n            )}\n          </>\n        )}\n      </Grid>\n    );\n  }\n}\n\nexport default Reviewer;\n","import React from \"react\";\nimport {\n  Typography,\n  Button,\n  CircularProgress,\n  TextField,\n  Grid,\n} from \"@material-ui/core\";\nimport { Save } from \"@material-ui/icons\";\n\nimport firebase from \"../../firebase\";\nimport { getRegionProjects } from \"../../utils/firebaseRecordFunctions\";\nimport { auth } from \"../../auth\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport FormClassTemplate from \"./FormClassTemplate\";\n\nimport { unique } from \"../../utils/misc\";\n\nconst cleanArr = (arr) => unique(arr.map((e) => e.trim()).filter((e) => e));\n\nclass Admin extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // array of strings which are email addresses or reviewers, admins\n      admins: [],\n      projects: [],\n      reviewers: [],\n      loading: false,\n    };\n  }\n\n  async componentDidMount() {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    this.setState({ loading: true });\n\n    this.unsubscribe = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        const regionRef = firebase.database().ref(region);\n        const permissionsRef = regionRef.child(\"permissions\");\n        const projects = await getRegionProjects(region);\n        permissionsRef.on(\"value\", (permissionsFirebase) => {\n          const permissions = permissionsFirebase.toJSON();\n\n          // const projects = permissions.projects.split(\",\");\n          const admins = permissions.admins.split(\",\");\n          const reviewers = permissions.reviewers.split(\",\");\n\n          this.setState({\n            projects,\n            admins,\n            reviewers,\n            loading: false,\n          });\n        });\n        this.listenerRefs.push(permissionsRef);\n      }\n    });\n  }\n\n  save() {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    const { reviewers, admins, projects } = this.state;\n\n    if (auth.currentUser) {\n      const regionRef = firebase.database().ref(region);\n      const permissionsRef = regionRef.child(\"permissions\");\n      const projectsRef = regionRef.child(\"projects\");\n\n      permissionsRef.child(\"admins\").set(cleanArr(admins).join());\n\n      projectsRef.set(cleanArr(projects));\n      permissionsRef.child(\"reviewers\").set(cleanArr(reviewers).join());\n    }\n  }\n\n  render() {\n    const { loading, reviewers, admins, projects } = this.state;\n    return (\n      <Grid container direction=\"column\" spacing={3}>\n        <Grid item xs>\n          <Typography variant=\"h5\">\n            <I18n>\n              <En>Admin</En>\n              <Fr>Administrateurs</Fr>\n            </I18n>\n          </Typography>\n          <Typography>\n            <I18n>\n              <En>\n                Add each admin or reviewer's email address on it's own line\n              </En>\n              <Fr>\n                Ajouter l'adresse e-mail de chaque administrateur ou rviseur\n                sur sa propre ligne\n              </Fr>\n            </I18n>\n          </Typography>\n        </Grid>\n\n        {loading ? (\n          <CircularProgress />\n        ) : (\n          <>\n            <Grid item xs>\n              <Typography>\n                <I18n>\n                  <En>Projects</En>\n                  <Fr>Projets</Fr>\n                </I18n>\n              </Typography>\n            </Grid>\n            <Grid item xs>\n              <TextField\n                multiline\n                fullWidth\n                value={projects.join(\"\\n\")}\n                onChange={(e) =>\n                  this.setState({ projects: e.target.value.split(\"\\n\") })\n                }\n              />\n            </Grid>\n            <Grid item xs>\n              <Typography>\n                <I18n>\n                  <En>Admins</En>\n                  <Fr>Administrateurs</Fr>\n                </I18n>\n              </Typography>\n            </Grid>\n            <Grid item xs>\n              <TextField\n                multiline\n                fullWidth\n                value={admins.join(\"\\n\")}\n                onChange={(e) =>\n                  this.setState({ admins: e.target.value.split(\"\\n\") })\n                }\n              />\n            </Grid>\n            <Grid item xs>\n              <Typography>\n                <I18n>\n                  <En>Reviewers</En>\n                  <Fr>Rviseurs</Fr>\n                </I18n>\n              </Typography>\n            </Grid>\n            <Grid item xs>\n              <TextField\n                multiline\n                fullWidth\n                value={reviewers.join(\"\\n\")}\n                onChange={(e) =>\n                  this.setState({\n                    reviewers: e.target.value.split(\"\\n\"),\n                  })\n                }\n              />\n            </Grid>\n            <Grid item xs>\n              <Button\n                startIcon={<Save />}\n                variant=\"contained\"\n                color=\"secondary\"\n                onClick={() => this.save()}\n              >\n                <I18n>\n                  <En>Save</En>\n                  <Fr>Enregistrer</Fr>\n                </I18n>\n              </Button>\n            </Grid>\n          </>\n        )}\n      </Grid>\n    );\n  }\n}\n\nexport default Admin;\n","import React from \"react\";\nimport * as Sentry from \"@sentry/react\";\n\nconst SentryTest = () => {\n  Sentry.captureException(new Error(\"Testing sentry\"));\n  return <h1>Error notification sent</h1>;\n};\n\nexport default SentryTest;\n","import React, { useContext } from \"react\";\nimport { Route, Switch, useParams } from \"react-router-dom\";\nimport { Helmet } from \"react-helmet\";\nimport { CircularProgress, Grid } from \"@material-ui/core\";\nimport { createTheme, ThemeProvider } from \"@material-ui/core/styles\";\nimport Submissions from \"./Pages/Submissions\";\nimport Published from \"./Pages/Published\";\nimport Contacts from \"./Pages/ContactsSaved\";\nimport Login from \"./Pages/Login\";\nimport NavDrawer from \"./NavDrawer\";\nimport MetadataForm from \"./Pages/MetadataForm\";\nimport ErrorBoundary from \"./Pages/ErrorBoundary\";\nimport EditContact from \"./FormComponents/EditSavedContact\";\nimport Reviewer from \"./Pages/Reviewer\";\nimport Admin from \"./Pages/Admin\";\nimport NotFound from \"./Pages/NotFound\";\nimport SentryTest from \"./Pages/SentryTest\";\nimport UserProvider, { UserContext } from \"../providers/UserProvider\";\nimport regions from \"../regions\";\n\nconst RegionLogo = ({ children }) => {\n  const { language, region } = useParams();\n  const imgPath = `/cioos-${region}-${language}.png`;\n  return (\n    <Grid container direction=\"column\" spacing={2}>\n      <Grid item xs>\n        <img src={process.env.PUBLIC_URL + imgPath} alt={region} />\n      </Grid>\n      <Grid item xs style={{ paddingLeft: \"50px\" }}>\n        {children}\n      </Grid>\n    </Grid>\n  );\n};\nconst Pages = ({ match }) => {\n  const { loggedIn, authIsLoading } = useContext(UserContext);\n\n  return (\n    <>\n      {authIsLoading ? (\n        <CircularProgress />\n      ) : (\n        <RegionLogo>\n          {loggedIn ? (\n            <ErrorBoundary>\n              <Switch>\n                <Route path={`${match.path}/`} exact component={Submissions} />\n                <Route path={`${match.path}/new`} component={MetadataForm} />\n                <Route\n                  path={`${match.path}/contacts/:contactID`}\n                  component={EditContact}\n                />\n                <Route\n                  path={`${match.path}/contacts/new`}\n                  component={EditContact}\n                />\n                <Route path={`${match.path}/contacts`} component={Contacts} />\n                <Route\n                  path={`${match.path}/:userID/:recordID`}\n                  component={MetadataForm}\n                />\n                <Route\n                  path={`${match.path}/submissions`}\n                  component={Submissions}\n                />\n                <Route path={`${match.path}/published`} component={Published} />\n                <Route path={`${match.path}/reviewer`} component={Reviewer} />\n                <Route path={`${match.path}/admin`} component={Admin} />\n                <Route\n                  path={`${match.path}/sentry-test`}\n                  component={SentryTest}\n                />\n                <Route path=\"*\" component={NotFound} />\n              </Switch>\n            </ErrorBoundary>\n          ) : (\n            <Login />\n          )}\n        </RegionLogo>\n      )}\n    </>\n  );\n};\nconst BaseLayout = ({ match }) => {\n  const { region, language } = useParams();\n\n  const theme = createTheme({\n    overrides: {\n      MuiTooltip: {\n        tooltip: {\n          fontSize: \"1em\",\n        },\n      },\n      MuiFormControlLabel: {\n        root: {\n          '&.Mui-disabled': {\n            '& .MuiCheckbox-root': {\n              color: '#ababab', \n            },\n            '& .MuiTypography-root': {\n              color: '#ababab',\n            },\n          },\n        },\n      },\n      MuiInputBase: {\n        input: {\n          '&.Mui-disabled': {\n            color: '#ababab',\n          },\n        },\n      },\n    },\n    palette: {\n      primary: {\n        main: regions[region].colors.primary,\n      },\n      secondary: {\n        main: regions[region].colors.secondary,\n      },\n    },\n    props: {\n      MuiTextField: {\n        variant: \"outlined\",\n      },\n      MuiSelect: {\n        variant: \"outlined\",\n      },\n      MuiButton: {\n        variant: \"outlined\",\n      },\n    },\n  });\n  const title = {\n    en: `${regions[region].title[language]} Metadata Intake Form`,\n    fr: `Formulaire de rception des mtadonnes ${regions[region].title[language]}`,\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>{title[language]}</title>\n        <link\n          rel=\"icon\"\n          type=\"image/png\"\n          href={`${process.env.PUBLIC_URL}/favicons/${region}.ico`}\n          sizes=\"16x16\"\n        />\n      </Helmet>\n\n      <UserProvider>\n        <ThemeProvider theme={theme}>\n          <NavDrawer>\n            <Pages match={match} />\n          </NavDrawer>\n        </ThemeProvider>\n      </UserProvider>\n    </>\n  );\n};\n\nexport default BaseLayout;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\n\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\n\nimport Typography from \"@material-ui/core/Typography\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport regions from \"../../regions\";\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 345,\n  },\n  media: {\n    height: 400,\n    \"&:hover\": {\n      filter:\n        \"brightness( 100% ) contrast( 100% ) saturate( 200% ) blur( 0px ) hue-rotate( 197deg )\",\n    },\n  },\n});\n\nexport default function MediaCard({ region, regionSummary }) {\n  const history = useHistory();\n  const { language } = useParams();\n  const classes = useStyles();\n\n  const regionInfo = regions[region];\n  const imgPath = `/cioos-${region}-${language}.png`;\n\n  return (\n    <Card\n      className={classes.root}\n      onClick={() => history.push(`/${language}/${region}`)}\n      style={{ minHeight: \"500px\", minWidth: \"400px\" }}\n    >\n      <CardActionArea>\n        <CardMedia\n          className={classes.media}\n          image={`${process.env.PUBLIC_URL}/map-${region}.jpg`}\n          title={regionInfo.title[language]}\n        />\n        <CardContent>\n          <div>\n            <img\n              src={process.env.PUBLIC_URL + imgPath}\n              alt={region}\n              style={{ margin: \"10px\", maxWidth: \"300px\", maxHeight: \"80px\" }}\n            />\n          </div>\n\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n            {regionSummary}\n          </Typography>\n        </CardContent>\n      </CardActionArea>\n    </Card>\n  );\n}\n","import React from \"react\";\nimport { Grid, Typography } from \"@material-ui/core\";\nimport { useParams } from \"react-router-dom\";\nimport { Helmet } from \"react-helmet\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport RegionCard from \"../FormComponents/RegionCard\";\nimport regions from \"../../regions\";\n\nexport default function RegionSelect() {\n  const { language } = useParams();\n  const title = {\n    en: \"Metadata Intake Form\",\n    fr: \"Formulaire de rception des mtadonnes\",\n  };\n  return (\n    <>\n      <Helmet>\n        <title>{title[language]}</title>\n      </Helmet>\n\n      <Grid container direction=\"column\" spacing={2}>\n        <Grid item xs>\n          <Typography variant=\"h6\">\n            <I18n>\n              <En>\n                Welcome to the CIOOS Metadata Entry Tool. To get started, please\n                select the region where your data was collected.\n              </En>\n              <Fr>\n                Bienvenue dans l'outil de saisie de mtadonnes du SIOOC. Pour\n                commencer, veuillez slectionner la rgion dans laquelle vos\n                donnes ont t collectes.\n              </Fr>\n            </I18n>\n          </Typography>\n        </Grid>\n        <Grid item xs>\n          <Grid\n            container\n            direction=\"row\"\n            justifyContent=\"flex-start\"\n            alignItems=\"stretch\"\n          >\n            {Object.entries(regions).map(([regionCode, regionInfo]) => {\n              if (regionInfo.showInRegionSelector)\n                return (\n                  <Grid item xs key={regionCode}>\n                    <RegionCard\n                      region={regionCode}\n                      regionSummary={regionInfo.introPageText[language]}\n                    />\n                  </Grid>\n                );\n              return null;\n            })}\n          </Grid>\n        </Grid>\n      </Grid>\n    </>\n  );\n}\n","import React from \"react\";\nimport {\n  Route,\n  HashRouter as Router,\n  Redirect,\n  Switch,\n} from \"react-router-dom\";\nimport regions from \"../regions\";\nimport NavDrawer from \"./NavDrawer\";\n\nimport BaseLayout from \"./BaseLayout\";\nimport RegionSelect from \"./Pages/RegionSelect\";\n\nconst languagePath = \":language(en|fr)\";\n// eg :region(pacific|atlantic..)\nconst regionPath = `:region(${Object.keys(regions).join(\"|\")})`;\n\nconst App = () => (\n  <Router basename=\"/\">\n    <Switch>\n      <Route exact path=\"/\">\n        <Redirect to=\"/en/region-select\" />\n      </Route>\n      <Route\n        path={`/${languagePath}/region-select`}\n        exact\n        component={() => (\n          <NavDrawer>\n            <RegionSelect />\n          </NavDrawer>\n        )}\n      />\n      <Route path={`/${languagePath}/${regionPath}`} component={BaseLayout} />\n      <Route path=\"*\">\n        <Redirect to=\"/en/region-select\" />\n      </Route>\n    </Switch>\n  </Router>\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport * as Sentry from \"@sentry/react\";\nimport { Integrations } from \"@sentry/tracing\";\n\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nif (process.env.NODE_ENV === \"production\")\n  Sentry.init({\n    dsn:\n      \"https://8fd4b6885cc447c0b11aa0cb3009b0e3@o56764.ingest.sentry.io/5493983\",\n    integrations: [new Integrations.BrowserTracing()],\n\n    // We recommend adjusting this value in production, or using tracesSampler\n    // for finer control\n    tracesSampleRate: 1.0,\n  });\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}